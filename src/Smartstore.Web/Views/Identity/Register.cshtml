@using Smartstore.Web.Models.Identity

@model RegisterModel

@{
    Assets.AppendTitleParts(T("PageTitle.Register"));
    var returnUrl = Context.Request.Query["returnUrl"].ToString();
}

<form asp-route="Register" asp-route-returnUrl="@returnUrl" id="register-form" method="post" class="form-horizontal" role="form">
    <div class="page registration-page">
        <div class="page-title">
            <h1 class="h3">@T("Account.Register")</h1>
        </div>
        <div class="page-body row">
            <div class="col-12 col-lg-9 col-xl-8">

                <div asp-validation-summary="ModelOnly"></div>

                <fieldset class="content-group">
                    <legend><span>@T("Account.YourPersonalDetails")</span></legend>

                    <honeypot sm-enabled="true" />

                    <div sm-if="Model.UsernamesEnabled" class="form-group row">
                        <label asp-for="Username" class="col-md-3 col-form-label required"></label>
                        <div class="col-md-9">
                            @if (Model.CheckUsernameAvailabilityEnabled)
                            {
                                <div class="input-group">
                                    <input asp-for="Username" class="remember" autocomplete="username" />
                                </div>
                            }
                            else
                            {
                                <input asp-for="Username" class="remember" autocomplete="username" />
                            }
                            <span asp-validation-for="Username"></span>
                        </div>
                    </div>

                    <zone name="gdpr_consent" />
                </fieldset>
                
                <fieldset sm-if="Model.PhoneEnabled" class="content-group">
                    <div sm-if="Model.PhoneEnabled" class="form-group row">
                        <label asp-for="Phone" class="col-md-3 col-form-label" attr-class='(Model.PhoneRequired, "required")'></label>
                        <div class="col-md-9">
                            <input asp-for="Phone" sm-required="Model.PhoneRequired" class="remember" autocomplete="tel" />
                            <span asp-validation-for="Phone"></span>
                        </div>
                    </div>
                </fieldset>

                <div class="form-group row">
                    <div class="col-12 text-muted">
                        @T("Common.FormFields.Required.Hint")
                    </div>
                </div>

                <div class="form-group row">
                    <div class="col">
                        <button type="submit" class="btn btn-primary btn-lg" name="register-button" id="register-button">
                            @T("Account.Register.Button")
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>


<script sm-target-zone="scripts" data-origin="register">
    $(function () {
        restoreRememberedFormFields("registerVals");

        _.delay(function () {
            $(".country-selector").trigger("change");
        }, 50);
    });

    const form = document.getElementById('register-form');
    form.addEventListener('focusout', (event) => {
        rememberFormFields("register-form", "registerVals");
    });
</script>

