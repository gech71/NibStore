/*! 
Super simple WYSIWYG editor v0.9.1
https://summernote.org

Copyright 2013- Hackerwins and contributors
Summernote may be freely distributed under the MIT license.

Date: 2025-05-10T03:01Z
 */
var Ks=L=>{throw TypeError(L)};var $e=(L,P,j)=>P.has(L)||Ks("Cannot "+j);var A=(L,P,j)=>($e(L,P,"read from private field"),j?j.call(L):P.get(L)),at=(L,P,j)=>P.has(L)?Ks("Cannot add the same private member more than once"):P instanceof WeakSet?P.add(L):P.set(L,j),Ct=(L,P,j,q)=>($e(L,P,"write to private field"),q?q.call(L,j):P.set(L,j),j),st=(L,P,j)=>($e(L,P,"access private method"),j);(function(){"use strict";var nt,vt,ut,pt,dt,Et,G,yt,Gs,Wt,Zs,Se;$.summernote=$.summernote||{lang:{}},$.extend(!0,$.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size",sizeunit:"Font Size Unit"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize full",resizeHalf:"Resize half",resizeQuarter:"Resize quarter",resizeNone:"Original size",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Remove float",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image",original:"Original"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL",providers:"(YouTube, Google Drive, Vimeo, Vine, Instagram, DailyMotion, Youku, Peertube)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table",addRowAbove:"Add row above",addRowBelow:"Add row below",addColLeft:"Add column left",addColRight:"Add column right",delRow:"Delete row",delCol:"Delete column",delTable:"Delete table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",p:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Text Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default",cpSelect:"Select"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{escape:"Escape",insertParagraph:"Insert Paragraph",undo:"Undo the last command",redo:"Redo the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select special characters"},output:{noSelection:"No selection made!"}}}),$.extend(!0,$.summernote.lang,{"en-US":{common:{ok:"OK",cancel:"Cancel",save:"Save",search:"Search"},emoji:{emoji:"Emoji",search:"Search emojis...",typeTwo:"Type at least two characters...",recent:"Recently used"},help:{save:"Save"},font:{code:"Code"},attrs:{cssClass:"CSS Class",cssStyle:"CSS Style",rel:"Rel"},link:{browse:"Browse"},image:{imageProps:"Image Attributes"},imageShapes:{tooltip:"Shape",tooltipShapeOptions:["Responsive","Border","Rounded","Circle","Thumbnail","Shadow (small)","Shadow (medium)","Shadow (large)"]},tableStyles:{tooltip:"Table style",stylesExclusive:["Basic","Bordered"],stylesInclusive:["Striped","Condensed","Hoverable"]}}});const L=["sans-serif","serif","monospace","cursive","fantasy"];function P(s){return $.inArray(s.toLowerCase(),L)===-1?`'${s}'`:s}function j(){const s="mw",t="20px";var n=document.createElement("canvas"),r=n.getContext("2d",{willReadFrequently:!0});n.width=40,n.height=20,r.textAlign="center",r.fillStyle="black",r.textBaseline="middle";function a(c,d){r.clearRect(0,0,40,20),r.font=t+" "+P(c)+', "'+d+'"',r.fillText(s,40/2,20/2);var h=r.getImageData(0,0,40,20).data;return h.join("")}return c=>{const d=c==="Comic Sans MS"?"Courier New":"Comic Sans MS";let h=a(d,d),u=a(c,d);return h!==u}}const q=navigator.userAgent,Kt=/MSIE|Trident/i.test(q);let Gt;if(Kt){let s=/MSIE (\d+[.]\d+)/.exec(q);s&&(Gt=parseFloat(s[1])),s=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(q),s&&(Gt=parseFloat(s[1]))}const kt=/Edge\/\d+/.test(q),Qs="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,Js=Kt?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input",D={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:Kt,isEdge:kt,isFF:!kt&&/firefox/i.test(q),isPhantom:/PhantomJS/i.test(q),isWebkit:!kt&&/webkit/i.test(q),isChrome:!kt&&/chrome/i.test(q),isSafari:!kt&&/safari/i.test(q)&&!/chrome/i.test(q),browserVersion:Gt,isSupportTouch:Qs,isFontInstalled:j(),isW3CRangeSupport:!!document.createRange,inputEventName:Js,genericFontFamilies:L,validFontName:P},E={isArguments:s=>_.isArguments(s),isArray:s=>_.isArray(s),isArrayBuffer:s=>_.isArrayBuffer(s),isBoolean:s=>_.isBoolean(s),isDataView:s=>_.isDataView(s),isDate:s=>_.isDate(s),isNode:s=>s instanceof Node,isElement:s=>_.isElement(s),isError:s=>_.isError(s),isFunction:s=>_.isFunction(s),isFinite:s=>_.isFinite(s),isNaN:s=>_.isNaN(s),isNull:s=>s===null,isNullOrUndefined:s=>s==null,isAssigned:s=>s!=null&&s!=null,isNumber:s=>_.isNumber(s),isObject:s=>_.isObject(s),isPlainObject:s=>$.isPlainObject(s),isRegExp:s=>_.isRegExp(s),isString:s=>_.isString(s),isSymbol:s=>_.isSymbol(s),isTypedArray:s=>_.isTypedArray(s),isUndefined:s=>_.isUndefined(s),isJquery:s=>s instanceof $},Ys=s=>function(t){return s===t},Xs=(s,t)=>s===t,to=s=>function(t,e){return t[s]===e[s]},eo=()=>!0,so=()=>!1,oo=s=>s;function io(s){return function(){return!s.apply(s,arguments)}}function no(...s){const t=s,e=t.length;return e===0?!1:function(i){for(var n=0;n<e;n++)if(t[n]&&!t[n](i))return!1;return!0}}function ro(...s){const t=s,e=t.length;return e===0?!1:function(i){for(var n=0;n<e;n++)if(t[n]&&t[n](i))return!0;return!1}}function ao(s,t){return function(){return s[t].apply(s,arguments)}}let Ee=0;function lo(){Ee=0}function co(s){const t=++Ee+"";return s?s+t:t}const ho=(s,t,e)=>_.debounce(s,t,e),uo=(s,t,e)=>_.delay(s,t,e),po=(s,t)=>_.defer(s,t),fo=(s,t,e)=>_.throttle(s,t,e);function mo(s,t,e){return Math.min(Math.max(s,t),e)}function go(s){return()=>s}const y={eq:Ys,eq2:Xs,peq2:to,ok:eo,fail:so,self:oo,not:io,and:no,or:ro,invoke:ao,resetUniqueId:lo,uniqueId:co,debounce:ho,delay:uo,defer:po,throttle:fo,clamp:mo,constant:go},bo=s=>s.length!==void 0,Ne=s=>_.first(s),Zt=s=>_.last(s),vo=s=>_.initial(s),Te=s=>_.rest(s),Co=(s,t,e)=>_.findIndex(s,t,e)>-1,yo=(s,t,e)=>_.findIndex(s,t,e),ko=(s,t,e)=>_.find(s,t,e),wo=(s,t,e)=>_.every(s,t,e),xo=(s,t,e)=>_.some(s,t,e),$o=(s,t)=>s!=null&&s.contains?s.contains(t):_.contains(s,t),So=(s,t,e)=>(t=t||y.self,_.reduce(s,function(i,n){return i+t(n)},0,e)),Eo=(s,t,e)=>_.isFunction(Array.from)?t?Array.from(s,t,e):Array.from(s):t?_.map(s,t,e):_.toArray(s),No=s=>_.isEmpty(s),To=(s,t)=>{if(!s.length)return[];const e=Te(s),i=E.isFunction(t)?t:y.peq2(t);return e.reduce(function(n,r){const a=Zt(n);return i(Zt(a),r)?a[a.length]=r:n[n.length]=[r],n},[[Ne(s)]])},Ho=(s,t,e)=>_.groupBy(s,t,e),Ro=s=>_.compact(s),Lo=(s,t,e)=>_.uniq(s,t,null,e),Ao=(s,t)=>{if(s!=null&&s.length&&t){const e=s.indexOf(t);return e===-1||e===s.length-1?null:s[e+1]}return null},zo=(s,t)=>{if(s!=null&&s.length&&t){const e=s.indexOf(t);return e<=0?null:s[e-1]}return null},Po=(s,t,e=null)=>_.each(s,t,e),Mo=(s,t,e,i)=>_.foldl(s,t,e,i),Bo=(s,t,e,i)=>_.foldr(s,t,e,i),Io=(s,t,e)=>_.filter(s,t,e),Do=(s,t,e)=>_.reject(s,t,e),Oo=(s,t,e=null)=>_.map(s,t,e);function Fo(s,t=null,e=null){const i=E.isString(s)?s.split(t||","):s||[];e=e||{};let n=i.length;for(;n--;)e[i[n]]={};return e}const He=(s,t,e,i)=>{i=i||s,s&&(e&&(s=o[e]),_.each(s,(n,r)=>t.call(i,n,r,e)===!1?!1:(He(n,t,e,i),!0)))},p={head:Ne,last:Zt,initial:vo,tail:Te,prev:zo,next:Ao,exists:Co,find:ko,findIndex:yo,contains:$o,all:wo,any:xo,sum:So,from:Eo,isEmpty:No,clusterBy:To,groupBy:Ho,compact:Ro,unique:Lo,each:Po,foldl:Mo,foldr:Bo,filter:Io,reject:Do,map:Oo,makeMap:Fo,isArrayLike:bo,walk:He},jo=/^[ \t\r\n]*$/,Uo=/\s/,Vo=/^(?!-)([a-zA-Z0-9-]{1,63}\.)+[a-zA-Z]{2,6}$/,_o=/^(([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))\.){3}([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))$/,Re=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/,qo=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,Wo=/^(\+?\d{1,3}[\s-]?)?(\d{1,4})[\s-]?(\d{1,4})[\s-]?(\d{1,4})$/,Le=(s,t,e)=>t===""||s.length>=t.length&&s.substr(e,e+t.length)===t,Ko=(s,t)=>Le(s,t,0),Go=(s,t)=>Le(s,t,s.length-t.length),Zo=s=>_.escape(s),Qo=s=>_.unescape(s),Jo=s=>Uo.test(s),Yo=s=>jo.test(s),Xo=(s,t,e=0,i)=>{const n=s.indexOf(t,e);return n!==-1?E.isUndefined(i)?!0:n+t.length<=i:!1},ti=(s,t)=>E.isRegExp(s)?s.test(t):s==t,ei=(s,t)=>(t=t||"",t+s.split(".").map(e=>e.substring(0,1).toUpperCase()+e.substring(1)).join("")),si=s=>s.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),Ae=s=>s&&(Vo.test(s)||_o.test(s)),oi=s=>s&&qo.test(s),ii=s=>s&&Wo.test(s),ni=s=>s&&Re.test(s),ri=s=>s&&(Re.test(s)||Ae(s)),ai=(s,t=null)=>Array.isArray(s)?s:s===""?[]:s.split(t||",").map(e=>e.trim()),ze=(s,t,e)=>e<0?-1:s.lastIndexOf(t,e),U={startsWith:Ko,endsWith:Go,contains:Xo,hasWhiteSpace:Jo,isAllWhitespace:Yo,escape:Zo,unescape:Qo,matches:ti,namespaceToCamel:ei,camelCaseToHyphens:si,isValidHost:Ae,isValidEmail:oi,isValidTel:ii,startsWithUrlScheme:ni,isValidUrl:ri,explode:ai,findPosition:(s,t)=>{const e=s.indexOf(t);if(e>0){const i=ze(s,`
`,e-1),n=e-i-1;let r=0;for(let a=i;a>=0;a=ze(s,`
`,a-1))r++;return{line:r,column:n}}return null},nullEmpty:s=>_.isEmpty(s)?null:s},et={has:(s,t)=>s&&s.hasOwnProperty(t),get:(s,t,e)=>_.get(s,t,e),valueOrDefault:(s,t)=>E.isNullOrUndefined(s)?t:s,isEqual:(s,t)=>_.isEqual(s,t),isMatch:(s,t)=>_.isMatch(s,t),extend:(s,t)=>_.extendOwn(s,t),invert:s=>_.invert(s)},Pe={},Me=p.makeMap,Ht=p.each,Be={},li=()=>{const t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul center dir isindex noframes article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",e="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg acronym applet basefont big font strike tt textarea u var #text #comment",i=[t,e].join(" "),n={},r=(c,d)=>{n[c]={children:p.makeMap(d)}},a=(c,d="")=>{d=d==null?void 0:d.trim();const h=d?d.trim().split(" "):[],u=c.trim().split(" ");let f=u.length;for(;f--;)r(u[f],h)};return a("html","head body"),a("head","base command link meta noscript script style title"),a("body",i),a("dd div address dt caption",i),a("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn",e),a("ol li","li"),a("li blockquote",i),a("dl","dt dd"),a("a ins del iframe",i),a("object",[i,"param"].join(" ")),a("map",[i,"area"].join(" ")),a("table","caption colgroup thead tfoot tbody tr"),a("colgroup","col"),a("tbody thead tfoot","tr"),a("tr","td th"),a("td th",i),a("form",i),a("fieldset",[i,"legend"].join(" ")),a("label button q",e),a("select","option optgroup"),a("optgroup","option"),a("menu",[i,"li"].join(" ")),a("noscript",i),a("wbr"),a("ruby",[e,"rt rp"].join(" ")),a("figcaption",i),a("mark rt rp bdi",e),a("summary",[e,"h1 h2 h3 h4 h5 h6"].join(" ")),a("canvas",i),a("video",[i,"track source"].join(" ")),a("audio",[i,"track source"].join(" ")),a("picture","img source"),a("datalist",[e,"option"].join(" ")),a("article section nav aside main header footer",i),a("hgroup","h1 h2 h3 h4 h5 h6"),a("figure",[i,"figcaption"].join(" ")),a("time output progress meter",e),a("dialog",i),a("details",[i,"summary"].join(" ")),Ht([n.video,n.audio],c=>{delete c.children.audio,delete c.children.video}),Ht("a form meter progress dfn".split(" "),c=>{n[c]&&delete n[c].children[c]}),delete n.caption.children.table,delete n.script,n},ci=(s,t)=>{let e=Me(s," ",Me(s.toUpperCase()," "));return $.extend(e,t)},W=(s,t,e)=>{let i=Pe[s];return i||(i=ci(t,e),Pe[s]=i),i},di=li(),Ie={};Ht(di,(s,t)=>{Ie[t]=s.children});const hi=W("whitespace_elements","pre script noscript style textarea video audio iframe object code"),ui=W("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),Rt=W("void_elements","area audio base basefont br col frame hr iframe img input isindex link meta param embed source video wbr track"),pi=W("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),De="td th iframe video audio object script code",fi=W("non_empty_elements",De+" pre svg",Rt),mi=W("move_caret_before_on_enter_elements",De+" table",Rt),Qt="h1 h2 h3 h4 h5 h6",gi=W("heading_elements",Qt),Jt=W("text_block_elements",Qt+" p div li address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Yt=W("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",Jt),bi=W("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),vi=W("text_root_block_elements","td th li dt dd figcaption caption details summary",Jt),Ci=W("transparent_elements","a ins del canvas map"),Oe=W("wrap_block_elements","pre "+Qt);Ht("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),s=>{Be[s]=new RegExp("</"+s+"[^>]*>","gi")});const yi=y.constant(gi),ki=y.constant(Yt),wi=y.constant(pi),xi=y.constant(Jt),$i=y.constant(vi),Si=y.constant(bi),Ei=y.constant(Object.seal(Rt)),Ni=y.constant(ui),Ti=y.constant(fi),Hi=y.constant(mi),Ri=y.constant(hi),Fe=y.constant(Ci),Li=y.constant(Oe),Ai=y.constant(Object.seal(Be)),zi=(s,t)=>{const e=Ie[s.toLowerCase()];return!!(!e||e[t.toLowerCase()])},Pi=s=>et.has(Yt,s),je=s=>!U.startsWith(s,"#")&&!et.has(Yt,s),Mi=s=>et.has(Oe,s)||je(s),Bi=s=>et.has(Rt,s),Ue=s=>et.has(Fe(),s),wt={getHeadingElements:yi,getBlockElements:ki,getVoidElements:Ei,getTextBlockElements:xi,getTextInlineElements:Si,getTextRootBlockElements:$i,getBoolAttrs:wi,getSelfClosingElements:Ni,getNonEmptyElements:Ti,getMoveCaretBeforeOnEnterElements:Hi,getWhitespaceElements:Ri,getTransparentElements:Fe,getWrapBlockElements:Li,getSpecialElements:Ai,isValidChild:zi,isBlock:Pi,isInline:je,isWrapper:Mi,isVoid:Bi,isTransparentElementName:Ue,isTransparentElement:s=>dom.isElement(s)&&Ue(s.nodeName)},V=s=>E.isJquery(s)?s.get(0):s,Ve=s=>{const t=s==null?void 0:s.charCodeAt(0);return t>=65&&t<=90},_e=(s,t)=>{if(Y(s)){const e=s.ownerDocument.defaultView;if(e){const i=e.getComputedStyle(s,null);return i?i.getPropertyValue(t):null}}return null},R=s=>{const t=s.toUpperCase();return e=>E.isAssigned(e)&&(Ve(e.nodeName)?e.nodeName:e.nodeName.toUpperCase())===t},lt=s=>{if(E.isString(s)&&(s=U.explode(s," ")),s.length===0||s==="*")return y.ok;if(s.length==1)return R(s[0]);const t=s.map(e=>e.toUpperCase());return e=>{if(e&&e.nodeName){const i=Ve(e.nodeName)?e.nodeName:e.nodeName.toUpperCase();return p.contains(t,i)}return!1}},Ii=s=>t=>t&&et.has(s,t.nodeName),Di=(s,t)=>{const e=t.toLowerCase().split(" ");return i=>{const n=_e(i,s);return n&&p.contains(e,n)}},Oi=s=>t=>t&&$(t).hasClass(s),Fi=s=>t=>Y(t)&&t.hasAttribute(s),ji=(s,t)=>e=>Y(e)&&e.getAttribute(s)===t,Ui=s=>t=>!!(Xt(t)&&(t.contentEditable===s||t.getAttribute("data-note-contenteditable")===s)),K=(s,t)=>E.isFunction(s)?s:qe(s)?y.eq(s):E.isString(s)&&s.length?e=>e.matches&&e.matches(s):t,ht=s=>t=>!!t&&t.nodeType===s,qe=s=>E.isNumber(s==null?void 0:s.nodeType),Y=ht(1),M=ht(3),Vi=ht(4),_i=ht(7),qi=ht(8),Wi=ht(9),Ki=ht(11),We=s=>Y(s)&&s.namespaceURI==="http://www.w3.org/2000/svg",Xt=y.and(Y,y.not(We)),Gi=s=>!!s&&!Object.getPrototypeOf(s),Zi=R("BODY"),Qi=R("PRE"),te=R("LI"),Ji=R("TABLE"),Yi=R("DATA"),Xi=R("HR"),tn=R("LI"),en=R("DETAILS"),sn=R("SUMMARY"),ee=R("BLOCKQUOTE"),Ke=R("A"),on=R("DIV"),nn=R("SPAN"),rn=R("B"),an=R("U"),ln=R("BR"),cn=R("IMG"),dn=R("FIGURE"),Ge=R("TEXTAREA"),hn=R("DL"),un=lt(["TEXTAREA","INPUT","SELECT"]),Ze=lt(["UL","OL"]),Qe=lt(["TD","TH"]),pn=lt(["TR","TD","TH"]),fn=lt(["TD","TH","CAPTION"]),mn=lt(["VIDEO","AUDIO","OBJECT","EMBED"]),gn=Ii(wt.getHeadingElements()),xt=s=>et.has(wt.getTextBlockElements(),s.nodeName)&&!ct(s),Lt=s=>xt(s)&&!ee(s),bn=s=>Lt(s)&&!te(s),gt=s=>wt.isInline(s.nodeName),vn=s=>wt.isBlock(s.nodeName),Cn=s=>(M(s)||gt(s))&&!!ot(s,xt),yn=s=>(M(s)||gt(s))&&!!ot(s,Lt),kn=s=>(M(s)||gt(s))&&!ot(s,xt),wn=s=>(M(s)||gt(s))&&!ot(s,Lt),xn=s=>Qe(s)||ee(s)||ct(s),Je=y.and(R("SPAN"),ji("data-note-type","bookmark")),$n=s=>s&&wt.isVoid(s.nodeName),Sn=s=>Ke(s)&&zt(s),En=s=>M(s)&&!zt(s),Nn=(s,t)=>K(t)(s),Tn=s=>(s==null?void 0:s.classList)&&s.nodeName==="DIV"&&s.classList.contains("note-control-sizing"),Hn=(s,t)=>lt(t)(s),Rn=(s,t=!1)=>{if(M(s)){const e=t?s.data.replace(/ /g," "):s.data;return U.isAllWhitespace(e)}return!1},Ye=s=>$(s).closest(".note-editable")[0],ct=s=>(s==null?void 0:s.classList)&&s.nodeName==="DIV"&&s.classList.contains("note-editable"),Ln=s=>{if(s){const t=Y(s)?s:s.parentElement;return!!t&&t.isContentEditable}return!1},Xe=s=>{if(s&&Xt(s)){const t=s.getAttribute("data-note-contenteditable");return t&&t!=="inherit"?t:s.contentEditable!=="inherit"?s.contentEditable:null}else return null},An=s=>{const t=Ye(s);let e=null;for(let i=s;i&&i!==t&&(e=Xe(i),e===null);i=i.parentNode);return e},zn=s=>{const t=(s==null?void 0:s.originalEvent)||s;return(t==null?void 0:t.relatedTarget)&&t.relatedTarget.closest(".note-editor, .note-popover")!=null},se=D.isMSIE&&D.browserVersion<11?"&nbsp;":"<br>",Pn=s=>document.createTextNode(s),$t=(s,t=null,e=null)=>{const i=document.createElement(s);return E.isObject(t)&&p.each(t,(n,r)=>{ts(i,r,n)}),e&&(!E.isString(e)&&e.nodeType?i.appendChild(e):E.isString(e)&&e.length&&(i.innerHTML=e)),i},Mn=(s=null)=>{const t=document.createElement("div"),e=document.createDocumentFragment();e.appendChild(t),s&&(t.innerHTML=s);let i;for(;i=t.firstChild;)e.appendChild(i);return e.removeChild(t),e},Bn=(s,t)=>(s=V(s),s?s.getAttribute(t):null),ts=(s,t,e)=>{s=V(s),s&&(e?s.setAttribute(t,e):s.removeAttribute(t))},In=(s,t)=>{s=V(s),s&&Object.keys(t).forEach(e=>{const i=t[e];E.isNullOrUndefined(i)?s.removeAttribute(e):s.setAttribute(e,i)})},Dn=s=>{const t=s.attributes;for(let e=t.length-1;e>=0;e--)s.removeAttributeNode(t.item(e))},On=(s,t,e=!1)=>e?_e(V(s),U.camelCaseToHyphens(t)):$(s).css(t),Fn=(s,t,e)=>{$(s).css(t,e)},jn=(s,t)=>{$(s).css(t)},Un=(s,t)=>$(s).hasClass(t),Vn=(s,t)=>{$(s).addClass(t)},_n=(s,t)=>{$(s).removeClass(t),es(s)},qn=(s,t,e)=>{$(s).toggleClass(t,e),es(s)},es=s=>{s.classList&&s.classList.length===0&&s.removeAttribute("class")},Wn=s=>{var e;const t={};for(let i=0,n=(e=s==null?void 0:s.style)==null?void 0:e.length;i<n;i++){const r=s.style[i];t[r]=s.style.getPropertyValue(r)}return t},At=s=>M(s)?s.nodeValue.length:s?s.childNodes.length:0,zt=s=>{const t=At(s);return t===0||!M(s)&&t===1&&s.innerHTML.trim()===se||M(s)&&s.textContent.trim()===""?!0:!!(p.all(s.childNodes,M)&&s.innerHTML==="")},Kn=s=>{do if(s.firstElementChild===null||s.firstElementChild.innerHTML==="")break;while(s=s.firstElementChild);return zt(s)},Gn=(s,t)=>s.nextSibling===t||s.previousSibling===t,Zn=(s,t,e,i)=>{const n=K(t);if(n(s))return!i;if(e){for(let r=s.parentNode;r;r=r.parentNode)if(n(r))return!0}else return n(s.parentNode);return!1},Qn=(s,t)=>{for(;s&&s!==t;){if(Pt(s)!==0)return!1;s=s.parentNode}return!0},Jn=(s,t)=>{if(!t)return!1;for(;s&&s!==t;){if(Pt(s)!==At(s.parentNode)-1)return!1;s=s.parentNode}return!0},Pt=(s,t)=>{let e=0;if(s)for(let i=s.nodeType,n=s.previousSibling;n;n=n.previousSibling){const r=n.nodeType;t&&M(n)&&(r===i||!n.data.length)||(e++,i=r)}return e},Yn=s=>!!(s&&s.childNodes&&s.childNodes.length),Xn=(s,t)=>{if(Y(s)&&s.hasChildNodes()){const e=s.childNodes,i=y.clamp(t,0,e.length-1);return e[i]}else return s},tr=(s,t)=>{const e=s;for(;s&&M(s)&&s.length===0;)s=t?s.nextSibling:s.previousSibling;return s||e},er=(s,t)=>{const e=Ge(V(s))?$(s).val():$(s).html();return t?e.replace(/[\n\r]/g,""):e},sr=s=>{if(E.isNode(s)){if(Y(s))return s.outerHTML;{const t=$t("div");return Bt(t,s.cloneNode(!0)),t.innerHTML}}else return""},or=s=>{const t=$(s),e=t.offset(),i=t.outerHeight(!0);return{left:e.left,top:e.top+i}},ir=(s,t)=>{Object.keys(t).forEach(function(e){s.on(e,t[e])})},nr=(s,t)=>{Object.keys(t).forEach(function(e){s.off(e,t[e])})},rr=s=>s&&!M(s)&&p.contains(s.classList,"note-styletag"),ar=(s,t)=>{const e=V(s);return e?e.querySelectorAll?p.from(e.querySelectorAll(t)):[]:[]},ot=(s,t,e=!0)=>{if(!e&&ct(s))return null;let i=V(e?s:s.parentNode);if(i){const n=K(t);for(;i&&!ct(i);){if(n(i))return i;i=i.parentNode}}return null};function lr(s,t){var i;s=(i=V(s))==null?void 0:i.parentNode;const e=K(t);for(;s&&At(s)===1;){if(e(s))return s;if(ct(s))break;s=s.parentNode}return null}const Mt=(s,t,e=!0)=>{const i=K(t,y.fail),n=[];return ot(s,r=>(n.push(r),i(r)),e),n},cr=(s,t=null,e=null)=>{const i=K(t,y.ok),n=K(e,y.fail),r=[];return ot(s,a=>n(a)?!1:(i(a)&&r.push(a),!0)),r},dr=(s,t)=>{const e=K(t),i=Mt(s);return p.last(i.filter(e))},hr=(s,t)=>{if(E.isNullOrUndefined(s)||E.isNullOrUndefined(t))return null;if(s=V(s),t=V(t),E.isNode(s)&&s===t)return s;let e=[],i;for(i=s;i&&(e.push(i),!ct(i));i=i.parentNode);for(i=t;i;i=i.parentNode)if(e.indexOf(i)>-1)return i;return null},ur=(s,t)=>{const e=K(t,y.ok),i=[];return s=V(s),s&&(s.previousSibling&&e(s.previousSibling)&&i.push(s.previousSibling),i.push(s),s.nextSibling&&e(s.nextSibling)&&i.push(s.nextSibling)),i},ss=(s,t,e)=>{const i=K(t,y.fail),n=[];if(s=V(s),s)for(;s&&!i(s);)n.push(s),s=e?s.nextSibling:s.previousSibling;return n},pr=(s,t)=>ss(s,t,!1),fr=(s,t)=>ss(s,t,!0),mr=(s,t,e=!0)=>{const i=K(t,y.ok),n=[];return s=V(s),s&&function r(a,c){if(s!==a&&i(a)&&n.push(a),c)for(let d=0,h=a.childNodes.length;d<h;d++)r(a.childNodes[d],c)}(s,e),n},os=s=>{if(s=V(s),!!(s!=null&&s.nextSibling)&&s.parent===s.nextSibling.parent&&!(Je(s)&&(s=s.nextSibling,!s)))return M(s.nextSibling)?s.nextSibling:os(s.nextSibling)},gr=(s,t)=>Mt(t,s).map(Pt).reverse();function br(s,t){let e=s;for(let i=0,n=t.length;i<n;i++)e.childNodes.length<=t[i]?e=e.childNodes[e.childNodes.length-1]:e=e.childNodes[t[i]];return e}const vr=s=>ot(s,xt),Cr=(s,t)=>{const e=s.parentNode,i=$t(t);return e.insertBefore(i,s),i.appendChild(s),i},yr=s=>{const t=s.parentNode,e=t.childNodes;return t.replaceWith(...e),e.length==1?e.item(0):s},Bt=(s,t)=>s.appendChild(t),kr=(s,t)=>{const e=s.firstChild;return e==null?Bt(s,t):s.insertBefore(t,e)},is=(s,t)=>s.parentNode.insertBefore(t,s),wr=(s,t)=>{const e=s.nextSibling;return s.parentNode?e?is(e,t):Bt(s.parentNode,t):null},xr=(s,t,e)=>(p.each(t,i=>{Y(s)&&(!e&&te(s)&&s.firstChild===null&&Ze(i)&&s.appendChild($t("br")),s.appendChild(i))}),s),ns=(s,t)=>{if(!s||!s.parentNode)return;const e=s.parentNode;if(!t){const i=[];for(let n=0,r=s.childNodes.length;n<r;n++){const a=s.childNodes[n];M(a)&&a.length===0?s.removeChild(a):i.push(a)}for(let n=0,r=i.length;n<r;n++)e.insertBefore(i[n],s)}e.removeChild(s)},$r=(s,t)=>{const e=K(t);for(;s&&!(ct(s)||!e(s));){const i=s.parentNode;ns(s),s=i}},rs=(s,t,e)=>{var i;if(e)for(;t.firstChild;)s.appendChild(t.firstChild);return(i=t.parentNode)==null||i.replaceChild(s,t),s},Sr=(s,t)=>s.cloneNode(t),Er=(s,t)=>{if(!Y(s)||s.nodeName.toUpperCase()===t.toUpperCase())return s;const e=$t(t);return[...s.attributes].map(({name:i,value:n})=>{e.setAttribute(i,n)}),rs(e,s,!0)},l={blank:se,emptyPara:`<p>${se}</p>`,matchSelector:K,matchNodeNames:lt,matchClass:Oi,matchStyleValues:Di,matchAttribute:Fi,matchContentEditableState:Ui,matches:Nn,getEditableRoot:Ye,isEditableRoot:ct,isContentEditable:Ln,getContentEditable:Xe,getContentEditableParent:An,isControlSizing:Tn,isNode:qe,isText:M,isNonEmptyText:En,isElement:Y,isBookmarkNode:Je,isCData:Vi,isPi:_i,isComment:qi,isDocument:Wi,isDocumentFragment:Ki,isSVGElement:We,isHTMLElement:Xt,isRestrictedNode:Gi,isVoid:$n,isTag:Hn,isPara:xt,isWhiteSpace:Rn,findPara:vr,isPurePara:bn,isParaNoBlockquote:Lt,isHeading:gn,isInline:gt,isInlineOrText:y.or(gt,M),isBlock:vn,isBodyInline:kn,isBodyInlineNoBlockQuote:wn,isBody:Zi,isParaInline:Cn,isParaInlineNoBlockQuote:yn,isPre:Qi,isList:Ze,isTable:Ji,isData:Yi,isHr:Xi,isListItem:tn,isDetails:en,isSummary:sn,isCell:Qe,isCellOrRow:pn,isCellOrCaption:fn,isMedia:mn,isBlockquote:ee,isBodyContainer:xn,isAnchor:Ke,isDiv:on,isLi:te,isBR:ln,isSpan:nn,isB:rn,isU:an,isImg:cn,isFigure:dn,isTextarea:Ge,isTextareaOrInput:un,isDL:hn,isEmpty:zt,isEmptyAnchor:Sn,isClosestSibling:Gn,isContainedTarget:zn,deepestChildIsEmpty:Kn,withClosestSiblings:ur,nodeLength:At,isLeftEdgeOf:Qn,isRightEdgeOf:Jn,select:ar,closest:ot,ancestor:ot,closestSingleParent:lr,parents:Mt,ancestors:Mt,parentsWhile:cr,farthestParent:dr,commonParent:hr,prevSiblings:pr,nextSiblings:fr,children:mr,isChildOf:Zn,wrap:Cr,unwrap:yr,insertAfter:wr,insertBefore:is,append:Bt,prepend:kr,appendChildNodes:xr,position:Pt,hasChildren:Yn,skipEmptyTextNodes:tr,makeOffsetPath:gr,fromOffsetPath:br,getRangeNode:Xn,getNextTextNode:os,create:$t,createText:Pn,createFragment:Mn,remove:ns,removeWhile:$r,clone:Sr,rename:Er,replace:rs,value:er,outerHtml:sr,posFromPlaceholder:or,attachEvents:ir,detachEvents:nr,isCustomStyleTag:rr,setAttr:ts,setAttrs:In,removeAllAttrs:Dn,getAttr:Bn,getStyle:On,setStyle:Fn,setStyles:jn,hasClass:Un,addClass:Vn,removeClass:_n,toggleClass:qn,parseStyle:Wn};class Nr{constructor(t,e){this.$note=t,this.memos={},this.modules={},this.layoutInfo={},this.options=$.extend(!0,{},e),$.summernote.ui=$.summernote.ui_template(this.options),this.ui=$.summernote.ui,this.triggerChangeEvent=y.debounce(this.triggerChangeEvent.bind(this),50),this.initialize()}initialize(){return this.layoutInfo=this.ui.createLayout(this.$note),this._initialize(),this.$note.hide(),this}destroy(){this._destroy(),this.$note.removeData("summernote"),this.ui.removeLayout(this.$note,this.layoutInfo)}reset(){const t=this.isDisabled();this.code(l.emptyPara),this._destroy(),this._initialize(),t&&this.disable()}_initialize(){this.options.id=y.uniqueId($.now()),this.options.container=this.options.container||this.layoutInfo.editor;const t=$.extend({},this.options.buttons);Object.keys(t).forEach(i=>{this.memo("button."+i,t[i])});const e=$.extend({},this.options.modules,$.summernote.plugins||{});Object.keys(e).forEach(i=>{this.module(i,e[i],!0)}),Object.keys(this.modules).forEach(i=>{this.initializeModule(i)})}_destroy(){Object.keys(this.modules).reverse().forEach(t=>{this.removeModule(t)}),Object.keys(this.memos).forEach(t=>{this.removeMemo(t)}),this.triggerEvent("destroy",this)}code(t){const e=this.invoke("codeview.isActivated");if(t===void 0)return this.invoke("codeview.sync"),e?this.layoutInfo.codable.val():this.layoutInfo.editable.html();e?this.invoke("codeview.sync",t):this.layoutInfo.editable.html(t),this.$note.val(t),this.triggerEvent("change",this.layoutInfo.editable)}isDisabled(){return this.layoutInfo.editable.attr("contenteditable")==="false"}enable(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0),this.triggerEvent("disable",!1),this.options.editing=!0}disable(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.options.editing=!1,this.invoke("toolbar.deactivate",!0),this.triggerEvent("disable",!0)}triggerChangeEvent(t){this.triggerEvent("change",t)}triggerEvent(){const t=p.head(arguments),e=p.tail(p.from(arguments)),i=this.options.callbacks[U.namespaceToCamel(t,"on")];i&&i.apply(this.$note[0],e),this.$note.trigger("summernote."+t,e)}initializeModule(t){const e=this.modules[t];e.shouldInitialize=e.shouldInitialize||y.ok,e.shouldInitialize()&&(e.initialize&&e.initialize(),e.events&&l.attachEvents(this.$note,e.events))}module(t,e,i){if(arguments.length===1)return this.modules[t];this.modules[t]=new e(this),i||this.initializeModule(t)}removeModule(t){const e=this.modules[t];e.shouldInitialize()&&(e.events&&l.detachEvents(this.$note,e.events),e.destroy&&e.destroy()),delete this.modules[t]}memo(t,e){if(arguments.length===1)return this.memos[t];this.memos[t]=e}removeMemo(t){this.memos[t]&&this.memos[t].destroy&&this.memos[t].destroy(),delete this.memos[t]}createInvokeHandlerAndUpdateState(t,e){return i=>{this.createInvokeHandler(t,e)(i),this.invoke("buttons.updateCurrentStyle")}}createInvokeHandler(t,e){return i=>{i.preventDefault();const n=$(i.target);this.invoke(t,e||n.closest("[data-value]").data("value"),n)}}invoke(){const t=p.head(arguments),e=p.tail(p.from(arguments)),i=t.split("."),n=i.length>1&&i[0],r=i.length>2?i[1]:null,a=i.length>1?p.last(i):i[0];let c=this.modules[n||"editor"];if(!n&&this[a])return this[a].apply(this,e);if(c&&c[r||a]&&c.shouldInitialize())return r&&(c=E.isFunction(c[r])?c[r].apply(c):c[r]),c[a].apply(c,e)}}$.fn.extend({summernote:function(){const s=p.head(arguments),t=E.isNullOrUndefined()||E.isPlainObject(s);let e;t&&(e=$.extend({},$.summernote.options,s||{}),e.langInfo=$.extend(!0,{},$.summernote.lang["en-US"],$.summernote.lang[e.lang]),e.icons=$.extend(!0,{},$.summernote.options.icons,e.icons),e.tooltip=e.tooltip==="auto"?!D.isSupportTouch:e.tooltip),e&&this.each((n,r)=>{let a=$(r),c=a.data("summernote");c||(c=new Nr(a,e),a.data("summernote",c),c.triggerEvent("init",c.layoutInfo))});const i=this.first();if(i.length){const n=i.data("summernote");if(n){if(E.isString(s))return n.invoke.apply(n,p.from(arguments));e.focus&&n.invoke("editor.focus")}}return this}});const as='<svg viewBox="0 0 448 512"><path d="M24 40C10.7 40 0 50.7 0 64S10.7 88 24 88H264c13.3 0 24-10.7 24-24s-10.7-24-24-24H24zm0 128c-13.3 0-24 10.7-24 24s10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24zM0 320c0 13.3 10.7 24 24 24H264c13.3 0 24-10.7 24-24s-10.7-24-24-24H24c-13.3 0-24 10.7-24 24zM24 424c-13.3 0-24 10.7-24 24s10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24z"/></svg>',ls='<svg viewBox="0 0 512 512"><path d="M140.8 122.9C171.7 96.2 212 80 256 80c97.2 0 176 78.8 176 176s-78.8 176-176 176c-39.7 0-76.2-13.1-105.6-35.2c-10.6-8-25.6-5.8-33.6 4.8s-5.8 25.6 4.8 33.6C159 463.3 205.6 480 256 480c123.7 0 224-100.3 224-224S379.7 32 256 32c-57.3 0-109.6 21.5-149.2 56.9L76.3 58.3C69.7 51.7 60.7 48 51.3 48C31.8 48 16 63.8 16 83.3V200c0 13.3 10.7 24 24 24H156.7c19.5 0 35.3-15.8 35.3-35.3c0-9.4-3.7-18.3-10.3-25l-40.8-40.8zm-76.8-9L126.1 176H64V113.9z"/></svg>',Tr={align:as,alignCenter:'<svg viewBox="0 0 448 512"><path d="M120 40c-13.3 0-24 10.7-24 24s10.7 24 24 24H328c13.3 0 24-10.7 24-24s-10.7-24-24-24H120zM24 168c-13.3 0-24 10.7-24 24s10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24zM96 320c0 13.3 10.7 24 24 24H328c13.3 0 24-10.7 24-24s-10.7-24-24-24H120c-13.3 0-24 10.7-24 24zM24 424c-13.3 0-24 10.7-24 24s10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24z"/></svg>',alignJustify:'<svg viewBox="0 0 448 512"><path d="M24 40C10.7 40 0 50.7 0 64S10.7 88 24 88H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24zm0 128c-13.3 0-24 10.7-24 24s10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24zM0 320c0 13.3 10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24c-13.3 0-24 10.7-24 24zM24 424c-13.3 0-24 10.7-24 24s10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24z"/></svg>',alignLeft:as,alignRight:'<svg viewBox="0 0 448 512"><path d="M424 40c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24H424zm0 128c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24s10.7-24 24-24H424zm24 152c0 13.3-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24H424c13.3 0 24 10.7 24 24zM424 424c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24s10.7-24 24-24H424z"/></svg>',floatLeft:'<svg viewBox="0 0 512 512"><path d="M0 24C0 10.7 10.7 0 24 0S48 10.7 48 24l0 464c0 13.3-10.7 24-24 24s-24-10.7-24-24L0 24zM176 176l288 0 0-64-288 0 0 64zm-48-64c0-26.5 21.5-48 48-48l288 0c26.5 0 48 21.5 48 48l0 64c0 26.5-21.5 48-48 48l-288 0c-26.5 0-48-21.5-48-48l0-64zm48 288l160 0 0-64-160 0 0 64zm-48-64c0-26.5 21.5-48 48-48l160 0c26.5 0 48 21.5 48 48l0 64c0 26.5-21.5 48-48 48l-160 0c-26.5 0-48-21.5-48-48l0-64z"/></svg>',floatRight:'<svg viewBox="0 0 512 512"><path d="M512 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 464c0 13.3 10.7 24 24 24s24-10.7 24-24l0-464zM336 176L48 176l0-64 288 0 0 64zm48-64c0-26.5-21.5-48-48-48L48 64C21.5 64 0 85.5 0 112l0 64c0 26.5 21.5 48 48 48l288 0c26.5 0 48-21.5 48-48l0-64zM336 400l-160 0 0-64 160 0 0 64zm48-64c0-26.5-21.5-48-48-48l-160 0c-26.5 0-48 21.5-48 48l0 64c0 26.5 21.5 48 48 48l160 0c26.5 0 48-21.5 48-48l0-64z"/></svg>',floatNone:ls,flipV:'<svg viewBox="0 0 512 512"><path d="M0 256c0-13.3 10.7-24 24-24l464 0c13.3 0 24 10.7 24 24s-10.7 24-24 24L24 280c-13.3 0-24-10.7-24-24zM166.6 464l178.7 0L256 374.6 166.6 464zM128 512c-12.9 0-24.6-7.8-29.6-19.8s-2.2-25.7 6.9-34.9l128-128c12.5-12.5 32.8-12.5 45.3 0l128 128c9.2 9.2 11.9 22.9 6.9 34.9s-16.6 19.8-29.6 19.8l-256 0zM256 137.4L345.4 48 166.6 48 256 137.4zM98.4 19.8C103.4 7.8 115.1 0 128 0L384 0c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9l-128 128c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-9.2-9.2-11.9-22.9-6.9-34.9z"/></svg>',flipH:'<svg viewBox="0 0 512 512"><path d="M256 0c13.3 0 24 10.7 24 24l0 464c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-464c0-13.3 10.7-24 24-24zM48 166.6l0 178.7L137.4 256 48 166.6zM0 128c0-12.9 7.8-24.6 19.8-29.6s25.7-2.2 34.9 6.9l128 128c12.5 12.5 12.5 32.8 0 45.3l-128 128c-9.2 9.2-22.9 11.9-34.9 6.9S0 396.9 0 384L0 128zM374.6 256L464 345.4l0-178.7L374.6 256zM492.2 98.4c12 5 19.8 16.6 19.8 29.6l0 256c0 12.9-7.8 24.6-19.8 29.6s-25.7 2.2-34.9-6.9l-128-128c-12.5-12.5-12.5-32.8 0-45.3l128-128c9.2-9.2 22.9-11.9 34.9-6.9z"/></svg>',rowBelow:'<svg viewBox="0 0 14 14"><path d="m 1e-4,5.3181 c 0,0.2901 0.1688,0.5229 0.3789,0.5229 l 13.242,0 c 0.21,0 0.3789,-0.2328 0.3789,-0.5229 l 0,-4.7928 C 13.9999,0.2353 13.831,1e-4 13.621,1e-4 l -13.242,0 C 0.1689,1e-4 1e-4,0.2353 1e-4,0.5253 l 0,4.7928 z m 1.1582,-0.687 0,-3.4211 3.2168,0 0,3.4211 -3.2168,0 z m 4.2852,0 0,-3.4211 3.2148,0 0,3.4211 -3.2148,0 z m 4.2832,0 0,-3.4211 3.2148,0 0,3.4211 -3.2148,0 z m -6.7266,5.337 q 0,-0.264 0.1915,-0.4658 L 3.5798,9.1141 q 0.1966,-0.1965 0.4709,-0.1965 0.2795,0 0.4658,0.1965 l 1.5217,1.5164 0,-3.6436 q 0,-0.2691 0.194,-0.4372 0.1941,-0.1683 0.4684,-0.1683 l 0.6625,0 q 0.2743,0 0.4684,0.1683 0.1941,0.1681 0.1941,0.4372 l 0,3.6436 1.5216,-1.5164 q 0.1863,-0.1965 0.4658,-0.1965 0.2795,0 0.4658,0.1965 l 0.3882,0.3882 q 0.1966,0.1967 0.1966,0.4658 0,0.2742 -0.1966,0.471 l -3.3693,3.3692 q -0.1812,0.1916 -0.4658,0.1916 -0.2795,0 -0.471,-0.1916 L 3.1916,10.4391 Q 3.0001,10.2372 3.0001,9.9681 Z"/></svg>',colBefore:'<svg viewBox="0 0 14 14"><path d="M 8.6819,1e-4 C 8.3918,1e-4 8.159,0.1689 8.159,0.379 l 0,13.242 c 0,0.21 0.2328,0.3789 0.5229,0.3789 l 4.7928,0 c 0.29,0 0.5252,-0.1689 0.5252,-0.3789 l 0,-13.242 c 0,-0.2101 -0.2352,-0.3789 -0.5252,-0.3789 l -4.7928,0 z m 0.687,1.1582 3.4211,0 0,3.2168 -3.4211,0 0,-3.2168 z m 0,4.2852 3.4211,0 0,3.2148 -3.4211,0 0,-3.2148 z m 0,4.2832 3.4211,0 0,3.2148 -3.4211,0 0,-3.2148 z M 4.0319,3.0001 q 0.264,0 0.4658,0.1915 l 0.3882,0.3882 q 0.1965,0.1966 0.1965,0.4709 0,0.2795 -0.1965,0.4658 l -1.5164,1.5217 3.6436,0 q 0.2691,0 0.4372,0.194 0.1683,0.1941 0.1683,0.4684 l 0,0.6625 q 0,0.2743 -0.1683,0.4684 -0.1681,0.1941 -0.4372,0.1941 l -3.6436,0 1.5164,1.5216 q 0.1965,0.1863 0.1965,0.4658 0,0.2795 -0.1965,0.4658 L 4.4977,10.867 q -0.1967,0.1966 -0.4658,0.1966 -0.2742,0 -0.471,-0.1966 L 0.1917,7.4977 Q 1e-4,7.3165 1e-4,7.0319 1e-4,6.7524 0.1917,6.5609 L 3.5609,3.1916 Q 3.7628,3.0001 4.0319,3.0001 Z"/></svg>',colAfter:'<svg viewBox="0 0 14 14"><path d="m 5.3165569,14.0019 c 0.2900213,0 0.5227581,-0.1688 0.5227581,-0.3789 l 0,-13.2422 c 0,-0.21 -0.2327368,-0.3789 -0.5227581,-0.3789 l -4.7914999,0 C 0.235136,0.0019 0,0.1708 0,0.3808 L 0,13.623 c 0,0.2101 0.235136,0.3789 0.525057,0.3789 l 4.7914999,0 z m -0.6868135,-1.1582 -3.4201714,0 0,-3.2168 3.4201714,0 0,3.2168 z m 0,-4.2852 -3.4201714,0 0,-3.2148 3.4201714,0 0,3.2148 z m 0,-4.2832 -3.4201714,0 0,-3.2148 3.4201714,0 0,3.2148 z m 5.3395506,6.7583 q -0.2639283,0 -0.4656736,-0.1915 L 9.1155258,10.4539 Q 8.9190791,10.2573 8.9190791,9.983 q 0,-0.2795 0.1964467,-0.4658 l 1.5159882,-1.5217 -3.642611,0 q -0.269027,0 -0.4370814,-0.194 Q 6.3835673,7.6074 6.3835673,7.3331 l 0,-0.6625 q 0,-0.2743 0.1682543,-0.4684 Q 6.719876,6.0081 6.988903,6.0081 l 3.642611,0 L 9.1155258,4.4865 Q 8.9190791,4.3002 8.9190791,4.0207 q 0,-0.2795 0.1964467,-0.4658 L 9.5036204,3.1667 Q 9.7002671,2.9701 9.969294,2.9701 q 0.274126,0 0.470872,0.1966 L 13.808452,6.536 Q 14,6.7172 14,7.0018 q 0,0.2795 -0.191548,0.471 l -3.368286,3.3693 q -0.201845,0.1915 -0.470872,0.1915 z"/></svg>',rowAbove:'<svg viewBox="0 0 14 14"><path d="m 13.9999,8.6819 c 0,-0.2901 -0.1688,-0.5229 -0.3789,-0.5229 l -13.242,0 c -0.21,0 -0.3789,0.2328 -0.3789,0.5229 l 0,4.7928 c 0,0.29 0.1689,0.5252 0.3789,0.5252 l 13.242,0 c 0.2101,0 0.3789,-0.2352 0.3789,-0.5252 l 0,-4.7928 z m -1.1582,0.687 0,3.4211 -3.2168,0 0,-3.4211 3.2168,0 z m -4.2852,0 0,3.4211 -3.2148,0 0,-3.4211 3.2148,0 z m -4.2832,0 0,3.4211 -3.2148,0 0,-3.4211 3.2148,0 z m 6.7266,-5.337 q 0,0.264 -0.1915,0.4658 l -0.3882,0.3882 q -0.1966,0.1965 -0.4709,0.1965 -0.2795,0 -0.4658,-0.1965 l -1.5217,-1.5164 0,3.6436 q 0,0.2691 -0.194,0.4372 -0.1941,0.1683 -0.4684,0.1683 l -0.6625,0 Q 6.3626,7.6186 6.1685,7.4503 5.9744,7.2822 5.9744,7.0131 l 0,-3.6436 -1.5216,1.5164 Q 4.2665,5.0824 3.987,5.0824 3.7075,5.0824 3.5212,4.8859 L 3.133,4.4977 Q 2.9364,4.301 2.9364,4.0319 q 0,-0.2742 0.1966,-0.471 L 6.5023,0.1917 Q 6.6835,1e-4 6.9681,1e-4 q 0.2795,0 0.471,0.1916 l 3.3693,3.3692 q 0.1915,0.2019 0.1915,0.471 z"/></svg>',rowRemove:'<svg viewBox="0 0 14 14"><path d="m 13.9999,8.68029 c 0,-0.29019 -0.1688,-0.52307 -0.3789,-0.52307 l -13.242,0 c -0.21,0 -0.3789,0.23288 -0.3789,0.52307 l 0,4.79434 C 1e-4,13.76472 0.169,14 0.379,14 l 13.242,0 c 0.2101,0 0.3789,-0.23528 0.3789,-0.52537 l 0,-4.79434 z m -1.1582,0.68722 0,3.4222 -3.2168,0 0,-3.4222 3.2168,0 z m -4.2852,0 0,3.4222 -3.2148,0 0,-3.4222 3.2148,0 z m -4.2832,0 0,3.4222 -3.2148,0 0,-3.4222 3.2148,0 z M 4.6999,7.59994 q -0.2558,0 -0.4348,-0.17911 L 3.3953,6.5508 Q 3.2162,6.37168 3.2162,6.11579 q 0,-0.2559 0.1791,-0.43501 L 5.2755,3.79997 3.3953,1.91917 Q 3.2162,1.74005 3.2162,1.48416 q 0,-0.2559 0.1791,-0.43501 L 4.2651,0.17912 Q 4.4441,0 4.6999,0 4.9557,0 5.1348,0.17912 L 7.015,2.05992 8.8952,0.17912 Q 9.0742,0 9.33,0 9.5858,0 9.7649,0.17912 l 0.8698,0.87003 q 0.179,0.17911 0.179,0.43501 0,0.25589 -0.179,0.43501 l -1.8802,1.8808 1.8802,1.88081 q 0.179,0.17911 0.179,0.43501 0,0.25589 -0.179,0.43501 L 9.7649,7.42083 Q 9.5858,7.59994 9.33,7.59994 q -0.2558,0 -0.4348,-0.17911 L 7.015,5.54002 5.1348,7.42083 Q 4.9557,7.59994 4.6999,7.59994 Z"/></svg>',colRemove:'<svg viewBox="0 0 14 14"><path d="m 5.31971,13.9999 c 0.29019,0 0.52307,-0.1688 0.52307,-0.3789 l 0,-13.242 C 5.84278,0.169 5.6099,1e-4 5.31971,1e-4 l -4.79434,0 C 0.23528,1e-4 0,0.169 0,0.379 l 0,13.242 c 0,0.2101 0.23528,0.3789 0.52537,0.3789 l 4.79434,0 z m -0.68722,-1.1582 -3.4222,0 0,-3.2168 3.4222,0 0,3.2168 z m 0,-4.2852 -3.4222,0 0,-3.2148 3.4222,0 0,3.2148 z m 0,-4.2832 -3.4222,0 0,-3.2148 3.4222,0 0,3.2148 z m 1.76757,0.4266 q 0,-0.2558 0.17911,-0.4348 L 7.4492,3.3953 q 0.17912,-0.1791 0.43501,-0.1791 0.2559,0 0.43501,0.1791 l 1.88081,1.8802 1.8808,-1.8802 q 0.17912,-0.1791 0.43501,-0.1791 0.2559,0 0.43501,0.1791 l 0.87003,0.8698 Q 14,4.4441 14,4.6999 14,4.9557 13.82088,5.1348 l -1.8808,1.8802 1.8808,1.8802 Q 14,9.0742 14,9.33 14,9.5858 13.82088,9.7649 l -0.87003,0.8698 q -0.17911,0.179 -0.43501,0.179 -0.25589,0 -0.43501,-0.179 l -1.8808,-1.8802 -1.88081,1.8802 q -0.17911,0.179 -0.43501,0.179 -0.25589,0 -0.43501,-0.179 L 6.57917,9.7649 Q 6.40006,9.5858 6.40006,9.33 q 0,-0.2558 0.17911,-0.4348 L 8.45998,7.015 6.57917,5.1348 Q 6.40006,4.9557 6.40006,4.6999 Z"/></svg>',indent:'<svg viewBox="0 0 448 512"><path d="M0 64C0 77.3 10.7 88 24 88H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24C10.7 40 0 50.7 0 64zM192 192c0 13.3 10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H216c-13.3 0-24 10.7-24 24zm24 104c-13.3 0-24 10.7-24 24s10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H216zM0 448c0 13.3 10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24c-13.3 0-24 10.7-24 24zM121 268.4c7.8-6.4 7.8-18.3 0-24.7L26.2 165.6C15.7 157 0 164.4 0 177.9V334.1c0 13.5 15.7 20.9 26.2 12.4L121 268.4z"/></svg>',outdent:'<svg viewBox="0 0 448 512"><path d="M0 64C0 50.7 10.7 40 24 40H424c13.3 0 24 10.7 24 24s-10.7 24-24 24H24C10.7 88 0 77.3 0 64zM192 192c0-13.3 10.7-24 24-24H424c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24zm24 104H424c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zM0 448c0-13.3 10.7-24 24-24H424c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24zM7 268.4C-.8 262-.8 250 7 243.6l94.8-78.1c10.4-8.6 26.2-1.2 26.2 12.4V334.1c0 13.5-15.7 20.9-26.2 12.4L7 268.4z"/></svg>',arrowsAlt:'<svg viewBox="0 0 448 512"><path d="M136 32c13.3 0 24 10.7 24 24s-10.7 24-24 24H48v88c0 13.3-10.7 24-24 24s-24-10.7-24-24V56C0 42.7 10.7 32 24 32H136zM0 344c0-13.3 10.7-24 24-24s24 10.7 24 24v88h88c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V344zM424 32c13.3 0 24 10.7 24 24V168c0 13.3-10.7 24-24 24s-24-10.7-24-24V80H312c-13.3 0-24-10.7-24-24s10.7-24 24-24H424zM400 344c0-13.3 10.7-24 24-24s24 10.7 24 24V456c0 13.3-10.7 24-24 24H312c-13.3 0-24-10.7-24-24s10.7-24 24-24h88V344z"/></svg>',bold:'<svg viewBox="0 0 384 512"><path d="M0 64C0 46.3 14.3 32 32 32H80 96 224c70.7 0 128 57.3 128 128c0 31.3-11.3 60.1-30 82.3c37.1 22.4 62 63.1 62 109.7c0 70.7-57.3 128-128 128H96 80 32c-17.7 0-32-14.3-32-32s14.3-32 32-32H48V256 96H32C14.3 96 0 81.7 0 64zM224 224c35.3 0 64-28.7 64-64s-28.7-64-64-64H112V224H224zM112 288V416H256c35.3 0 64-28.7 64-64s-28.7-64-64-64H224 112z"/></svg>',caret:"fa fa-caret-down",circle:'<svg viewBox="0 0 512 512"><path d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"/></svg>',close:'<svg viewBox="0 0 448 512"><path d="M41 39C31.6 29.7 16.4 29.7 7 39S-2.3 63.6 7 73l183 183L7 439c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l183-183L407 473c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-183-183L441 73c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-183 183L41 39z"/></svg>',code:'<svg viewBox="0 0 640 512"><path d="M399.1 1.1c-12.7-3.9-26.1 3.1-30 15.8l-144 464c-3.9 12.7 3.1 26.1 15.8 30s26.1-3.1 30-15.8l144-464c3.9-12.7-3.1-26.1-15.8-30zm71.4 118.5c-9.1 9.7-8.6 24.9 1.1 33.9L580.9 256 471.6 358.5c-9.7 9.1-10.2 24.3-1.1 33.9s24.3 10.2 33.9 1.1l128-120c4.8-4.5 7.6-10.9 7.6-17.5s-2.7-13-7.6-17.5l-128-120c-9.7-9.1-24.9-8.6-33.9 1.1zm-301 0c-9.1-9.7-24.3-10.2-33.9-1.1l-128 120C2.7 243 0 249.4 0 256s2.7 13 7.6 17.5l128 120c9.7 9.1 24.9 8.6 33.9-1.1s8.6-24.9-1.1-33.9L59.1 256 168.4 153.5c9.7-9.1 10.2-24.3 1.1-33.9z"/></svg>',inlineCode:'<svg viewBox="0 0 576 512"><path d="M6.3 72.2c-9-9.8-8.3-24.9 1.4-33.9s24.9-8.3 33.9 1.4l184 200c8.5 9.2 8.5 23.3 0 32.5l-184 200c-9 9.8-24.2 10.4-33.9 1.4s-10.4-24.2-1.4-33.9L175.4 256 6.3 72.2zM248 432H552c13.3 0 24 10.7 24 24s-10.7 24-24 24H248c-13.3 0-24-10.7-24-24s10.7-24 24-24z"/></svg>',eraser:'<svg viewBox="0 0 640 512"><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7l-281.9-221L396.4 80H521.3l-8.5 34.2c-3.2 12.9 4.6 25.9 17.5 29.1s25.9-4.6 29.1-17.5l11-44.1C576.6 56.5 557.5 32 531.5 32h-335c-18.4 0-34.4 12.5-38.8 30.3l-7.5 30.1L38.8 5.1zM191.5 124.8L202.7 80H346.5L308.1 216.2 191.5 124.8zm129 223.7l-40.8-32.1L248.9 425.5l-1.8 6.5H192c-13.3 0-24 10.7-24 24s10.7 24 24 24H352c13.3 0 24-10.7 24-24s-10.7-24-24-24H296.9l23.6-83.5z"/></svg>',paintbrush:"fa fa-paintbrush",font:'<svg viewBox="0 0 448 512"><path d="M246.2 46.9C242.5 37.9 233.8 32 224 32s-18.5 5.9-22.2 14.9L44.6 432H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H136c13.3 0 24-10.7 24-24s-10.7-24-24-24H96.5l32.7-80H318.9l32.7 80H312c-13.3 0-24 10.7-24 24s10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H403.4L246.2 46.9zM299.3 304H148.7L224 119.5 299.3 304z"/></svg>',frame:'<svg viewBox="0 0 512 512"><path d="M160 64v64H480V96c0-17.7-14.3-32-32-32H160zm-32 0H64C46.3 64 32 78.3 32 96v32h96V64zM32 160V416c0 17.7 14.3 32 32 32H448c17.7 0 32-14.3 32-32V160H144 32zM0 96C0 60.7 28.7 32 64 32H448c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96z"/></svg>',italic:'<svg viewBox="0 0 384 512"><path d="M128 56c0-13.3 10.7-24 24-24H360c13.3 0 24 10.7 24 24s-10.7 24-24 24H291.3L144.7 432H232c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24s10.7-24 24-24H92.7L239.3 80H152c-13.3 0-24-10.7-24-24z"/></svg>',link:'<svg viewBox="0 0 640 512"><path d="M580.3 267.2c56.2-56.2 56.2-147.3 0-203.5C526.8 10.2 440.9 7.3 383.9 57.2l-6.1 5.4c-10 8.7-11 23.9-2.3 33.9s23.9 11 33.9 2.3l6.1-5.4c38-33.2 95.2-31.3 130.9 4.4c37.4 37.4 37.4 98.1 0 135.6L433.1 346.6c-37.4 37.4-98.2 37.4-135.6 0c-35.7-35.7-37.6-92.9-4.4-130.9l4.7-5.4c8.7-10 7.7-25.1-2.3-33.9s-25.1-7.7-33.9 2.3l-4.7 5.4c-49.8 57-46.9 142.9 6.6 196.4c56.2 56.2 147.3 56.2 203.5 0L580.3 267.2zM59.7 244.8C3.5 301 3.5 392.1 59.7 448.2c53.6 53.6 139.5 56.4 196.5 6.5l6.1-5.4c10-8.7 11-23.9 2.3-33.9s-23.9-11-33.9-2.3l-6.1 5.4c-38 33.2-95.2 31.3-130.9-4.4c-37.4-37.4-37.4-98.1 0-135.6L207 165.4c37.4-37.4 98.1-37.4 135.6 0c35.7 35.7 37.6 92.9 4.4 130.9l-5.4 6.1c-8.7 10-7.7 25.1 2.3 33.9s25.1 7.7 33.9-2.3l5.4-6.1c49.9-57 47-142.9-6.5-196.5c-56.2-56.2-147.3-56.2-203.5 0L59.7 244.8z"/></svg>',unlink:'<svg viewBox="0 0 640 512"><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L489.3 358.2l91-91c56.2-56.2 56.2-147.3 0-203.5C526.8 10.2 440.9 7.3 383.9 57.2l-6.1 5.4c-10 8.7-11 23.9-2.3 33.9s23.9 11 33.9 2.3l6.1-5.4c38-33.2 95.2-31.3 130.9 4.4c37.4 37.4 37.4 98.1 0 135.6l-95.1 95.1-45.5-35.7c24.2-53.3 14.1-117.9-29.3-161.3c-52.1-52.1-134.4-55.9-190.8-11.2L38.8 5.1zm186.3 146c36.9-22.3 85.6-17.6 117.4 14.3c26 26 34 63.3 23.7 96.4L225.1 151.1zM352.6 373.8c-20.2-2.7-39.7-11.7-55.2-27.3c-9.8-9.8-17-21.2-21.7-33.3l-54.2-42.7c-2.2 39.6 11.9 79.9 41.9 109.9c38.8 38.8 94.2 50.8 143.4 36l-54.2-42.7zm-236-186L59.7 244.8C3.5 301 3.5 392.1 59.7 448.2c53.6 53.6 139.5 56.4 196.5 6.5l6.1-5.4c10-8.7 11-23.9 2.3-33.9s-23.9-11-33.9-2.3l-6.1 5.4c-38 33.2-95.2 31.3-130.9-4.4c-37.4-37.4-37.4-98.1 0-135.6l60.9-60.9-38-29.9z"/></svg>',magic:'<svg viewBox="0 0 576 512"><path d="M234.7 42.7L197 56.8c-3 1.1-5 4-5 7.2s2 6.1 5 7.2l37.7 14.1L248.8 123c1.1 3 4 5 7.2 5s6.1-2 7.2-5l14.1-37.7L315 71.2c3-1.1 5-4 5-7.2s-2-6.1-5-7.2L277.3 42.7 263.2 5c-1.1-3-4-5-7.2-5s-6.1 2-7.2 5L234.7 42.7zM461.4 48L496 82.6 386.2 192.3l-34.6-34.6L461.4 48zM80 429.4L317.7 191.7l34.6 34.6L114.6 464 80 429.4zM427.4 14.1L46.1 395.4c-18.7 18.7-18.7 49.1 0 67.9l34.6 34.6c18.7 18.7 49.1 18.7 67.9 0L529.9 116.5c18.7-18.7 18.7-49.1 0-67.9L495.3 14.1c-18.7-18.7-49.1-18.7-67.9 0zM7.5 117.2C3 118.9 0 123.2 0 128s3 9.1 7.5 10.8L64 160l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L128 160l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L128 96 106.8 39.5C105.1 35 100.8 32 96 32s-9.1 3-10.8 7.5L64 96 7.5 117.2zm352 256c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L416 416l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L480 416l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L480 352l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L416 352l-56.5 21.2z"/></svg>',paragraph:'<svg viewBox="0 0 448 512"><path d="M32 192c0-88.4 71.6-160 160-160h64H424c13.3 0 24 10.7 24 24s-10.7 24-24 24H384l0 376c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-376H288V456c0 13.3-10.7 24-24 24s-24-10.7-24-24V352H192c-88.4 0-160-71.6-160-160zM240 304V80H192C130.1 80 80 130.1 80 192s50.1 112 112 112h48z"/></svg>',menuCheck:"fa fa-check",minus:'<svg viewBox="0 0 448 512"><path d="M432 256c0 13.3-10.7 24-24 24L40 280c-13.3 0-24-10.7-24-24s10.7-24 24-24l368 0c13.3 0 24 10.7 24 24z"/></svg>',orderedlist:'<svg viewBox="0 0 512 512"><path d="M24 56c0-13.3 10.7-24 24-24H80c13.3 0 24 10.7 24 24V176h16c13.3 0 24 10.7 24 24s-10.7 24-24 24H40c-13.3 0-24-10.7-24-24s10.7-24 24-24H56V80H48C34.7 80 24 69.3 24 56zM86.7 341.2c-6.5-7.4-18.3-6.9-24 1.2L51.5 357.9c-7.7 10.8-22.7 13.3-33.5 5.6s-13.3-22.7-5.6-33.5l11.1-15.6c23.7-33.2 72.3-35.6 99.2-4.9c21.3 24.4 20.8 60.9-1.1 84.7L86.8 432H120c13.3 0 24 10.7 24 24s-10.7 24-24 24H32c-9.5 0-18.2-5.6-22-14.4s-2.1-18.9 4.3-25.9l72-78c5.3-5.8 5.4-14.6 .3-20.5zM216 72H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 160H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 160H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24z"/></svg>',pencil:'<svg viewBox="0 0 512 512"><path d="M36.4 360.9L13.4 439 1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1L73 498.6l78.1-23c10.4-3 20.1-8 28.6-14.5l.3 .2 .5-.8c1.4-1.1 2.7-2.2 4-3.3c1.4-1.2 2.7-2.5 4-3.8L492.7 149.3c21.9-21.9 24.6-55.6 8.2-80.5c-2.3-3.5-5.1-6.9-8.2-10L453.3 19.3c-25-25-65.5-25-90.5 0L58.6 323.5c-2.5 2.5-4.9 5.2-7.1 8l-.8 .5 .2 .3c-6.5 8.5-11.4 18.2-14.5 28.6zM383 191L197.4 376.6l-49.6-12.4-12.4-49.6L321 129 383 191zM97 358.9l7.7 31c2.1 8.6 8.9 15.3 17.5 17.5l31 7.7-7.4 11.2c-2.6 1.4-5.3 2.6-8.1 3.4l-23.4 6.9L59.4 452.6l16.1-54.8 6.9-23.4c.8-2.8 2-5.6 3.4-8.1L97 358.9zM315.3 218.7c6.2-6.2 6.2-16.4 0-22.6s-16.4-6.2-22.6 0l-96 96c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0l96-96z"/></svg>',picture:'<svg viewBox="0 0 512 512"><path d="M448 80c8.8 0 16 7.2 16 16V415.8l-5-6.5-136-176c-4.5-5.9-11.6-9.3-19-9.3s-14.4 3.4-19 9.3L202 340.7l-30.5-42.7C167 291.7 159.8 288 152 288s-15 3.7-19.5 10.1l-80 112L48 416.3l0-.3V96c0-8.8 7.2-16 16-16H448zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm80 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"/></svg>',question:'<svg viewBox="0 0 320 512"><path d="M64 160c0-44.2 35.8-80 80-80h32c44.2 0 80 35.8 80 80v4.6c0 24.1-12 46.6-32.1 59.9l-52.3 34.9C149.4 274.2 136 299.2 136 326v2c0 13.3 10.7 24 24 24s24-10.7 24-24v-2c0-10.7 5.3-20.7 14.2-26.6l52.3-34.9c33.4-22.3 53.4-59.7 53.4-99.8V160c0-70.7-57.3-128-128-128H144C73.3 32 16 89.3 16 160c0 13.3 10.7 24 24 24s24-10.7 24-24zm96 320a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"/></svg>',redo:'<svg viewBox="0 0 512 512"><path d="M472 224c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24s-24 10.7-24 24v80.1l-20-23.5C387 63.4 325.1 32 256 32C132.3 32 32 132.3 32 256s100.3 224 224 224c50.4 0 97-16.7 134.4-44.8c10.6-8 12.7-23 4.8-33.6s-23-12.7-33.6-4.8C332.2 418.9 295.7 432 256 432c-97.2 0-176-78.8-176-176s78.8-176 176-176c54.3 0 102.9 24.6 135.2 63.4l.1 .2 0 0L418.9 176H328c-13.3 0-24 10.7-24 24s10.7 24 24 24H472z"/></svg>',square:"far fa-square",strikethrough:'<svg viewBox="0 0 512 512"><path d="M145.5 138c4-21.5 17.9-37.4 41.7-47.4c24.7-10.4 59.4-13.7 99.9-7.5c12.8 2 52.4 9.5 64.9 12.8c12.8 3.3 25.9-4.3 29.3-17.2s-4.3-25.9-17.2-29.3c-14.7-3.8-56.1-11.7-69.7-13.8c-46.2-7.1-90.4-4.1-125.7 10.7c-36.1 15.1-63.3 43.1-70.5 83.9c-.1 .4-.1 .9-.2 1.3c-2.8 23.4 .5 44.2 9.8 62.2c9.2 17.8 23.2 31.2 38.8 41.5c2.4 1.6 5 3.2 7.5 4.7H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H488c13.3 0 24-10.7 24-24s-10.7-24-24-24H295.8c-9.9-3.1-19.7-6-29.2-8.8l-.3-.1c-37.7-11.1-70.5-20.7-93.3-35.8c-10.9-7.2-18.2-14.9-22.6-23.5c-4.2-8.2-6.6-18.9-4.9-33.8zM364 337.1c3.7 8.6 5.5 20.1 2.6 36.3c-3.8 21.8-17.8 37.9-41.8 48c-24.7 10.4-59.4 13.7-99.8 7.5c-20.1-3.2-54.3-14.6-81.2-23.6l0 0 0 0c-5.9-2-11.4-3.8-16.3-5.4c-12.6-4.1-26.1 2.8-30.3 15.4s2.8 26.2 15.4 30.3c4 1.3 8.8 2.9 14 4.7c26.6 8.9 66.4 22.2 90.9 26.2l.1 0c46.2 7.1 90.4 4.1 125.7-10.7c36.1-15.1 63.3-43.1 70.5-83.9c4-22.9 2.4-43.5-5-61.7H351.6c5.7 5.3 9.7 11 12.3 17.1z"/></svg>',subscript:'<svg viewBox="0 0 512 512"><path d="M24 64C10.7 64 0 74.7 0 88s10.7 24 24 24H51.2l96 144-96 144H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H64c8 0 15.5-4 20-10.7l92-138 92 138C272.5 444 280 448 288 448h40c13.3 0 24-10.7 24-24s-10.7-24-24-24H300.8l-96-144 96-144H328c13.3 0 24-10.7 24-24s-10.7-24-24-24H288c-8 0-15.5 4-20 10.7l-92 138L84 74.7C79.5 68 72 64 64 64H24zM472 312c0-8-3.9-15.4-10.5-19.9s-15-5.4-22.4-2.4l-40 16c-12.3 4.9-18.3 18.9-13.4 31.2s18.9 18.3 31.2 13.4l7.1-2.8V464H408c-13.3 0-24 10.7-24 24s10.7 24 24 24h40 40c13.3 0 24-10.7 24-24s-10.7-24-24-24H472V312z"/></svg>',superscript:'<svg viewBox="0 0 512 512"><path d="M472 24c0-8-3.9-15.4-10.5-19.9s-15-5.4-22.4-2.4l-40 16c-12.3 4.9-18.3 18.9-13.4 31.2s18.9 18.3 31.2 13.4l7.1-2.8V176H408c-13.3 0-24 10.7-24 24s10.7 24 24 24h40 40c13.3 0 24-10.7 24-24s-10.7-24-24-24H472V24zM24 64C10.7 64 0 74.7 0 88s10.7 24 24 24H51.2l96 144-96 144H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H64c8 0 15.5-4 20-10.7l92-138 92 138C272.5 444 280 448 288 448h40c13.3 0 24-10.7 24-24s-10.7-24-24-24H300.8l-96-144 96-144H328c13.3 0 24-10.7 24-24s-10.7-24-24-24H288c-8 0-15.5 4-20 10.7l-92 138L84 74.7C79.5 68 72 64 64 64H24z"/></svg>',table:'<svg viewBox="0 0 512 512"><path d="M48 264V160H232V264H48zm0 48H232V432H64c-8.8 0-16-7.2-16-16V312zM280 432V312H464V416c0 8.8-7.2 16-16 16H280zM464 264H280V160H464V264zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"/></svg>',textHeight:'<svg viewBox="0 0 576 512"><path d="M48 128V80h88l0 352H88c-13.3 0-24 10.7-24 24s10.7 24 24 24H232c13.3 0 24-10.7 24-24s-10.7-24-24-24H184l0-352h88v48c0 13.3 10.7 24 24 24s24-10.7 24-24V72c0-22.1-17.9-40-40-40H40C17.9 32 0 49.9 0 72v56c0 13.3 10.7 24 24 24s24-10.7 24-24zM497 39c-9.4-9.4-24.6-9.4-33.9 0l-64 64c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l23-23V398.1l-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23V113.9l23 23c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9L497 39z"/></svg>',trash:'<svg viewBox="0 0 448 512"><path d="M177.1 48h93.7c2.7 0 5.2 1.3 6.7 3.6l19 28.4h-145l19-28.4c1.5-2.2 4-3.6 6.7-3.6zM354.2 80L317.5 24.9C307.1 9.4 289.6 0 270.9 0H177.1c-18.7 0-36.2 9.4-46.6 24.9L93.8 80H80.1 32 24C10.7 80 0 90.7 0 104s10.7 24 24 24H35.6L59.6 452.7c2.5 33.4 30.3 59.3 63.8 59.3H324.6c33.5 0 61.3-25.9 63.8-59.3L412.4 128H424c13.3 0 24-10.7 24-24s-10.7-24-24-24h-8H367.9 354.2zm10.1 48L340.5 449.2c-.6 8.4-7.6 14.8-16 14.8H123.4c-8.4 0-15.3-6.5-16-14.8L83.7 128H364.3z"/></svg>',underline:'<svg viewBox="0 0 448 512"><path d="M16 56c0-13.3 10.7-24 24-24h96c13.3 0 24 10.7 24 24s-10.7 24-24 24H112V224c0 61.9 50.1 112 112 112s112-50.1 112-112V80H312c-13.3 0-24-10.7-24-24s10.7-24 24-24h96c13.3 0 24 10.7 24 24s-10.7 24-24 24H384V224c0 88.4-71.6 160-160 160s-160-71.6-160-160V80H40C26.7 80 16 69.3 16 56zM0 456c0-13.3 10.7-24 24-24H424c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24z"/></svg>',undo:'<svg viewBox="0 0 512 512"><path d="M40 224c-13.3 0-24-10.7-24-24V56c0-13.3 10.7-24 24-24s24 10.7 24 24v80.1l20-23.5C125 63.4 186.9 32 256 32c123.7 0 224 100.3 224 224s-100.3 224-224 224c-50.4 0-97-16.7-134.4-44.8c-10.6-8-12.7-23-4.8-33.6s23-12.7 33.6-4.8C179.8 418.9 216.3 432 256 432c97.2 0 176-78.8 176-176s-78.8-176-176-176c-54.3 0-102.9 24.6-135.2 63.4l-.1 .2 0 0L93.1 176H184c13.3 0 24 10.7 24 24s-10.7 24-24 24H40z"/></svg>',rollback:ls,unorderedlist:'<svg viewBox="0 0 512 512"><path d="M64 64a32 32 0 1 0 0 64 32 32 0 1 0 0-64zm120 8c-13.3 0-24 10.7-24 24s10.7 24 24 24H488c13.3 0 24-10.7 24-24s-10.7-24-24-24H184zm0 160c-13.3 0-24 10.7-24 24s10.7 24 24 24H488c13.3 0 24-10.7 24-24s-10.7-24-24-24H184zm0 160c-13.3 0-24 10.7-24 24s10.7 24 24 24H488c13.3 0 24-10.7 24-24s-10.7-24-24-24H184zM96 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM64 384a32 32 0 1 0 0 64 32 32 0 1 0 0-64z"/></svg>',video:'<svg viewBox="0 0 512 512"><path d="M48 416c0 8.8 7.2 16 16 16H448c8.8 0 16-7.2 16-16V208H48V416zM336 160h64l64-64c0-8.8-7.2-16-16-16H416l-80 80zm-96 0l80-80H256l-80 80h64zM80 160l80-80H96L48 128v32H80zM512 96v64 24 24V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V208 184 160 96C0 60.7 28.7 32 64 32H448c35.3 0 64 28.7 64 64zM216.5 241.9c5.2-2.8 11.5-2.5 16.4 .8l96 64c4.4 3 7.1 8 7.1 13.3s-2.7 10.3-7.1 13.3l-96 64c-4.9 3.3-11.2 3.6-16.4 .8s-8.5-8.2-8.5-14.1V256c0-5.9 3.2-11.3 8.5-14.1z"/></svg>',css:'<svg viewBox="0 0 512 512"><path d="M480 32l-64 368-223.3 80L0 400l19.6-94.8h82l-8 40.6L210 390.2l134.1-44.4 18.8-97.1H29.5l16-82h333.7l10.5-52.7H56.3l16.3-82H480z"/></svg>',ellipsis:'<svg viewBox="0 0 448 512"><path d="M432 256a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zm-160 0a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zM64 304a48 48 0 1 1 0-96 48 48 0 1 1 0 96z"/></svg>',spellCheck:'<svg viewBox="0 0 576 512"><path d="M134.1 14.6C130.4 5.8 121.6 0 112 0s-18.3 5.8-22.1 14.6l-88 208c-5.2 12.2 .5 26.3 12.8 31.5s26.3-.5 31.5-12.8L56.8 216H167.2l10.7 25.4c5.2 12.2 19.2 17.9 31.5 12.8s17.9-19.2 12.8-31.5l-88-208zM146.9 168H77.1L112 85.6 146.9 168zM256 24V128 232c0 13.3 10.7 24 24 24h92c42 0 76-34 76-76c0-24.6-11.7-46.4-29.8-60.3C426.9 107.3 432 92.2 432 76c0-42-34-76-76-76H280c-13.3 0-24 10.7-24 24zm100 80H304V48h52c15.5 0 28 12.5 28 28s-12.5 28-28 28zm-52 48h52 16c15.5 0 28 12.5 28 28s-12.5 28-28 28H304V152zM568.6 313.3c9.6-9.2 9.9-24.4 .7-33.9s-24.4-9.9-33.9-.7l-183 175.7L265 367c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9L335 505c9.2 9.2 24.2 9.4 33.6 .3l200-192z"/></svg>',gear:'<svg viewBox="0 0 512 512"><path d="M256 0c17 0 33.6 1.7 49.8 4.8c7.9 1.5 21.8 6.1 29.4 20.1c2 3.7 3.6 7.6 4.6 11.8l9.3 38.5C350.5 81 360.3 86.7 366 85l38-11.2c4-1.2 8.1-1.8 12.2-1.9c16.1-.5 27 9.4 32.3 15.4c22.1 25.1 39.1 54.6 49.9 86.3c2.6 7.6 5.6 21.8-2.7 35.4c-2.2 3.6-4.9 7-8 10L459 246.3c-4.2 4-4.2 15.5 0 19.5l28.7 27.3c3.1 3 5.8 6.4 8 10c8.2 13.6 5.2 27.8 2.7 35.4c-10.8 31.7-27.8 61.1-49.9 86.3c-5.3 6-16.3 15.9-32.3 15.4c-4.1-.1-8.2-.8-12.2-1.9L366 427c-5.7-1.7-15.5 4-16.9 9.8l-9.3 38.5c-1 4.2-2.6 8.2-4.6 11.8c-7.7 14-21.6 18.5-29.4 20.1C289.6 510.3 273 512 256 512s-33.6-1.7-49.8-4.8c-7.9-1.5-21.8-6.1-29.4-20.1c-2-3.7-3.6-7.6-4.6-11.8l-9.3-38.5c-1.4-5.8-11.2-11.5-16.9-9.8l-38 11.2c-4 1.2-8.1 1.8-12.2 1.9c-16.1 .5-27-9.4-32.3-15.4c-22-25.1-39.1-54.6-49.9-86.3c-2.6-7.6-5.6-21.8 2.7-35.4c2.2-3.6 4.9-7 8-10L53 265.7c4.2-4 4.2-15.5 0-19.5L24.2 218.9c-3.1-3-5.8-6.4-8-10C8 195.3 11 181.1 13.6 173.6c10.8-31.7 27.8-61.1 49.9-86.3c5.3-6 16.3-15.9 32.3-15.4c4.1 .1 8.2 .8 12.2 1.9L146 85c5.7 1.7 15.5-4 16.9-9.8l9.3-38.5c1-4.2 2.6-8.2 4.6-11.8c7.7-14 21.6-18.5 29.4-20.1C222.4 1.7 239 0 256 0zM218.1 51.4l-8.5 35.1c-7.8 32.3-45.3 53.9-77.2 44.6L97.9 120.9c-16.5 19.3-29.5 41.7-38 65.7l26.2 24.9c24 22.8 24 66.2 0 89L59.9 325.4c8.5 24 21.5 46.4 38 65.7l34.6-10.2c31.8-9.4 69.4 12.3 77.2 44.6l8.5 35.1c24.6 4.5 51.3 4.5 75.9 0l8.5-35.1c7.8-32.3 45.3-53.9 77.2-44.6l34.6 10.2c16.5-19.3 29.5-41.7 38-65.7l-26.2-24.9c-24-22.8-24-66.2 0-89l26.2-24.9c-8.5-24-21.5-46.4-38-65.7l-34.6 10.2c-31.8 9.4-69.4-12.3-77.2-44.6l-8.5-35.1c-24.6-4.5-51.3-4.5-75.9 0zM208 256a48 48 0 1 0 96 0 48 48 0 1 0 -96 0zm48 96a96 96 0 1 1 0-192 96 96 0 1 1 0 192z"/></svg>',fill:'<svg  viewBox="0 0 576 512"><path d="M39 7C48.4-2.3 63.6-2.3 73 7l89.4 89.4 58.7-58.7c28.1-28.1 73.7-28.1 101.8 0L474.3 189.1c28.1 28.1 28.1 73.7 0 101.8L283.9 481.4c-37.5 37.5-98.3 37.5-135.8 0L30.6 363.9c-37.5-37.5-37.5-98.3 0-135.8l97.8-97.8L39 41C29.7 31.6 29.7 16.4 39 7zM231 233l-68.7-68.7L64.6 262.1c-7.3 7.3-11.8 16.4-13.4 25.9H409.4l31-31c9.4-9.4 9.4-24.6 0-33.9L289 71.6c-9.4-9.4-24.6-9.4-33.9 0l-58.7 58.7L265 199c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0zM512 512c-35.3 0-64-28.7-64-64c0-25.2 32.6-79.6 51.2-108.7c6-9.4 19.5-9.4 25.5 0C543.4 368.4 576 422.8 576 448c0 35.3-28.7 64-64 64z"/></svg>',face:'<svg viewBox="0 0 512 512"><path d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm177.6 62.1C192.8 334.5 218.8 352 256 352s63.2-17.5 78.4-33.9c9-9.7 24.2-10.4 33.9-1.4s10.4 24.2 1.4 33.9c-22 23.8-60 49.4-113.6 49.4s-91.7-25.5-113.6-49.4c-9-9.7-8.4-24.9 1.4-33.9s24.9-8.4 33.9 1.4zM144.4 208a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm192-32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg>',omega:'<svg viewBox="0 0 448 512"><path d="M224 80C126.8 80 48 158.8 48 256c0 63.7 33.8 119.5 84.6 150.4c11.4 7 19.4 19.6 19.4 34.2c0 21.8-17.6 39.4-39.4 39.4H24c-13.3 0-24-10.7-24-24s10.7-24 24-24H85.4C33.4 391 0 327.4 0 256C0 132.3 100.3 32 224 32s224 100.3 224 224c0 71.4-33.4 135-85.4 176H424c13.3 0 24 10.7 24 24s-10.7 24-24 24H335.4c-21.8 0-39.4-17.6-39.4-39.4c0-14.6 8-27.2 19.4-34.2C366.2 375.5 400 319.7 400 256c0-97.2-78.8-176-176-176z"/></svg>',layout:'<svg  viewBox="0 0 448 512"><path d="M48 80V240h96V80H48zM0 80C0 53.5 21.5 32 48 32h96c26.5 0 48 21.5 48 48V240c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80zM304 272V432h96V272H304zm-48 0c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H304c-26.5 0-48-21.5-48-48V272zM144 368H48v64h96V368zM48 320h96c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V368c0-26.5 21.5-48 48-48zM304 80v64h96V80H304zm-48 0c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48H304c-26.5 0-48-21.5-48-48V80z"/></svg>',smiley:'<svg viewBox="0 0 512 512"><path d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm177.6 62.1C192.8 334.5 218.8 352 256 352s63.2-17.5 78.4-33.9c9-9.7 24.2-10.4 33.9-1.4s10.4 24.2 1.4 33.9c-22 23.8-60 49.4-113.6 49.4s-91.7-25.5-113.6-49.4c-9-9.7-8.4-24.9 1.4-33.9s24.9-8.4 33.9 1.4zM144.4 208a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm192-32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg>',disk:'<svg viewBox="0 0 448 512" style="width: 18px; height: 18px;"><path class="note-duotone-secondary" d="M48 96l0 320c0 8.8 7.2 16 16 16l320 0c8.8 0 16-7.2 16-16l0-245.5c0-4.2-1.7-8.3-4.7-11.3L320.8 84.7c-.3-.3-.5-.5-.8-.8L320 184c0 13.3-10.7 24-24 24l-192 0c-13.3 0-24-10.7-24-24L80 80 64 80c-8.8 0-16 7.2-16 16zM288 320a64 64 0 1 1 -128 0 64 64 0 1 1 128 0z"/><path class="note-duotone-primary" d="M48 96l0 320c0 8.8 7.2 16 16 16l320 0c8.8 0 16-7.2 16-16l0-245.5c0-4.2-1.7-8.3-4.7-11.3l33.9-33.9c12 12 18.7 28.3 18.7 45.3L448 416c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32l245.5 0c17 0 33.3 6.7 45.3 18.7l74.5 74.5-33.9 33.9L320.8 84.7c-.3-.3-.5-.5-.8-.8L320 184c0 13.3-10.7 24-24 24l-192 0c-13.3 0-24-10.7-24-24L80 80 64 80c-8.8 0-16 7.2-16 16zm80-16l0 80 144 0 0-80L128 80zm32 240a64 64 0 1 1 128 0 64 64 0 1 1 -128 0z"/></svg>'},cs=" ",ds="\uFEFF",Hr="­",it={UNKNOWN:-1,SPACE:0,PUNC:1,CHAR:2},hs=s=>{!l.isVoid(s)&&!l.nodeLength(s)&&(s.innerHTML=l.blank)},It=s=>s.offset===0,St=s=>s.offset===l.nodeLength(s.node),us=s=>It(s)||St(s),ps=(s,t)=>It(s)&&l.isLeftEdgeOf(s.node,t),fs=(s,t)=>St(s)&&l.isRightEdgeOf(s.node,t),Rr=s=>({node:s.parentNode,offset:l.position(s)}),Lr=s=>({node:s.parentNode,offset:l.position(s)+1}),oe=(s,t)=>{let e,i;if(s.offset===0){if(l.isEditableRoot(s.node))return null;e=s.node.parentNode,i=l.position(s.node)}else l.hasChildren(s.node)?(e=s.node.childNodes[s.offset-1],i=l.nodeLength(e)):(e=s.node,i=t?0:s.offset-1);return{node:e,offset:i}},ie=(s,t)=>{let e,i;if(s.offset===l.nodeLength(s.node)){if(l.isEditableRoot(s.node))return null;let n=l.getNextTextNode(s.node);n?(e=n,i=0):(e=s.node.parentNode,i=l.position(s.node)+1)}else l.hasChildren(s.node)?(e=s.node.childNodes[s.offset],i=0):(e=s.node,i=t?l.nodeLength(s.node):s.offset+1);return{node:e,offset:i}},ms=(s,t)=>{let e,i=0;if(s.offset===l.nodeLength(s.node)){if(l.isEditableRoot(s.node))return null;e=s.node.parentNode,i=l.position(s.node)+1,l.isEditableRoot(e)&&(e=s.node.nextSibling,i=0)}else l.hasChildren(s.node)?(e=s.node.childNodes[s.offset],i=0):(e=s.node,i=t?l.nodeLength(s.node):s.offset+1);return{node:e,offset:i}},gs=(s,t,e)=>{for(;s;){if(t(s))return s;s=e?ie(s):oe(s)}return null},bs=(s,t,e)=>{let i=s;for(;s;){if(!t(s))return i;i=s,s=e?ie(s):oe(s)}return null},Ar=(s,t)=>gs(s,t,!1),zr=(s,t)=>gs(s,t,!0),Pr=(s,t)=>bs(s,t,!1),Mr=(s,t)=>bs(s,t,!0),Br=(s,t,e,i)=>{let n=s;for(;n&&n.node&&(e(n),!Cs(n,t));){const r=i&&s.node!==n.node&&t.node!==n.node;n=ms(n,r)}},Ir=(s,t)=>{const e=s.node,i=s.offset,n=t.node,r=t.offset;let a,c,d,h,u;if(e==n)return i===r?0:i<r?-1:1;if(a=l.closest(n,e))return i<=l.position(a)?-1:1;if(a=l.closest(e,n))return l.position(a)<r?-1:1;if(c=getCommonAncestor(e,n),!c)throw new Error("comparePoints error: nodes have no common ancestor");if(d=e===c?c:l.closest(e,c),h=n===c?c:l.closest(n,c),d===h)throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(u=c.firstChild;u;){if(u===d)return-1;if(u===h)return 1;u=u.nextSibling}},ne=(s,t)=>{let e=t&&t.skipPaddingBlankHTML;const i=t&&t.skipEdgePoint,n=t&&t.discardEmptySplits;if(n&&(e=!0),us(s)&&(l.isText(s.node)||i)){if(It(s))return s.node;if(St(s))return s.node.nextSibling}if(l.isText(s.node))return s.node.splitText(s.offset);{const r=s.node.childNodes[s.offset];let a=l.nextSiblings(r),c=s.node;l.isPurePara(s.node)&&l.isLi(s.node.parentElement)&&(c=s.node.parentElement);const d=l.insertAfter(c,c.cloneNode(!1));return l.appendChildNodes(d,a),e||(hs(s.node),hs(d)),n&&(l.isEmpty(s.node)&&l.remove(s.node),l.isEmpty(d))?(l.remove(d),s.node.nextSibling):d}},vs=(s,t,e)=>{const i=l.matchSelector(s);let n=l.parents(t.node,i);if(n.length){if(n.length===1)return ne(t,e)}else return null;if(n.length>2){let a=n.slice(0,n.length-1).find(c=>c.nextSibling);if(a&&t.offset!=0&&St(t)){let c=a.nextSibling,d;l.isElement(c)?(d=c.childNodes[0],n=l.parents(d,i),t={node:d,offset:0}):l.isText(c)&&!c.data.match(/[\n\r]/g)&&(d=c,n=l.parents(d,i),t={node:d,offset:0})}}return n.reduce((r,a)=>(r===t.node&&(r=ne(t,e)),ne({node:a,offset:r?l.position(r):l.nodeLength(a)},e)))},Dr=(s,t)=>{const e=t?l.isPara:l.isBodyContainer,i=l.parents(s.node,e),n=p.last(i)||s.node;let r,a;e(n)?(r=i[i.length-2],a=n):(r=n,a=r.parentNode);let c=r&&vs(r,s,{skipPaddingBlankHTML:t,skipEdgePoint:t});return!c&&a===s.node&&(c=s.node.childNodes[s.offset]),{rightNode:c,container:a}},Cs=(s,t)=>s.node===t.node&&s.offset===t.offset,Or=s=>{if(l.isText(s.node)||!l.hasChildren(s.node)||l.isEmpty(s.node))return!0;const t=s.node.childNodes[s.offset-1],e=s.node.childNodes[s.offset];return!!((!t||l.isVoid(t))&&(!e||l.isVoid(e))||l.isTable(e))},re=s=>{if(!l.isText(s.node))return it.UNKNOWN;const t=s.node.nodeValue.charAt(s.offset-1);return t?t===cs||` \f
\r	\v`.indexOf(t)!==-1?it.SPACE:t==="_"?it.CHAR:new RegExp("^\\p{P}$","u").test(t)?it.PUNC:it.CHAR:it.UNKNOWN},ys=s=>re(s)==it.CHAR,ks=s=>re(s)==it.SPACE,C={NBSP_CHAR:cs,ZERO_WIDTH_NBSP_CHAR:ds,SOFT_HYPHEN:Hr,CharTypes:it,isLeftEdgePoint:It,isRightEdgePoint:St,isEdgePoint:us,isLeftEdgePointOf:ps,isRightEdgePointOf:fs,isLeftEdgePointOf:ps,isRightEdgePointOf:fs,prevPoint:oe,nextPoint:ie,pointBeforeNode:Rr,pointAfterNode:Lr,nextPointWithEmptyNode:ms,comparePoints:Ir,equals:Cs,isVisiblePoint:Or,prevPointUntil:Ar,nextPointUntil:zr,prevPointWhile:Pr,nextPointWhile:Mr,isCharPoint:ys,isSpacePoint:ks,walkPoint:Br,splitTree:vs,splitPoint:Dr,getCharType:re,isCharPoint:ys,isSpacePoint:ks,isZwsp:s=>s===ds,removeZwsp:s=>s.replace(/\uFEFF/g,"")},bt=(s,t)=>{const e=l.matchSelector(s);return function(){const i=l.closest(this.sc,e,!0,t);return!!i&&i===l.closest(this.ec,e,!0,t)}},ws=s=>s===!0?t=>[-1,0,1].indexOf(C.getCharType(t))>-1:t=>[-1,0].indexOf(C.getCharType(t))>-1,Fr=s=>{try{s.detach()}catch{}},X=(s,t)=>{let e=!1;s.isWrapper&&(s=Dt(s),e=!0);const i=t(s);return e&&Fr(s),i},Dt=s=>{if(s.isWrapper){const{sc:t,so:e,ec:i,eo:n}=s;s=document.createRange(),s.setStart(t,e),s.setEnd(i,n)}return s},jr=s=>s.isWrapper?s:ae(s),Ur=(s,t)=>l.isChildOf(s.startContainer,t,!0)&&(s.endContainer==s.startContainer||l.isChildOf(s.endContainer,t,!0)),Vr=bt(l.isEditableRoot,"div.note-editing-area"),_r=bt(l.isList),qr=bt(l.isAnchor),Wr=bt(l.isCell),Kr=bt(l.isData),Gr=bt(l.isDL),ae=s=>{const t=s;return new O(t.startContainer,t.startOffset,t.endContainer,t.endOffset)};function le(s,t,e,i){const n=arguments.length;if(n===2||n===4)return n===2&&(e=s,i=t),new O(s,t,e,i);let r=xs();if(!r&&n===1){let a=arguments[0];return l.isEditableRoot(s)&&(a=a.lastChild),$s(a,l.emptyPara===arguments[0].innerHTML)}return r}const ce=(s,t)=>t?new O(s.node,s.offset,t.node,t.offset):new O(s.node,s.offset),xs=()=>{const s=window.getSelection?window.getSelection():window.document.selection;return!s||s.rangeCount===0||l.isBody(s.anchorNode)?null:ae(s.getRangeAt(0))},$s=(s,t=!1)=>{var e=Ot(s);return e.collapse(t)},Ot=s=>{let t=s,e=0,i=s,n=l.nodeLength(i);return l.isVoid(t)&&(e=l.prevSiblings(t).length-1,t=t.parentNode),l.isBR(i)?(n=l.prevSiblings(i).length-1,i=i.parentNode):l.isVoid(i)&&(n=l.prevSiblings(i).length,i=i.parentNode),new O(t,e,i,n)},Ss=s=>Ot(s).collapse(!0),Es=s=>Ot(s).collapse(!1),Zr=s=>{const e=Ss(p.head(s)).getStartPoint(),n=Es(p.last(s)).getEndPoint();return le(e.node,e.offset,n.node,n.offset)},Qr=(s,t)=>{const e=l.fromOffsetPath(s,t.s.path),i=t.s.offset,n=l.fromOffsetPath(s,t.e.path),r=t.e.offset;return new O(e,i,n,r)},Jr=(s,t)=>{const e=s.s.offset,i=s.e.offset,n=l.fromOffsetPath(p.head(t),s.s.path),r=l.fromOffsetPath(p.last(t),s.e.path);return new O(n,e,r,i)};class O{constructor(t,e,i,n){this.isWrapper=!0,this.startContainer=t,this.startOffset=e,this.endContainer=i,this.endOffset=n,this.collapsed=t===i&&e===n,this.isOnEditable=Vr,this.isOnList=_r,this.isOnAnchor=qr,this.isOnCell=Wr,this.isOnData=Kr,this.isOnDL=Gr}updateStart(t,e){t!=this.startContainer&&(this._commonParent=void 0),this.startContainer=t,this.startOffset=e,this.collapsed=t===this.endContainer&&e===this.endOffset}updateEnd(t,e){t!=this.endContainer&&(this._commonParent=void 0),this.endContainer=t,this.endOffset=e,this.collapsed=t===this.startContainer&&e===this.startOffset}getNativeRange(){return Dt(this)}equals(t){if(t==this)return!0;if(t instanceof O||t instanceof Range){const{startContainer:e,startOffset:i,endContainer:n,endOffset:r}=t;return this.startContainer===e&&this.startOffset===i&&this.endContainer===n&&this.endOffset===r}return!1}startEquals(t){return t==this?!0:t instanceof O||t instanceof Range?this.startContainer===t.startContainer&&this.startOffset===t.startOffset:!1}endEquals(t){return t==this?!0:t instanceof O||t instanceof Range?this.endContainer===t.endContainer&&this.endOffset===t.endOffset:!1}get sc(){return this.startContainer}get so(){return this.startOffset}set so(t){return this.updateStart(this.startContainer,t)}get ec(){return this.endContainer}get eo(){return this.endOffset}set eo(t){return this.updateEnd(this.endContainer,t)}isCollapsed(){return this.collapsed}get commonAncestorContainer(){return this._commonParent||(this._commonParent=this.collapsed?this.startContainer:l.commonParent(this.startContainer,this.endContainer)),this._commonParent}cloneContents(){return X(this,t=>t.cloneContents())}cloneRange(){return new O(this.startContainer,this.startOffset,this.endContainer,this.endOffset)}collapse(t){const e=t?this.startContainer:this.endContainer,i=t?this.startOffset:this.endOffset;return this.updateStart(e,i),this.updateEnd(e,i),this}compareBoundaryPoints(t,e){var i,n,r,a,c=t==Range.END_TO_START||t==Range.START_TO_START?"start":"end",d=t==Range.START_TO_END||t==Range.START_TO_START?"start":"end";return i=this[c+"Container"],n=this[c+"Offset"],r=e[d+"Container"],a=e[d+"Offset"],C.comparePoints({node:i,offset:n},{node:r,offset:a})}compareNode(t){return X(this,e=>e.compareNode(t))}comparePoint(t,e){return X(this,i=>i.comparePoint(t,e))}createContextualFragment(t){return X(this,e=>e.createContextualFragment(t))}deleteContents(){if(this.collapsed)return this;const t=this.splitText(),e=t.nodes(null,{fullyContains:!0}),i=C.prevPointUntil(t.getStartPoint(),r=>!p.contains(e,r.node)),n=[];return p.each(e,r=>{const a=r.parentNode;i.node!==a&&l.nodeLength(a)===1&&n.push(a),l.remove(r,!1)}),p.each(n,r=>{l.remove(r,!1)}),new O(i.node,i.offset,i.node,i.offset).normalize()}detach(){return this}extractContents(){return X(this,t=>t.extractContents())}getBoundingClientRect(){return X(this,t=>t.getBoundingClientRect())}getClientRects(){return X(this,t=>t.getClientRects())}insertNode(t,e=!1){let i=this;l.isInlineOrText(t)&&(i=this.wrapBodyInlineWithPara().deleteContents());const n=C.splitPoint(i.getStartPoint(),!l.isBlock(t));return n.rightNode?(n.rightNode.parentNode.insertBefore(t,n.rightNode),l.isEmpty(n.rightNode)&&(e||l.isPara(t))&&n.rightNode.parentNode.removeChild(n.rightNode)):n.container&&n.container.appendChild(t),t}intersectsNode(t){return X(this,e=>e.intersectsNode(t))}isPointInRange(t,e){return X(this,i=>i.isPointInRange(t,e))}selectNode(t){const e=C.pointBeforeNode(t),i=C.pointAfterNode(t);return this.updateStart(e.node,e.offset),this.updateEnd(i.node,i.offset),this}selectNodeContents(t){return this.updateStart(t,0),this.updateEnd(t,l.nodeLength(t)),this}setEnd(t,e){return this.updateEnd(t,e),this}setEndAfter(t){const e=C.pointAfterNode(t);return this.updateEnd(e.node,e.offset),this}setEndBefore(t){const e=C.pointBeforeNode(t);return this.updateEnd(e.node,e.offset),this}setStart(t,e){return this.updateStart(t,e),this}setStartAfter(t){const e=C.pointAfterNode(t);return this.updateStart(e.node,e.offset),this}setStartBefore(t){const e=C.pointBeforeNode(t);return this.updateStart(e.node,e.offset),this}surroundContents(t){return X(this,e=>{e.surroundContents(t),this.updateStart(e.startContainer,e.startOffset),this.updateEnd(e.endContainer,e.endOffset)}),this}toString(){return X(this,t=>t.toString())}getPoints(){return{sc:this.startContainer,so:this.startOffset,ec:this.endContainer,eo:this.endOffset}}getStartPoint(){return{node:this.startContainer,offset:this.startOffset}}getEndPoint(){return{node:this.endContainer,offset:this.endOffset}}walk(t,e){const i=this.startOffset,n=e?l.getRangeNode(this.startContainer,i):this.startContainer,r=this.endOffset,a=e?l.getRangeNode(this.endContainer,r-1):this.endContainer,c=w=>{let b=w[0];l.isText(b)&&b===n&&i>=b.data.length&&w.splice(0,1);let v=w[w.length-1];return r===0&&w.length>0&&v===a&&l.isText(v)&&w.splice(w.length-1,1),w=p.reject(w,N=>l.isWhiteSpace(N)&&(l.isElement(N.previousSibling)||l.isElement(N.nextSibling))),w},d=(w,b="nextSibling"|"previousSibling",v)=>{const N=[];for(;w&&w!==v;w=w[b])N.push(w);return N},h=(w,b)=>l.closest(w,v=>v.parentNode===b),u=w=>{w&&w.length&&t(w)},f=(w,b,v)=>{const N=v?"nextSibling":"previousSibling";for(let T=w,J=T.parentNode;T&&T!==b;T=J){J=T.parentNode;const F=d(T===w?T:T[N],N);F.length&&(v||F.reverse(),u(c(F)))}};if(n===a)return u(c([n]));const m=l.commonParent(n,a)||l.getEditableRoot(n);if(l.isChildOf(n,a))return f(n,m,!0);if(l.isChildOf(a,n))return f(a,m);const g=h(n,m)||n,x=h(a,m)||a;f(n,g,!0);const z=d(g===n?g:g.nextSibling,"nextSibling",x===a?x.nextSibling:x);z.length&&u(c(z)),f(a,x)}scrollIntoView(t){const e=$(t).height();return t.scrollTop+e<this.startContainer.offsetTop&&(t.scrollTop+=Math.abs(t.scrollTop+e-this.startContainer.offsetTop)),this}normalize(){const t=function(n,r){if(!n||C.isVisiblePoint(n)&&(!C.isEdgePoint(n)||C.isRightEdgePoint(n)&&!r||C.isLeftEdgePoint(n)&&r||C.isRightEdgePoint(n)&&r&&l.isVoid(n.node.nextSibling)||C.isLeftEdgePoint(n)&&!r&&l.isVoid(n.node.previousSibling)||l.isBlock(n.node)&&l.isEmpty(n.node)))return n;const a=l.closest(n.node,l.isBlock);let c=!1;if(!c){const u=C.prevPoint(n)||{node:null};c=(C.isLeftEdgePointOf(n,a)||l.isVoid(u.node))&&!r}let d=!1;if(!d){const u=C.nextPoint(n)||{node:null};d=(C.isRightEdgePointOf(n,a)||l.isVoid(u.node))&&r}if(c||d){if(C.isVisiblePoint(n))return n;r=!r}return(r?C.nextPointUntil(C.nextPoint(n),C.isVisiblePoint):C.prevPointUntil(C.prevPoint(n),C.isVisiblePoint))||n},e=t(this.getEndPoint(),!1),i=this.collapsed?e:t(this.getStartPoint(),!0);return new O(i.node,i.offset,e.node,e.offset)}nodes(t,e){const i=l.matchSelector(t,y.ok),n=e&&e.includeAncestor,r=e&&e.fullyContains,a=this.getStartPoint(),c=this.getEndPoint(),d=[],h=[];return C.walkPoint(a,c,u=>{if(l.isEditableRoot(u.node))return;let f;r?(C.isLeftEdgePoint(u)&&h.push(u.node),C.isRightEdgePoint(u)&&p.contains(h,u.node)&&(f=u.node)):n?f=l.closest(u.node,i):f=u.node,f&&i(f)&&d.push(f)},!0),p.unique(d)}expand(t){const e=l.matchSelector(t),i=l.closest(this.startContainer,e),n=l.closest(this.endContainer,e);if(!i&&!n)return this;const r=this.getPoints();return i&&(r.sc=i,r.so=0),n&&(r.ec=n,r.eo=l.nodeLength(n)),this.setStart(r.sc,r.so),this.setEnd(r.ec,r.eo),this}splitText(){const t=this.sc===this.ec,e=this.getPoints();return l.isText(this.ec)&&!C.isEdgePoint(this.getEndPoint())&&this.ec.splitText(this.eo),l.isText(this.sc)&&!C.isEdgePoint(this.getStartPoint())&&(e.sc=this.sc.splitText(this.so),e.so=0,t&&(e.ec=e.sc,e.eo=this.eo-this.so)),this.setStart(e.sc,e.so),this.setEnd(e.ec,e.eo),this}isLeftEdgeOf(t){if(!C.isLeftEdgePoint(this.getStartPoint()))return!1;const e=l.closest(this.sc,t);return e&&l.isLeftEdgeOf(this.sc,e)}isSingleContainer(){return this.startContainer===this.endContainer}wrapBodyInlineWithPara(){if(l.isBodyContainer(this.sc)&&l.isEmpty(this.sc))return this.sc.innerHTML=l.emptyPara,le(this.sc.firstChild,0,this.sc.firstChild,0);const t=this.normalize();if(l.isParaInlineNoBlockQuote(this.sc)||l.isParaNoBlockquote(this.sc))return t;let e;if(l.isBlock(t.sc))e=t.sc.childNodes[t.so>0?t.so-1:0];else{const i=l.parents(t.sc,l.isBlock);e=p.last(i),l.isBlock(e)&&(e=i[i.length-2]||t.sc.childNodes[t.so])}if(e){let i=l.prevSiblings(e,l.isParaInlineNoBlockQuote).reverse();if(i=i.concat(l.nextSiblings(e.nextSibling,l.isParaInlineNoBlockQuote)),i.length){const n=l.wrap(p.head(i),"p");l.appendChildNodes(n,p.tail(i))}}return this.normalize()}pasteHTML(t){t=((t||"")+"").trim(t);const e=l.create("div",null,t),i=e.getElementsByTagName("*");for(let c=0;c<i.length;c++){let d=i[c];d.hasAttribute("style")&&d.removeAttribute("style");let h=d.attributes;for(let u=h.length-1;u>=0;u--)(h[u].name.startsWith("data-")||h[u].name.startsWith("on"))&&d.removeAttribute(h[u].name)}let n=p.from(e.childNodes);const r=this;let a=!1;return r.so>=0&&(n=n.reverse(),a=!0),n=n.map(function(c){return r.insertNode(c,!l.isInline(c))}),a&&(n=n.reverse()),n}pasteText(t){const e=Dt(this);e.deleteContents();const i=document.createTextNode(t);e.insertNode(i);const n=i.length;return l.isText(e.startContainer)&&e.startContainer.parentNode.normalize(),this.startContainer=i,this.startOffset=n,this.endContainer=i,this.endOffset=n,this.collapsed=!0,this}findWordEndpoint(t,e,i){const n=t?this.getStartPoint():this.getEndPoint(),r=ws(e);if(r(n))return n;let a=t?C.prevPointUntil(n,r):C.nextPointUntil(n,r);if(!t&&i&&!C.equals(n,a)){const c=C.getCharType(a);(c<1||!e||c===1)&&(a=C.prevPoint(a))}return a}getWordRange(t){const e=E.isBoolean(t)?t:(t==null?void 0:t.forward)===!0,i=(t==null?void 0:t.trim)===!0,n=(t==null?void 0:t.stopAtPunc)===!0,r=ws(n);let a=this.getEndPoint();if(r(a))return this;const c=this.findWordEndpoint(!0,n,i);return e&&(a=this.findWordEndpoint(!1,n,i)),new O(c.node,c.offset,a.node,a.offset)}getWordsRange(t){var e=this.getEndPoint();const i=r=>C.getCharType(r)===-1;if(i(e))return this;const n=C.prevPointUntil(e,i);return t&&(e=C.nextPointUntil(e,i)),new O(n.node,n.offset,e.node,e.offset)}getWordsMatchRange(t){const e=this.getEndPoint(),i=C.prevPointUntil(e,c=>{if(C.getCharType(c)===-1)return!0;const d=ce(c,e),h=t.exec(d.toString());return h&&h.index===0}),n=ce(i,e),r=n.toString(),a=t.exec(r);return a&&a[0].length===r.length?n:null}createBookmark(t){return{s:{path:l.makeOffsetPath(t,this.sc),offset:this.so},e:{path:l.makeOffsetPath(t,this.ec),offset:this.eo}}}createParaBookmark(t){return{s:{path:p.tail(l.makeOffsetPath(p.head(t),this.sc)),offset:this.so},e:{path:p.tail(l.makeOffsetPath(p.last(t),this.ec)),offset:this.eo}}}createFakeSelection(){const t=this.normalize().splitText(),e=t.nodes(l.isNonEmptyText);let i,n,r=1;return p.each(e,a=>{var c=l.wrap(a,"SPAN");c.classList.add("note-marker"),c.classList.add("note-selection"),r==1&&(i=c),r==e.length&&(n=c),r++}),i&&(t.setStartBefore(i),t.setEndAfter(n||i)),t}}const S={create:le,createFromBodyElement:$s,createFromSelection:xs,createFromNode:Ot,createFromNodeBefore:Ss,createFromNodeAfter:Es,createFromNodes:Zr,createFromBookmark:Qr,createFromParaBookmark:Jr,createFromNativeRange:ae,createFromPoints:ce,getWrappedRange:jr,getNativeRange:Dt,isFullyContainedInNode:Ur},B={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221,HOME:36,END:35,PAGEUP:33,PAGEDOWN:34},H={isEdit:s=>p.contains([B.BACKSPACE,B.TAB,B.ENTER,B.SPACE,B.DELETE],s),isRemove:s=>p.contains([B.BACKSPACE,B.DELETE],s),isMove:s=>p.contains([B.LEFT,B.UP,B.RIGHT,B.DOWN],s),isNavigation:s=>p.contains([B.HOME,B.END,B.PAGEUP,B.PAGEDOWN],s),nameFromCode:et.invert(B),code:B};function Yr(s){return $.Deferred(t=>{$.extend(new FileReader,{onload:e=>{const i=e.target.result;t.resolve(i)},onerror:e=>{t.reject(e)}}).readAsDataURL(s)}).promise()}function Xr(s){return $.Deferred(t=>{const e=$("<img>");e.one("load",()=>{e.off("error abort"),t.resolve(e)}).one("error abort",()=>{e.off("load").detach(),t.reject(e)}).css({display:"none"}).appendTo(document.body).attr("src",s)}).promise()}class ta{constructor(t){this.stack=[],this.stackOffset=-1,this.context=t,this.$editable=t.layoutInfo.editable,this.editable=this.$editable[0]}get editor(){return this.context.modules.editor}makeSnapshot(){const t=S.create(this.editable),e={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:this.$editable.html(),bookmark:t&&t.isOnEditable()?t.createBookmark(this.editable):e}}applySnapshot(t){t.contents!==null&&this.$editable.html(t.contents),t.bookmark!==null&&this.editor.selection.moveToBookmark(t.bookmark)}rewind(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset=0,this.applySnapshot(this.stack[this.stackOffset])}commit(){this.stack=[],this.stackOffset=-1,this.recordUndo()}reset(){this.stack=[],this.stackOffset=-1,this.$editable.html(""),this.recordUndo()}canUndo(){return this.stackOffset>0}undo(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset>0&&(this.stackOffset--,this.applySnapshot(this.stack[this.stackOffset]))}canRedo(){return this.stack.length-1>this.stackOffset}redo(){this.stack.length-1>this.stackOffset&&(this.stackOffset++,this.applySnapshot(this.stack[this.stackOffset]))}recordUndo(){this.stackOffset++,this.stack.length>this.stackOffset&&(this.stack=this.stack.slice(0,this.stackOffset)),this.stack.push(this.makeSnapshot()),this.stack.length>this.context.options.historyLimit&&(this.stack.shift(),this.stackOffset-=1)}}class ea{constructor(t){this.formatter=t}jQueryCSS(t,e){const i={};return $.each(e,(n,r)=>{i[r]=t.css(r)}),i}fromNode(t){const e=["font-family","font-size","text-align","list-style-type","line-height"],i=this.jQueryCSS(t,e)||{},n=t[0].style.fontSize||i["font-size"];return i["font-size"]=parseInt(n,10),i["font-size-unit"]=n.match(/[a-z%]+$/),i}stylePara(t,e){p.each(t.nodes(l.isPara,{includeAncestor:!0}),i=>{$(i).css(e)})}styleNodes(t,e){t=t.splitText();const i=e&&e.nodeName||"SPAN",n=!!(e&&e.expandClosestSibling),r=!!(e&&e.onlyPartialContains);if(t.collapsed)return[t.insertNode(l.create(i))];let a=l.matchNodeNames(i);const c=t.nodes(l.isNonEmptyText,{fullyContains:!0}).map(d=>l.closestSingleParent(d,a)||l.wrap(d,i));if(n){if(r){const d=t.nodes();a=y.and(a,h=>p.contains(d,h))}return c.map(d=>{const h=l.withClosestSiblings(d,a),u=p.head(h),f=p.tail(h);return $.each(f,(m,g)=>{l.appendChildNodes(u,g.childNodes),l.remove(g)}),p.head(h)})}else return c}current(t){const e=$(l.isElement(t.sc)?t.sc:t.sc.parentNode);let i=this.fromNode(e);try{i=$.extend(i,{"font-bold":this.formatter.match("bold")?"bold":"normal","font-italic":this.formatter.match("italic")?"italic":"normal","font-underline":this.formatter.match("underline")?"underline":"normal","font-subscript":this.formatter.match("subscript")?"subscript":"normal","font-superscript":this.formatter.match("superscript")?"superscript":"normal","font-strikethrough":this.formatter.match("strikethrough")?"strikethrough":"normal","font-family":this.formatter.match("fontname")||i["font-family"]})}catch{}if(!t.isOnList())i["list-style"]="none";else{const a=["circle","disc","disc-leading-zero","square"].indexOf(i["list-style-type"])>-1;i["list-style"]=a?"unordered":"ordered"}const n=l.ancestor(t.sc,l.isPara);if(n&&n.style["line-height"])i["line-height"]=n.style.lineHeight;else{const r=parseInt(i["line-height"],10)/parseInt(i["font-size"],10);i["line-height"]=r.toFixed(1)}return i.anchor=t.isOnAnchor()&&l.ancestor(t.sc,l.isAnchor),i.ancestors=l.parents(t.sc),i.range=t,i}}class Ns{constructor(t){this.context=t}get selection(){return this.context.modules.editor.selection}insertOrderedList(t){this.toggleList("OL",t)}insertUnorderedList(t){this.toggleList("UL",t)}indent(t){t=t||this.selection.getRange(),t=t.wrapBodyInlineWithPara();const e=t.nodes(l.isParaNoBlockquote,{includeAncestor:!0}),i=p.clusterBy(e,"parentNode");p.each(i,n=>{const r=p.head(n);if(l.isLi(r)){const a=this.findList(r.previousSibling);a?n.map(c=>a.appendChild(c)):(this.wrapList(n,r.parentNode.nodeName),n.map(c=>c.parentNode).map(c=>this.appendToPrevious(c)))}else p.each(n,a=>{$(a).css("marginLeft",(c,d)=>(parseInt(d,10)||0)+25)})}),this.selection.setRange(t)}outdent(t){t=t||this.selection.getRange(),t=t.wrapBodyInlineWithPara();const e=t.nodes(l.isParaNoBlockquote,{includeAncestor:!0}),i=p.clusterBy(e,"parentNode");p.each(i,n=>{const r=p.head(n);l.isLi(r)?this.releaseList([n]):p.each(n,a=>{$(a).css("marginLeft",(c,d)=>(d=parseInt(d,10)||0,d>25?d-25:""))})}),this.selection.setRange(t)}toggleList(t,e){e=e||this.selection.getRange(),e=e.wrapBodyInlineWithPara();let i=e.nodes(l.isParaNoBlockquote,{includeAncestor:!0});const n=e.createParaBookmark(i),r=p.clusterBy(i,"parentNode");if(p.find(i,l.isPurePara)){let a=[];p.each(r,c=>{a=a.concat(this.wrapList(c,t))}),i=a}else{const a=e.nodes(l.isList,{includeAncestor:!0}).filter(c=>!$.nodeName(c,t));a.length?p.each(a,c=>{l.rename(c,t)}):i=this.releaseList(r,!0)}e=S.createFromParaBookmark(n,i),this.selection.setRange(e)}wrapList(t,e){const i=p.head(t),n=p.last(t),r=l.isList(i.previousSibling)&&i.previousSibling,a=l.isList(n.nextSibling)&&n.nextSibling,c=r||l.insertAfter(n,l.create(e||"UL"));return t=t.map(d=>l.isPurePara(d)?l.rename(d,"LI"):d),l.appendChildNodes(c,t,!0),a&&(l.appendChildNodes(c,p.from(a.childNodes),!0),l.remove(a)),t}releaseList(t,e){let i=[];return p.each(t,n=>{const r=p.head(n),a=p.last(n),c=e?l.farthestParent(r,l.isList):r.parentNode,d=c.parentNode;if(c.parentNode.nodeName==="LI")n.map(h=>{const u=this.findNextSiblings(h);d.nextSibling?d.parentNode.insertBefore(h,d.nextSibling):d.parentNode.appendChild(h),u.length&&(this.wrapList(u,c.nodeName),h.appendChild(u[0].parentNode))}),c.children.length===0&&d.removeChild(c),d.childNodes.length===0&&d.parentNode.removeChild(d);else{const h=c.childNodes.length>1?C.splitTree(c,{node:a.parentNode,offset:l.position(a)+1},{skipPaddingBlankHTML:!0}):null,u=C.splitTree(c,{node:r.parentNode,offset:l.position(r)},{skipPaddingBlankHTML:!0});n=e?l.children(u,l.isLi):p.from(u.childNodes).filter(l.isLi),(e||!l.isList(c.parentNode))&&(n=n.map(m=>l.rename(m,"P"))),p.each(p.from(n).reverse(),m=>{l.insertAfter(c,m)});const f=p.compact([c,u,h]);p.each(f,m=>{const g=[m].concat(l.children(m,l.isList));p.each(g.reverse(),x=>{l.nodeLength(x)||l.remove(x,!0)})})}i=i.concat(n)}),i}appendToPrevious(t){return t.previousSibling?l.appendChildNodes(t.previousSibling,[t]):this.wrapList([t],"LI")}findList(t){return t?p.find(t.children,e=>["OL","UL"].indexOf(e.nodeName)>-1):null}findNextSiblings(t){const e=[];for(;t.nextSibling;)e.push(t.nextSibling),t=t.nextSibling;return e}}class sa{constructor(t){this.context=t,this.options=t.options,this.bullet=new Ns(t)}get selection(){return this.context.modules.editor.selection}insertTab(t,e){const i=l.createText(new Array(e+1).join(C.NBSP_CHAR));t=t.deleteContents(),t.insertNode(i,!0),t=S.create(i,e),this.selection.setRange(t)}insertParagraph(t){t=t||this.selection.getRange(),t=t.deleteContents(),t=t.wrapBodyInlineWithPara();const e=l.closest(t.sc,l.isParaNoBlockquote);let i;if(e)if(l.isLi(e)&&(l.isEmpty(e)||l.deepestChildIsEmpty(e))){this.bullet.toggleList(e.parentNode.nodeName);return}else{let n=null;if(this.options.blockquoteBreakingLevel===1?n=l.closest(e,l.isBlockquote):this.options.blockquoteBreakingLevel===2&&(n=l.farthestParent(e,l.isBlockquote)),n){i=$(l.emptyPara)[0],C.isRightEdgePoint(t.getStartPoint())&&l.isBR(t.sc.nextSibling)&&$(t.sc.nextSibling).remove();const r=C.splitTree(n,t.getStartPoint(),{discardEmptySplits:!0});r?r.parentNode.insertBefore(i,r):l.insertAfter(n,i)}else{i=C.splitTree(e,t.getStartPoint());let r=l.children(e,l.isEmptyAnchor);r=r.concat(l.children(i,l.isEmptyAnchor)),p.each(r,a=>{l.remove(a)}),(l.isHeading(i)||l.isPre(i)||l.isCustomStyleTag(i))&&l.isEmpty(i)&&(i=l.rename(i,"p"))}}else{const n=t.sc.childNodes[t.so];i=$(l.emptyPara)[0],n?t.sc.insertBefore(i,n):t.sc.appendChild(i)}this.selection.setRange(S.create(i,0).normalize()).scrollIntoView()}}const k=function(s,t,e,i){const n={colPos:0,rowPos:0},r=[],a=[];function c(){!s||!s.tagName||s.tagName.toLowerCase()!=="td"&&s.tagName.toLowerCase()!=="th"||(n.colPos=s.cellIndex,!(!s.parentElement||!s.parentElement.tagName||s.parentElement.tagName.toLowerCase()!=="tr")&&(n.rowPos=s.parentElement.rowIndex))}function d(b,v,N,T,J,F,rt){const tt={baseRow:N,baseCell:T,isRowSpan:J,isColSpan:F,isVirtual:rt};r[b]||(r[b]=[]),r[b][v]=tt}function h(b,v,N,T){return{baseCell:b.baseCell,action:v,virtualTable:{rowIndex:N,cellIndex:T}}}function u(b,v){if(!r[b]||!r[b][v])return v;let N=v;for(;r[b][N];)if(N++,!r[b][N])return N}function f(b,v){const N=u(b.rowIndex,v.cellIndex),T=v.colSpan>1,J=v.rowSpan>1,F=b.rowIndex===n.rowPos&&v.cellIndex===n.colPos;d(b.rowIndex,N,b,v,J,T,!1);const rt=v.attributes.rowSpan?parseInt(v.attributes.rowSpan.value,10):0;if(rt>1)for(let Z=1;Z<rt;Z++){const mt=b.rowIndex+Z;m(mt,N,v,F),d(mt,N,b,v,!0,T,!0)}const tt=v.attributes.colSpan?parseInt(v.attributes.colSpan.value,10):0;if(tt>1)for(let Z=1;Z<tt;Z++){const mt=u(b.rowIndex,N+Z);m(b.rowIndex,mt,v,F),d(b.rowIndex,mt,b,v,J,!0,!0)}}function m(b,v,N,T){b===n.rowPos&&n.colPos>=N.cellIndex&&N.cellIndex<=v&&!T&&n.colPos++}function g(){const b=i.rows;for(let v=0;v<b.length;v++){const N=b[v].cells;for(let T=0;T<N.length;T++)f(b[v],N[T])}}function x(b){switch(t){case k.where.Column:if(b.isColSpan)return k.resultAction.SubtractSpanCount;break;case k.where.Row:if(!b.isVirtual&&b.isRowSpan)return k.resultAction.AddCell;if(b.isRowSpan)return k.resultAction.SubtractSpanCount;break}return k.resultAction.RemoveCell}function z(b){switch(t){case k.where.Column:if(b.isColSpan)return k.resultAction.SumSpanCount;if(b.isRowSpan&&b.isVirtual)return k.resultAction.Ignore;break;case k.where.Row:if(b.isRowSpan)return k.resultAction.SumSpanCount;if(b.isColSpan&&b.isVirtual)return k.resultAction.Ignore;break}return k.resultAction.AddCell}function w(){c(),g()}this.getActionList=function(){const b=t===k.where.Row?n.rowPos:-1,v=t===k.where.Column?n.colPos:-1;let N=0,T=!0;for(;T;){const J=b>=0?b:N,F=v>=0?v:N,rt=r[J];if(!rt)return T=!1,a;const tt=rt[F];if(!tt)return T=!1,a;let Z=k.resultAction.Ignore;switch(e){case k.requestAction.Add:Z=z(tt);break;case k.requestAction.Delete:Z=x(tt);break}a.push(h(tt,Z,J,F)),N++}return a},w()};k.where={Row:0,Column:1},k.requestAction={Add:0,Delete:1},k.resultAction={Ignore:0,SubtractSpanCount:1,RemoveCell:2,AddCell:3,SumSpanCount:4};class oa{constructor(t){this.context=t}get selection(){return this.context.modules.editor.selection}tab(t,e){const i=l.closest(t.commonAncestorContainer,l.isCell),n=l.closest(i,l.isTable),r=l.children(n,l.isCell),a=p[e?"prev":"next"](r,i);a&&this.selection.setRange(S.create(a,0))}addRow(t,e){const i=l.ancestor(t.commonAncestorContainer,l.isCell),n=$(i).closest("tr"),r=this.recoverAttributes(n),a=$("<tr"+r+"></tr>"),d=new k(i,k.where.Row,k.requestAction.Add,$(n).closest("table")[0]).getActionList();for(let h=0;h<d.length;h++){const u=d[h],f=this.recoverAttributes(u.baseCell);switch(u.action){case k.resultAction.AddCell:a.append("<td"+f+">"+l.blank+"</td>");break;case k.resultAction.SumSpanCount:{if(e==="top"&&(u.baseCell.parent?u.baseCell.closest("tr").rowIndex:0)<=n[0].rowIndex){const z=$("<div></div>").append($("<td"+f+">"+l.blank+"</td>").removeAttr("rowspan")).html();a.append(z);break}let m=parseInt(u.baseCell.rowSpan,10);m++,u.baseCell.setAttribute("rowSpan",m)}break}}if(e==="top")n.before(a);else{if(i.rowSpan>1){const u=n[0].rowIndex+(i.rowSpan-2);$($(n).parent().find("tr")[u]).after($(a));return}n.after(a)}}addCol(t,e){const i=l.ancestor(t.commonAncestorContainer,l.isCell),n=$(i).closest("tr");$(n).siblings().push(n);const c=new k(i,k.where.Column,k.requestAction.Add,$(n).closest("table")[0]).getActionList();for(let d=0;d<c.length;d++){const h=c[d],u=this.recoverAttributes(h.baseCell);switch(h.action){case k.resultAction.AddCell:e==="right"?$(h.baseCell).after("<td"+u+">"+l.blank+"</td>"):$(h.baseCell).before("<td"+u+">"+l.blank+"</td>");break;case k.resultAction.SumSpanCount:if(e==="right"){let f=parseInt(h.baseCell.colSpan,10);f++,h.baseCell.setAttribute("colSpan",f)}else $(h.baseCell).before("<td"+u+">"+l.blank+"</td>");break}}}recoverAttributes(t){let e="";if(!t)return e;const i=t.attributes||[];for(let n=0;n<i.length;n++)i[n].name.toLowerCase()!=="id"&&i[n].specified&&(e+=" "+i[n].name+"='"+i[n].value+"'");return e}deleteRow(t){const e=l.ancestor(t.commonAncestorContainer,l.isCell),i=$(e).closest("tr"),n=i.children("td, th").index($(e)),r=i[0].rowIndex,c=new k(e,k.where.Row,k.requestAction.Delete,$(i).closest("table")[0]).getActionList();for(let d=0;d<c.length;d++){if(!c[d])continue;const h=c[d].baseCell,u=c[d].virtualTable,f=h.rowSpan&&h.rowSpan>1;let m=f?parseInt(h.rowSpan,10):0;switch(c[d].action){case k.resultAction.Ignore:continue;case k.resultAction.AddCell:{const g=i.next("tr")[0];if(!g)continue;const x=i[0].cells[n];f&&(m>2?(m--,g.insertBefore(x,g.cells[n]),g.cells[n].setAttribute("rowSpan",m),g.cells[n].innerHTML=""):m===2&&(g.insertBefore(x,g.cells[n]),g.cells[n].removeAttribute("rowSpan"),g.cells[n].innerHTML=""))}continue;case k.resultAction.SubtractSpanCount:f&&(m>2?(m--,h.setAttribute("rowSpan",m),u.rowIndex!==r&&h.cellIndex===n&&(h.innerHTML="")):m===2&&(h.removeAttribute("rowSpan"),u.rowIndex!==r&&h.cellIndex===n&&(h.innerHTML="")));continue;case k.resultAction.RemoveCell:continue}}i.remove()}deleteCol(t){const e=l.ancestor(t.commonAncestorContainer,l.isCell),i=$(e).closest("tr"),n=i.children("td, th").index($(e)),a=new k(e,k.where.Column,k.requestAction.Delete,$(i).closest("table")[0]).getActionList();for(let c=0;c<a.length;c++)if(a[c])switch(a[c].action){case k.resultAction.Ignore:continue;case k.resultAction.SubtractSpanCount:{const d=a[c].baseCell;if(d.colSpan&&d.colSpan>1){let u=d.colSpan?parseInt(d.colSpan,10):0;u>2?(u--,d.setAttribute("colSpan",u),d.cellIndex===n&&(d.innerHTML="")):u===2&&(d.removeAttribute("colSpan"),d.cellIndex===n&&(d.innerHTML=""))}}continue;case k.resultAction.RemoveCell:l.remove(a[c].baseCell,!0);continue}}createTable(t,e,i){const n=[];let r;for(let h=0;h<t;h++)n.push("<td>"+l.blank+"</td>");r=n.join("");const a=[];let c;for(let h=0;h<e;h++)a.push("<tr>"+r+"</tr>");c=a.join("");const d=$("<table>"+c+"</table>");return i&&i.tableClassName&&d.addClass(i.tableClassName),d[0]}deleteTable(t){const e=l.ancestor(t.commonAncestorContainer,l.isCell);$(e).closest("table").remove()}}const de=s=>l.isText(s)&&s.data.length>0,Ts=(s,t)=>{const e={"data-note-type":"bookmark",id:s,style:"overflow:hidden;line-height:0px"};return t?l.create("span",e,"&#xFEFF;"):l.create("span",e)},ia=(s,t,e)=>{let i=0;return p.each(l.select(s,t),n=>{if(n.getAttribute("data-note-bogus")!=="all"){if(n===e)return!1;i++;return}}),i},he=(s,t)=>{let e=t?s.startContainer:s.endContainer,i=t?s.startOffset:s.endOffset;if(l.isElement(e)&&e.nodeName==="TR"){const n=e.childNodes;e=n[Math.min(t?i:i-1,n.length-1)],e&&(i=t?0:e.childNodes.length,t?s.setStart(e,i):s.setEnd(e,i))}},Hs=s=>(he(s,!0),he(s,!1),s),Rs=s=>(l.isElement(s)&&l.isBlock(s)&&!s.innerHTML&&(s.innerHTML='<br data-note-bogus="1" />'),s),Ls=(s,t)=>{const e=document.getElementById(t.id+"_"+s),i=e==null?void 0:e.parentNode,n=t.keep;if(e&&i){let r,a;if(s==="start"?n?e.hasChildNodes()?(r=e.firstChild,a=1):de(e.nextSibling)?(r=e.nextSibling,a=0):de(e.previousSibling)?(r=e.previousSibling,a=e.previousSibling.data.length):(r=i,a=l.position(e)+1):(r=i,a=l.position(e)):n?e.hasChildNodes()?(r=e.firstChild,a=1):de(e.previousSibling)?(r=e.previousSibling,a=e.previousSibling.data.length):(r=i,a=l.position(e)):(r=i,a=l.position(e)),!n){const c=e.previousSibling,d=e.nextSibling;p.each(e.childNodes,u=>{l.isText(u)&&(u.data=u.data.replace(/\uFEFF/g,""))});let h;for(;h=document.getElementById(t.id+"_"+s);)l.remove(h,!1);if(l.isText(d)&&l.isText(c)){const u=c.data.length;c.appendData(d.data),l.remove(d,!0),r=c,a=u}}return{node:r,offset:a}}else return null},Ft=s=>{l.isText(s)&&s.data.length===0&&l.remove(s,!0)},na=(s,t)=>{S.getNativeRange(s).insertNode(t),Ft(t.previousSibling),Ft(t.nextSibling)},ra=(s,t)=>{const e=t.firstChild,i=t.lastChild;S.getNativeRange(s).insertNode(t),Ft(e==null?void 0:e.previousSibling),Ft(i==null?void 0:i.nextSibling)},As=(s,t)=>{l.isDocumentFragment(t)?ra(s,t):na(s,t)},ue={moveEndPoint:he,getPersistentBookmark:(s,t)=>{let e=s.getRange();const i=y.uniqueId("note_"),n=e.collapsed,r=s.getNode(),a=r.nodeName,c=s.isForward();if(a==="IMG")return{name:a,index:ia(s.editor.editable,a,r)};const d=Hs(e.cloneRange());if(!n){d.collapse(!1);const u=Ts(i+"_end",t);As(d,u)}e=Hs(e),e.collapse(!0);const h=Ts(i+"_start",t);return As(e,h),s.moveToBookmark({id:i,keep:!0,forward:c}),{id:i,forward:c}},resolvePersistentBookmark:s=>{const t=Ls("start",s),e=Ls("end",s)||t;return t&&e?{range:S.create(Rs(t.node),t.offset,Rs(e.node),e.offset),forward:s.forward===!0}:null}};let jt=window;const Ut=s=>{let t=S.create(s.editable);return $(t.sc).closest(".note-editable").length===0&&(t=S.createFromBodyElement(s.editable)),t},zs=(s,t,e,i,n)=>{let r=e?t.startContainer:t.endContainer,a=e?t.startOffset:t.endOffset;return r&&(!i||!t.collapsed)&&(r=r.childNodes[n(r,a)]||r,!l.isElement(r)&&l.isElement(r.parentNode)&&(r=r.parentNode)),r||s};class aa{constructor(t){this.context=t,this.selectedControl=null,this.explicitRange=null,this.selectedRange=null,this.bookmark=null}initialize(t){this.hasFocus=t.hasFocus();const e=a=>{let c=this.nativeSelection,d;return c.rangeCount>0?d=S.createFromNativeRange(c.getRangeAt(0)):d=Ut(this.editor),!d.equals(this.bookmark)&&this.isValidRange(d)&&this.triggerChangeEvent(d),d},i=y.throttle(a=>{a.type!=="summernote"&&(this.bookmark=e())},200,!1),n=["keydown","keyup","mouseup","paste"].map(a=>a+".selection").join(" ");t.$editable.on("blur.selection",()=>{this.hasFocus=!1}).on(n,i).on("focus.selection",a=>{this.hasFocus=!0,this.bookmark=this.bookmark||e()}),this.context.layoutInfo.note.on("summernote.change.selection",i)}destroy(){this.editor.$editable.off("selection"),this.context.layoutInfo.note.off("selection"),this.context=null,this.selectedRange=null,this.explicitRange=null,this.bookmark=null,jt=null}get editor(){return this.context.modules.editor}get nativeSelection(){return jt.getSelection?jt.getSelection():jt.document.selection}isValidRange(t){if(!(t&&(t.isWrapper||t instanceof Range)))return!1;const i=this.editor.editable;return S.isFullyContainedInNode(t,i)}collapse(t){const e=this.getRange();e.collapse(!!t),this.setRange(e)}getRange(){let t;const e=(n,r,a)=>{try{return r.compareBoundaryPoints(n,a)}catch{return-1}},i=this.editor;if(E.isAssigned(this.bookmark)&&!this.hasFocus)return this.bookmark;if(!t&&this.hasFocus)try{const n=this.nativeSelection;n&&n.rangeCount>0&&!l.isRestrictedNode(n.anchorNode)&&(t=S.createFromNativeRange(n.getRangeAt(0)))}catch{}return t||(t=Ut(i)),this.selectedRange&&this.explicitRange&&(e(t.START_TO_START,t,this.selectedRange)===0&&e(t.END_TO_END,t,this.selectedRange)===0?t=this.explicitRange:(this.selectedRange=null,this.explicitRange=null,this.bookmark=null)),t}setRange(t,e,i){if(!this.isValidRange(t))return this;const n=this.nativeSelection;if(n){t||(t=Ut(this.editor)),t.isWrapper||(t=S.getWrappedRange(t)),this.explicitRange=t,this.bookmark=t;try{n.removeAllRanges(),n.addRange(S.getNativeRange(t))}catch{}e===!1&&n.extend&&(n.collapse(t.endContainer,t.endOffset),n.extend(t.startContainer,t.startOffset)),this.selectedRange=n.rangeCount>0?t:null}if(!t.collapsed&&t.startContainer===t.endContainer&&(n!=null&&n.setBaseAndExtent)&&t.endOffset-t.startOffset<2&&t.startContainer.hasChildNodes()){const r=t.startContainer.childNodes[t.startOffset];r&&r.nodeName==="IMG"&&(n.setBaseAndExtent(t.startContainer,t.startOffset,t.endContainer,t.endOffset),(n.anchorNode!==t.startContainer||n.focusNode!==t.endContainer)&&n.setBaseAndExtent(r,0,r,1))}return i||this.triggerChangeEvent(),this}triggerChangeEvent(t){t=t||this.bookmark||this.selectedRange,t&&this.context.triggerEvent("selectionchange",t)}setNode(t){return t}getNode(){const t=this.getRange(),e=this.editor.$editable;if(!t)return e;const i=t.startOffset,n=t.endOffset;let r=t.startContainer,a=t.endContainer,c=t.commonAncestorContainer;t.collapsed||(r===a&&n-i<2&&r.hasChildNodes()&&(c=r.childNodes[i]),l.isText(r)&&l.isText(a)&&(r.length===i?r=l.skipEmptyTextNodes(r.nextSibling,!0):r=r.parentNode,n===0?a=l.skipEmptyTextNodes(a.previousSibling,!1):a=a.parentNode,r&&r===a&&(c=r)));const d=l.isText(c)?c.parentNode:c;return l.isHTMLElement(d)?d:e}getTextContent(){let t=this.getRange();return t.isOnAnchor()&&(t=S.createFromNode(l.closest(t.startContainer,l.isAnchor))),t.toString()}getHtmlContent(){let t=this.getRange();var e=t.commonAncestorContainer.parentNode.cloneNode(!1);return e.appendChild(t.cloneContents()),e.innerHTML}pasteContent(t){return!t||this.editor.isLimited(t.length)?void 0:(t=this.context.invoke("codeview.purify",t.trim()),this.getRange().pasteHTML(t))}getStart(t,e=null){return zs(this.editor.editable,e||this.getRange(),!0,t,(i,n)=>Math.min(i.childNodes.length,n))}getEnd(t,e=null){return zs(this.editor.editable,e||this.getRange(),!1,t,(i,n)=>n>0?n-1:n)}createBookmark(t){return t?ue.getPersistentBookmark(this):this.getRange().createBookmark(this.editor.editable)}createParaBookmark(t){return this.getRange().createParaBookmark(t)}moveToBookmark(t){let e,i=!0;if(this.isValidRange(t))e=t;else if(t.s&&t.e)e=S.createFromBookmark(this.editor.editable,t),this.isValidRange(e)||(e=null);else if(t.id){const n=ue.resolvePersistentBookmark(t);e=n==null?void 0:n.range,i=n==null?void 0:n.forward}e&&(this.setRange(e,i),e.scrollIntoView(this.editor.editable))}setBookmark(t){this.isValidRange(t)?(t=S.getWrappedRange(t),this.bookmark=t):this.bookmark=Ut(this.editor)}restoreBookmark(){this.bookmark&&(this.setRange(this.bookmark),this.editor.focus())}select(t){if(l.isChildOf(t,this.editor.editable,!0)){const e=S.createFromNode(t);this.setRange(e)}return t}setNode(t){const e=l.outerHtml(t);return this.pasteContent(e),t}isCollapsed(){const t=this.getRange();return t?t.collapsed:!1}isEditable(){const t=this.getRange();return t.collapsed?l.isContentEditable(t.startContainer):l.isContentEditable(t.startContainer)&&l.isContentEditable(t.endContainer)}scrollIntoView(){this.getRange().scrollIntoView(this.editor.editable)}setCursorLocation(t,e){const i=document.createRange();E.isAssigned(t)&&E.isAssigned(e)?(i.setStart(t,e),i.setEnd(t,e),this.setRange(i),this.collapse(!1)):(ue.moveEndPoint(i,!0),this.setRange(i))}isForward(){const t=this.nativeSelection,e=t==null?void 0:t.anchorNode,i=t==null?void 0:t.focusNode;if(!t||!e||!i||l.isRestrictedNode(e)||l.isRestrictedNode(i))return!0;const n=document.createRange(),r=document.createRange();try{n.setStart(e,t.anchorOffset),n.collapse(!0),r.setStart(i,t.focusOffset),r.collapse(!0)}catch{return!0}return n.compareBoundaryPoints(n.START_TO_START,r)<=0}normalize(){const t=this.getRange();if(this.nativeSelection.rangeCount>0){const i=t.normalize();return this.setRange(i,this.isForward()),i}return t}}class la{constructor(){}get(t){return null}apply(t,e=null,i=null){return this.toggle(t,e,i)}remove(t,e=null,i=null){return this.toggle(t,e,i)}toggle(t,e=null,i=null){return document.execCommand(t,!1,e)}match(t,e=null,i=null){switch(t){case"backColor":case"fontName":case"fontSize":case"foreColor":case"highlightColor":return document.queryCommandValue(t);default:return document.queryCommandState(t)}}}const ca=s=>{const t=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;return s=s.replace(t,function(e,i,n){n=n.toUpperCase();const r=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!i,a=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return e+(r||a?`
`:"")}),s.trim()},da=(s,t)=>{(t.forbidTags||[]).forEach(a=>{let c=s.getElementsByTagName(a);for(let d=c.length-1;d>=0;d--)c[d].parentNode.removeChild(c[d])});const i=t.forbidAttrs||[],n=t.forbidEmptyAttrs||[],r=s.getElementsByTagName("*");for(let a=0;a<r.length;a++){let c=r[a];c.hasAttribute("style")&&c.removeAttribute("style");let d=c.attributes;for(let h=d.length-1;h>=0;h--){let u=d[h],f=!1;for(let m of i)if(f=E.isRegExp(m)?m.test(u.name):u.name===m,f){c.removeAttribute(u.name);break}if(!f&&n.includes(u.name)&&!u.value){c.removeAttribute(u.name);continue}}}return s},Ps={prettify:(s,t)=>{const e=s.options.callbacks.onPrettifyHtml;return E.isFunction(e)?e.call(s,t):ca(t)},purify:(s,t,e)=>{const i=s.options.callbacks.onPurifyHtml;if(E.isFunction(i))return i.call(s,t);{const n=E.isElement(t)?t:l.create("div",null,t);return da(n,e||s.options.purifyHtml||{})}}},ha="bogus";class ua{constructor(t){this.context=t,this.$note=t.layoutInfo.note,this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.options=t.options,this.lang=this.options.langInfo,this.editable=this.$editable[0],this.snapshot=null,this.table=new oa(t),this.bullet=new Ns(t),this.typing=new sa(t,this.bullet),this.history=new ta(t),this.formatter=new la,this.style=new ea(this.formatter),this.selection=new aa(t),this.resizeObserver=new ResizeObserver(i=>{var n;if(i.length){const r=i[0];if(r.target==this.$editor[0]){const a=r.borderBoxSize[0].blockSize;if(a<300){const c=this.getMinHeight();a<=c&&(r.target.style.height=c+"px")}(n=this.currentPopper)==null||n.scheduleUpdate()}}}),this.context.memo("help.escape",this.lang.help.escape),this.context.memo("help.undo",this.lang.help.undo),this.context.memo("help.redo",this.lang.help.redo),this.context.memo("help.tab",this.lang.help.tab),this.context.memo("help.untab",this.lang.help.untab),this.context.memo("help.insertParagraph",this.lang.help.insertParagraph),this.context.memo("help.insertOrderedList",this.lang.help.insertOrderedList),this.context.memo("help.insertUnorderedList",this.lang.help.insertUnorderedList),this.context.memo("help.indent",this.lang.help.indent),this.context.memo("help.outdent",this.lang.help.outdent),this.context.memo("help.formatPara",this.lang.help.formatPara),this.context.memo("help.insertHorizontalRule",this.lang.help.insertHorizontalRule),this.context.memo("help.fontName",this.lang.help.fontName),this.context.memo("help.save",this.lang.help.save);const e=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor"];for(let i=0,n=e.length;i<n;i++)this[e[i]]=(r=>a=>{this.beforeCommand(),this.formatter.toggle(r,a),this.afterCommand(!0)})(e[i]),this.context.memo("help."+e[i],this.lang.help[e[i]]);this.fontName=this.wrapCommand(i=>this.fontStyling("font-family",D.validFontName(i))),this.fontSize=this.wrapCommand(i=>{const n=this.currentStyle()["font-size-unit"];return this.fontStyling("font-size",i+n)}),this.fontSizeUnit=this.wrapCommand(i=>{const n=this.currentStyle()["font-size"];return this.fontStyling("font-size",n+i)});for(let i=1;i<=6;i++)this["formatH"+i]=(n=>()=>{this.formatBlock("H"+n)})(i),this.context.memo("help.formatH"+i,this.lang.help["formatH"+i]);this.insertParagraph=this.wrapCommand(i=>{this.typing.insertParagraph(i)}),this.insertOrderedList=this.wrapCommand(i=>{this.bullet.insertOrderedList(i)}),this.insertUnorderedList=this.wrapCommand(i=>{this.bullet.insertUnorderedList(i)}),this.indent=this.wrapCommand(i=>{this.bullet.indent(i)}),this.outdent=this.wrapCommand(i=>{this.bullet.outdent(i)}),this.insertNode=this.wrapCommand(i=>{if(this.isLimited($(i).text().length))return;this.selection.getRange().insertNode(i),this.selection.setRange(S.createFromNodeAfter(i))}),this.insertText=this.wrapCommand((i,n)=>{if(this.isLimited(i.length))return;let r;if(n){const a=this.getLastRange().getNativeRange();a.deleteContents(),r=l.createText(i),a.insertNode(r)}else r=this.getLastRange().insertNode(l.createText(i));this.selection.setRange(S.create(r,l.nodeLength(r)))}),this.pasteHTML=this.wrapCommand(i=>{this.selection.pasteContent(i)}),this.formatBlock=this.wrapCommand((i,n)=>{const r=this.options.callbacks.onApplyCustomStyle;r?r.call(this,n,this.context,this.onFormatBlock):this.onFormatBlock(i,n)}),this.insertHorizontalRule=this.wrapCommand(()=>{const i=this.selection.getRange().insertNode(l.create("HR"));i.nextSibling&&this.selection.setRange(S.create(i.nextSibling,0).normalize())}),this.lineHeight=this.wrapCommand(i=>{this.style.stylePara(this.selection.getRange(),{lineHeight:i})}),this.createLink=this.wrapCommand(i=>{let n=i.url;const r=i.text,a=i.isNewWindow;if(typeof n=="string"&&(n=n.trim()),this.options.onCreateLink?n=this.options.onCreateLink(n):n=this.checkLinkUrl(n)||n,a&&!i.rel){const d=[];this.options.linkAddNoReferrer&&d.push("noreferrer"),this.options.linkAddNoOpener&&d.push("noopener"),d.length&&(i.rel=d.join(" "))}let c=[];if(i.img&&!i.a)$(i.img).wrap('<a href="'+n+'"></a>'),i.a=i.img.parentElement,c.push(i.a);else if(i.img&&i.a)c.push(i.a);else{let d=i.range||this.selection.getRange();const h=r.length-d.toString().length;if(h>0&&this.isLimited(h))return;if(d.toString()!==r){d=d.deleteContents();const f=d.insertNode($("<A></A>").text(r)[0]);c.push(f)}else c=this.style.styleNodes(d,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0})}$.each(c,(d,h)=>{const u={href:n,rel:U.nullEmpty(i.rel),class:U.nullEmpty(i.cssClasss),style:U.nullEmpty(i.cssStyle),target:a?"_blank":null};l.setAttrs(h,u)}),this.selection.setRange(S.createFromNodes(c))}),this.color=this.wrapCommand(i=>{const n=i.foreColor,r=i.backColor;n&&this.formatter.toggle("foreColor",n),r&&this.formatter.toggle("backColor",r)}),this.foreColor=this.wrapCommand(i=>{this.formatter.toggle("foreColor",i)}),this.insertTable=this.wrapCommand(i=>{const n=i.split("x");this.selection.getRange().deleteContents().insertNode(this.table.createTable(n[0],n[1],this.options))}),this.removeMedia=this.wrapCommand(()=>{const i=this.selection.selectedControl;if(!i)return;let n=S.createFromNodeBefore(i),r=$(i).parent();r.closest("figure").length?r.closest("figure").remove():r=$(i).detach(),this.selection.selectedControl=null,this.selection.setRange(n),this.context.triggerEvent("media.delete",r,this.$editable)}),this.floatMe=this.wrapCommand(i=>{const n=$(this.restoreTarget());n.removeClass("float-right float-left"),(i=="left"||i=="right")&&n.addClass("float-"+i)}),this.resize=this.wrapCommand(i=>{const n=$(this.restoreTarget());n.css("width","").css("height","").removeClass("w-100 w-50 w-25"),i=parseFloat(i),i>0&&(i===.25?n.addClass("w-25"):i===.5?n.addClass("w-50"):i===1?n.addClass("w-100"):n.css({width:i*100+"%"})),this.cleanEmptyStyling(n)})}cleanEmptyStyling(t){$(t).each((e,i)=>{i.className||i.removeAttribute("class"),i.style.cssText||i.removeAttribute("style")})}initialize(){if(this.selection.initialize(this),this.$editable.on("keydown",t=>{if(t.keyCode===H.code.ENTER&&this.context.triggerEvent("enter",t),this.context.triggerEvent("keydown",t),this.snapshot=this.history.makeSnapshot(),this.hasKeyShortCut=!1,t.isDefaultPrevented()||(this.options.shortcuts?this.hasKeyShortCut=this.handleKeyMap(t):this.preventDefaultEditableShortCuts(t)),this.isLimited(1,t)){const e=this.selection.getRange();if(e.eo-e.so===0)return!1}this.options.recordEveryKeystroke&&this.hasKeyShortCut===!1&&this.history.recordUndo()}).on("keyup mousedown mouseup copy paste copy focus blur scroll",t=>{this.context.triggerEvent(t.type,t)}).on("input",()=>{this.isLimited(0)&&this.snapshot&&this.history.applySnapshot(this.snapshot)}),this.$editable.attr("spellcheck",this.options.spellCheck),this.$editable.attr("autocorrect",this.options.spellCheck),this.options.disableGrammar&&this.$editable.attr("data-gramm",!1),this.$editable.html(l.value(this.$note)||l.emptyPara),this.$editable.on(D.inputEventName,this.context.triggerChangeEvent),this.$editable.on("focusin",t=>{this.context.triggerEvent("focusin",t)}).on("focusout",t=>{this.context.triggerEvent("focusout",t)}),this.options.airMode)this.options.overrideContextMenu&&this.$editor.on("contextmenu",t=>(this.context.triggerEvent("contextmenu",t),!1));else{this.options.width&&this.$editor.outerWidth(this.options.width);const t=e=>E.isNumber(e)?e+"px":e;this.options.minHeight&&this.$editor.css("min-height",t(this.options.minHeight)),this.options.maxHeight&&this.$editor.css("max-height",t(this.options.maxHeight)),this.options.height&&this.setHeight(this.options.height,!0)}this.history.recordUndo(),this.observeResize()}destroy(){this.selection.destroy(),this.resizeObserver.disconnect(),this.$editable.off()}handleKeyMap(t){const e=this.options.keyMap[D.isMac?"mac":"pc"],i=[];t.metaKey&&i.push("CMD"),t.ctrlKey&&!t.altKey&&i.push("CTRL"),t.shiftKey&&i.push("SHIFT");const n=H.nameFromCode[t.keyCode];n&&i.push(n);const r=e[i.join("+")];if(n==="TAB"&&this.options.tabDisable)this.afterCommand();else if(r){if(this.context.invoke(r)!==!1)return t.preventDefault(),!0}else H.isEdit(t.keyCode)&&(H.isRemove(t.keyCode)&&this.context.invoke("removed"),this.afterCommand());return!1}preventDefaultEditableShortCuts(t){(t.ctrlKey||t.metaKey)&&p.contains([66,73,85],t.keyCode)&&t.preventDefault()}isLimited(t,e){return t=t||0,typeof e<"u"&&(H.isMove(e.keyCode)||H.isNavigation(e.keyCode)||e.ctrlKey||e.metaKey||p.contains([H.code.BACKSPACE,H.code.DELETE],e.keyCode))?!1:this.options.maxTextLength>0&&this.$editable.text().length+t>this.options.maxTextLength}checkLinkUrl(t){if(t=t==null?void 0:t.trim(),t){if(U.isValidEmail(t))return"mailto://"+t;if(U.isValidTel(t))return"tel://"+t;if(!U.startsWithUrlScheme(t)){let i=t,n=i.indexOf("/");if(n>1&&(i=i.substring(0,n)),U.isValidHost(i))return"https://"+t;var e=t[0];if(e==="/"||e==="~"||e==="\\"||e==="."||e==="#")return t}}return""}createRange(){return this.focus(),this.selection.getRange()}setLastRange(t){this.selection.setBookmark(t)}getLastRange(){return this.selection.bookmark||this.selection.setBookmark(),this.selection.bookmark}get lastRange(){return this.getLastRange()}saveRange(t){t&&this.selection.collapse()}restoreRange(){this.selection.restoreBookmark()}html(t){this.cleanupDom();let e=this.$editable.html();return et.valueOrDefault(t,this.options.prettifyHtml)&&(e=Ps.prettify(this.context,e)),e}cleanupDom(t=null){if(t=l.isElement(t)?t:this.editable,t){const e=t.querySelectorAll("span[data-note-fragment], span.note-marker");e.length>0&&e.forEach(i=>{l.unwrap(i.firstChild)})}}saveTarget(t){this.selection.selectedControl=t}clearTarget(){this.selection.selectedControl=null}restoreTarget(){return this.selection.selectedControl}currentStyle(){let t=S.create();return t?(t=t.normalize(),this.style.current(t)):this.style.fromNode(this.$editable)}styleFromNode(t){return this.style.fromNode(t)}save(){this.context.triggerEvent("before.command",this.$editable),$.Deferred(e=>{this.context.triggerEvent("save",this.context.code(),e)}).promise().then(e=>{this.context.triggerEvent("saved",e)})}undo(){this.context.triggerEvent("before.command",this.$editable),this.history.undo(),this.context.triggerChangeEvent(this.$editable)}commit(){this.context.triggerEvent("before.command",this.$editable),this.history.commit(),this.context.triggerChangeEvent(this.$editable)}redo(){this.context.triggerEvent("before.command",this.$editable),this.history.redo(),this.context.triggerChangeEvent(this.$editable)}beforeCommand(){this.context.triggerEvent("before.command",this.$editable),document.execCommand("styleWithCSS",!1,this.options.styleWithCSS),this.focus()}afterCommand(t){this.normalizeContent(),this.history.recordUndo(),t||this.context.triggerChangeEvent(this.$editable)}tab(){const t=this.selection.getRange();if(t.isOnList())this.indent(t);else if(t.collapsed&&t.isOnCell())this.table.tab(t);else{if(this.options.tabSize===0)return!1;this.isLimited(this.options.tabSize)||(this.beforeCommand(),this.typing.insertTab(t,this.options.tabSize),this.afterCommand())}}untab(){const t=this.selection.getRange();if(t.isOnList())this.outdent(t);else if(t.collapsed&&t.isOnCell())this.table.tab(t,!0);else if(this.options.tabSize===0)return!1}wrapCommand(t){return function(){this.beforeCommand(),t.apply(this,arguments),this.afterCommand()}}removed(t,e,i){t=S.create(),t.collapsed&&t.isOnCell()&&(e=t.ec,(i=e.tagName)&&e.childElementCount===1&&e.childNodes[0].tagName==="BR"&&(i==="P"?e.remove():["TH","TD"].indexOf(i)>=0&&e.firstChild.remove()))}insertImage(t,e){return Xr(t).then(i=>{this.beforeCommand(),typeof e=="function"?e(i):(typeof e=="string"&&i.attr("data-filename",e),i.css("width",Math.min(this.$editable.width(),i.width()))),i.show(),this.selection.getRange().insertNode(i[0]),this.selection.setRange(S.createFromNodeAfter(i[0])),this.afterCommand()}).fail(i=>{this.context.triggerEvent("image.upload.error",i)})}insertImagesAsDataURL(t){$.each(t,(e,i)=>{const n=i.name;this.options.maximumImageFileSize&&this.options.maximumImageFileSize<i.size?this.context.triggerEvent("image.upload.error",this.lang.image.maximumFileSizeError):Yr(i).then(r=>this.insertImage(r,n)).fail(()=>{this.context.triggerEvent("image.upload.error")})})}insertImagesOrCallback(t){this.options.callbacks.onImageUpload?this.context.triggerEvent("image.upload",t):this.insertImagesAsDataURL(t)}getSelectedText(){return this.selection.getTextContent()}getTagStyleClass(t){let e=p.find(this.options.styleTags,i=>$.isPlainObject(i)&&i.tag.toUpperCase()==t.toUpperCase());return e==null?void 0:e.className}onFormatBlock(t,e){let i=this.createRange(),n=$([i.sc,i.ec]).closest(t),r={};if(n.length)for(const a of n[0].attributes)a.value&&(r[a.name]=a.value);if(this.formatter.apply("FormatBlock",t),i=this.createRange(),n=$([i.sc,i.ec]).closest(t),l.setAttrs(n,r),e!=null&&e.length&&(e[0].tagName.toUpperCase()!==t.toUpperCase()&&(e=e.find(t)),e!=null&&e.length)){const a=this.selection.getRange();n=$([a.sc,a.ec]).closest(t),n.removeClass();const c=e[0].className||"";c&&n.addClass(c)}this.cleanEmptyStyling(n)}formatPara(){this.formatBlock("P")}fontStyling(t,e){const i=this.selection.getRange();if(i!==""){const n=this.style.styleNodes(i);if(this.$editor.find(".note-status-output").html(""),$(n).css(t,e),i.collapsed){const r=p.head(n);r&&!l.nodeLength(r)&&(r.innerHTML=C.ZERO_WIDTH_NBSP_CHAR,this.selection.setRange(S.createFromNode(r.firstChild)),this.$editable.data(ha,r))}else this.selection.setRange(i)}else{const n=$.now();this.$editor.find(".note-status-output").html('<div id="note-status-output-'+n+'" class="alert alert-info">'+this.lang.output.noSelection+"</div>"),setTimeout(function(){$("#note-status-output-"+n).remove()},5e3)}}unlink(){let t=$(this.selection.selectedControl);if(t.is("img")&&t.parent().is("a"))this.beforeCommand(),t.unwrap(),this.afterCommand(!0),this.context.modules.imagePopover.hide();else{let e=this.selection.getRange();if(e.isOnAnchor()){const i=l.ancestor(e.sc,l.isAnchor);e=S.createFromNode(i),this.selection.setRange(e),this.beforeCommand(),document.execCommand("unlink"),this.afterCommand()}}}getLinkInfo(){var r;this.hasFocus()||this.focus();let t,e,i;t=this.selection.selectedControl,(r=t==null?void 0:t.parentElement)!=null&&r.matches("a")&&(e=t.parentElement,i=S.create(e,0,e,e.childNodes.length)),i||(i=this.selection.getRange().expand(l.isAnchor)),e||(e=p.head(i.nodes(l.isAnchor)));const n={range:i,a:e,img:t,text:t?null:i.toString()};return e&&(n.url=e.getAttribute("href"),n.cssClass=e.className,n.cssStyle=e.style.cssText,n.rel=e.rel,n.isNewWindow=e.target=="_blank"),n}addRow(t){const e=this.selection.getRange();e.collapsed&&e.isOnCell()&&(this.beforeCommand(),this.table.addRow(e,t),this.afterCommand())}addCol(t){const e=this.selection.getRange();e.collapsed&&e.isOnCell()&&(this.beforeCommand(),this.table.addCol(e,t),this.afterCommand())}deleteRow(){const t=this.selection.getRange();t.collapsed&&t.isOnCell()&&(this.beforeCommand(),this.table.deleteRow(t),this.afterCommand())}deleteCol(){const t=this.selection.getRange();t.collapsed&&t.isOnCell()&&(this.beforeCommand(),this.table.deleteCol(t),this.afterCommand())}deleteTable(){const t=this.selection.getRange();t.collapsed&&t.isOnCell()&&(this.beforeCommand(),this.table.deleteTable(t),this.afterCommand())}resizeImage(t,e,i){let n;if(i){const a=t.y/t.x,c=e.data("ratio");n={width:c>a?t.x:t.y/c,height:c>a?t.x*c:t.y}}else n={width:t.x,height:t.y};const r=this.context.invoke("statusbar.getZoomLevel");r!=1&&(n.width=n.width/r,n.height=n.height/r),e.css(n)}getMinHeight(){return this.context.invoke("toolbar.getHeight")+this.context.invoke("statusbar.getHeight")}getHeight(){return this.$editor.outerHeight()}setHeight(t,e){if(E.isNumber(t)){if(t=this.options.minHeight>0?Math.max(t,this.options.minHeight):t,t=this.options.maxHeight>0?Math.min(t,this.options.maxHeight):t,!e){const i=this.getMinHeight();t=Math.max(t,i)}t=t+"px"}this.$editor.css("height",t)}observeResize(){this.resizeObserver.observe(this.$editor[0])}unobserveResize(){this.resizeObserver.unobserve(this.$editor[0])}hasFocus(){return this.editable.matches(":focus")||this.$editor[0].matches(":focus-within")}focus(){this.hasFocus()||this.$editable.trigger("focus")}isEmpty(){return l.isEmpty(this.$editable[0])||l.emptyPara===this.$editable.html()}empty(){this.context.invoke("code",l.emptyPara)}normalizeContent(){this.$editable[0].normalize()}showPopover(t,e,i="top",n=null){if(t!=null&&t.length){let r=t.data("popper");r&&r.destroy(),r=new Popper(e,t[0],{placement:i,modifiers:{computeStyle:{gpuAcceleration:!1},arrow:{element:".arrow"},preventOverflow:{boundariesElement:n||this.$editable[0]}}}),r.scheduleUpdate(),t.data("popper",r).show(),this.currentPopper=r,this.context.triggerEvent("popover.shown",t)}}hidePopover(t){if(t!=null&&t.length){let e=!1,i=t.data("popper");i&&(i.destroy(),t.removeData("popper"),this.currentPopper=null,e=!0),t.hide(),e&&this.context.triggerEvent("popover.hidden",t)}}}class pa{constructor(t){this.context=t,this.options=t.options,this.$editable=t.layoutInfo.editable}initialize(){this.$editable.on("paste",this.pasteByEvent.bind(this))}pasteByEvent(t){var i,n;if(this.context.isDisabled())return;const e=t.originalEvent.clipboardData;if((i=e==null?void 0:e.items)!=null&&i.length){const r=e.files,a=e.getData("Text");if(r.length>0&&this.options.allowClipboardImagePasting)this.context.invoke("editor.insertImagesOrCallback",r),t.preventDefault();else if(a.length>0&&this.context.invoke("editor.isLimited",a.length))t.preventDefault();else if(a.length>0){const c=e.types||[],d=c.includes("text/plain"),h=c.includes("text/rtf");if(c.includes("text/html")||e.getData("text/html")){t.preventDefault();let f=e.getData("text/html");(n=this.options.purifyHtml)!=null&&n.enabled&&(f=Ps.purify(this.context,f).innerHTML),document.execCommand("insertHTML",!1,f)}else if(!h&&d){t.preventDefault();let f=a.replace(/\n/g,"<br>").replace(/  /g," &nbsp;");document.execCommand("insertHTML",!1,f)}}}setTimeout(()=>{this.context.invoke("editor.afterCommand")},10)}}class fa{constructor(t){this.context=t,this.$eventListener=$(document),this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.options=t.options,this.lang=this.options.langInfo,this.documentEventHandlers={},this.$dropzone=$(['<div class="note-dropzone">','<div class="note-dropzone-message"></div>',"</div>"].join("")).prependTo(this.$editor)}initialize(){this.options.disableDragAndDrop?(this.documentEventHandlers.onDrop=t=>{t.preventDefault()},this.$eventListener=this.$dropzone,this.$eventListener.on("drop",this.documentEventHandlers.onDrop)):this.attachDragAndDropEvent()}attachDragAndDropEvent(){let t=$();const e=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=i=>{const n=this.context.invoke("codeview.isActivated"),r=this.$editor.width()>0&&this.$editor.height()>0;!n&&!t.length&&r&&(this.$editor.addClass("dragover"),this.$dropzone.width(this.$editor.width()),this.$dropzone.height(this.$editor.height()),e.text(this.lang.image.dragImageHere)),t=t.add(i.target)},this.documentEventHandlers.onDragleave=i=>{t=t.not(i.target),(!t.length||i.target.nodeName==="BODY")&&(t=$(),this.$editor.removeClass("dragover"))},this.documentEventHandlers.onDrop=()=>{t=$(),this.$editor.removeClass("dragover")},this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",this.documentEventHandlers.onDrop),this.$dropzone.on("dragenter",()=>{this.$dropzone.addClass("hover"),e.text(this.lang.image.dropImage)}).on("dragleave",()=>{this.$dropzone.removeClass("hover"),e.text(this.lang.image.dragImageHere)}),this.$dropzone.on("drop",i=>{const n=i.originalEvent.dataTransfer;i.preventDefault(),n&&n.files&&n.files.length?(this.$editable.trigger("focus"),this.context.invoke("editor.insertImagesOrCallback",n.files)):$.each(n.types,(r,a)=>{if(a.toLowerCase().indexOf("_moz_")>-1)return;const c=n.getData(a);a.toLowerCase().indexOf("text")>-1?this.context.invoke("editor.pasteHTML",c):$(c).each((d,h)=>{this.context.invoke("editor.insertNode",h)})})}).on("dragover",!1)}destroy(){Object.keys(this.documentEventHandlers).forEach(t=>{this.$eventListener.off(t.slice(2).toLowerCase(),this.documentEventHandlers[t])}),this.documentEventHandlers={}}}const pe="__note-jm__",Ms="<!--"+pe+"-->";class ma{constructor(t){this.context=t,this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.$codable=t.layoutInfo.codable,this.options=t.options,this.CodeMirrorConstructor=window.CodeMirror,this.options.codemirror.CodeMirrorConstructor&&(this.CodeMirrorConstructor=this.options.codemirror.CodeMirrorConstructor)}sync(t){const e=this.isActivated(),i=this.CodeMirrorConstructor;e&&(t?i?this.$codable.data("cmEditor").getDoc().setValue(t):this.$codable.val(t):i&&this.$codable.data("cmEditor").save())}initialize(){this.$codable.on("keyup",t=>{t.keyCode===H.code.ESCAPE&&this.deactivate()})}isActivated(){return this.$editor.hasClass("codeview")}toggle(){this.isActivated()?this.deactivate():this.activate(),this.context.triggerEvent("codeview.toggled")}purify(t){if(this.options.codeviewFilter&&(t=t.replace(this.options.codeviewFilterRegex,""),this.options.codeviewIframeFilter)){const e=this.options.codeviewIframeWhitelistSrc.concat(this.options.codeviewIframeWhitelistSrcBase);t=t.replace(/(<iframe.*?>.*?(?:<\/iframe>)?)/gi,function(i){if(/<.+src(?==?('|"|\s)?)[\s\S]+src(?=('|"|\s)?)[^>]*?>/i.test(i))return"";for(const n of e)if(new RegExp('src="(https?:)?//'+n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+'/(.+)"').test(i))return i;return""})}return t}normalizeSelRange(){const e=this.context.modules.editor.selection;let i;return e.selectedControl?i=S.createFromNodeBefore(e.selectedControl):i=e.getRange().cloneRange().collapse(!0),S.getNativeRange(i)}activate(){this.context.triggerEvent("codeview.activating");const t=this.CodeMirrorConstructor,e=this.context.modules.editor,i=e.getHeight();this.normalizeSelRange().insertNode(document.createComment(pe));let r=e.html();const a=U.findPosition(r,Ms);if(a&&(r=r.replace(Ms,"")),this.$codable.val(r),e.setHeight(i),this.context.invoke("toolbar.updateCodeview",!0),this.context.invoke("airPopover.updateCodeview",!0),this.$editor.addClass("codeview"),this.$codable.trigger("focus"),t){const c=t.fromTextArea(this.$codable[0],this.options.codemirror);if(this.options.codemirror.tern){const d=new t.TernServer(this.options.codemirror.tern);c.ternServer=d,c.on("cursorActivity",h=>{d.updateArgHints(h)})}if(c.on("blur",d=>{this.context.triggerEvent("blur.codeview",c.getValue(),d)}),c.on("change",()=>{this.context.triggerEvent("change.codeview",c.getValue(),c)}),this.$codable.data("cmEditor",c),a){const d={line:a.line,ch:a.column};c.setCursor(d),c.scrollIntoView(d)}}else this.$codable.on("blur",c=>{this.context.triggerEvent("blur.codeview",this.$codable.val(),c)}),this.$codable.on("input",()=>{this.context.triggerEvent("change.codeview",this.$codable.val(),this.$codable)})}deactivate(){if(this.context.triggerEvent("codeview.leaving"),this.CodeMirrorConstructor){const n=this.$codable.data("cmEditor");this.$codable.val(n.getValue()),n.toTextArea()}let e=l.value(this.$codable,this.options.prettifyHtml)||l.emptyPara;this.options.purifyCustomCode&&(e=this.purify(e));const i=this.$editable.html()!==e;this.$editable.html(e),this.$editor.removeClass("codeview"),i&&this.context.triggerEvent("change",this.$editable),this.$editable.trigger("focus"),this.context.invoke("toolbar.updateCodeview",!1),this.context.invoke("airPopover.updateCodeview",!1)}removeJumpMarker(){const t=this.context.layoutInfo.editable,e=document.createTreeWalker(t[0],NodeFilter.SHOW_COMMENT,{acceptNode(n){return n.nodeValue.trim()===pe?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});let i;for(;i=e.nextNode();)i.parentNode.removeChild(i)}destroy(){this.isActivated()&&this.deactivate()}}class ga{constructor(t){this.context=t,this.$document=$(document),this.$statusbar=t.layoutInfo.statusbar,this.$resizer=this.$statusbar.find("> .note-resizebar"),this.$selectionPath=this.$statusbar.find(".note-selection-path"),this.$zoomer=this.$statusbar.find(".note-zoomer"),this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.$codable=t.layoutInfo.codable,this.options=t.options,this.currentZoomLevel=1,this.zoomLevels=[.25,.33,.5,.67,.75,.8,.9,1,1.1,1.25,1.5,1.75,2,2.5,3,4,5],this.events={"summernote.change summernote.selectionchange":y.debounce((e,i)=>{e.namespace=="selectionchange"?this.updateSelectionPath(i,!1):this.updateSelectionPath(this.context.invoke("editor.selection.getRange"),!0)},200,!0)}}initialize(){if(this.options.airMode||this.options.disableResizeEditor){this.destroy();return}this.setZoomLevel(this.currentZoomLevel),this.$selectionPath.on("mouseenter mouseleave click",".note-path-item",t=>{t.preventDefault();const e=$(t.currentTarget).data("referencedElement");if(e)if(t.type=="click"){this.removeGlimpse();const i=S.createFromNode(e);this.context.invoke("editor.selection.setRange",i)}else t.type=="mouseleave"?this.removeGlimpse():t.type=="mouseenter"&&this.glimpseNode(e)}),this.$zoomer.find(".note-zoom-action").on("click",t=>{t.preventDefault();const e=$(t.target).attr("data-action")=="incr",i=this.zoomLevels.indexOf(this.currentZoomLevel);if(i>-1){const n=e?i+1:i-1;n>=0&&n<this.zoomLevels.length&&this.setZoomLevel(this.zoomLevels[n])}}),this.$resizer.on("mousedown touchstart",t=>{t.preventDefault(),t.stopPropagation();const e=this.$editor.offset().top-this.$document.scrollTop(),i=n=>{const a=(n.type=="mousemove"?n:n.originalEvent.touches[0]).clientY-e+4;this.context.invoke("editor.setHeight",a)};this.$document.on("mousemove touchmove",i).one("mouseup touchend",()=>{this.$document.off("mousemove touchmove",i)})})}getZoomLevel(){return this.currentZoomLevel}setZoomLevel(t){const e=this.$zoomer.find(".note-zoom-value");e.attr("data-value",t),e.text((t*100).toFixed(0)+" %"),this.$editable.css("--zoom",t);const i=this.$zoomer.find("> .note-zoom-action[data-action=decr]"),n=this.$zoomer.find("> .note-zoom-action[data-action=incr]");t<=this.zoomLevels[0]?i.attr("disabled","disabled"):i.removeAttr("disabled"),t>=p.last(this.zoomLevels)?n.attr("disabled","disabled"):n.removeAttr("disabled"),this.currentZoomLevel=t}updateSelectionPath(t,e){let i=l.isElement(t)?t:t==null?void 0:t.sc;if(i){const n=l.isText(i);if(n&&(i=i.parentNode),!e&&n&&this.$selectionPath.data("selectedNode")===i)return;this.removeGlimpse(),this.$selectionPath.html("");const r=l.parents(i,null,!0);r.length?(r.reverse(),this.$selectionPath.data("selectedNode",i),r.forEach(a=>{if(l.isElement(a)){let c=a.tagName.toLowerCase();a.classList.length&&(c+=`<span class="text-muted">.${a.classList[0]}</span>`);const d=$(`<span class="note-path-item">${c}</span>`);d.data("referencedElement",a),this.$selectionPath.append(d),a!=i&&this.$selectionPath.append($('<span class="note-path-item-divider p-1">›</span>'))}})):this.$selectionPath.html("&nbsp;").removeData("selectedNode")}}glimpseNode(t){if(!t)return;const e=t.getBoundingClientRect(),i=document.createElement("div");return i.setAttribute("class","note-tag-glimpse"),i.style.top=`${e.top+window.scrollY}px`,i.style.left=`${e.left+window.scrollX}px`,i.style.width=`${e.width}px`,i.style.height=`${e.height}px`,document.body.appendChild(i),t.glimpseOverlay=i,i}removeGlimpse(){this.$selectionPath.find("> .note-path-item").each((t,e)=>{var n;const i=(n=$(e).data("referencedElement"))==null?void 0:n.glimpseOverlay;i&&(e.glimpseOverlay=null,i.remove())})}getHeight(){return this.$statusbar.outerHeight()}getContentHeight(){return this.$statusbar.find("> .note-statusbar-content").outerHeight()}getResizerHeight(){return this.$statusbar.find("> .note-resizebar").outerHeight()}destroy(){this.$resizer.off(),this.$statusbar.addClass("locked")}}class ba{constructor(t){this.context=t,this.$editor=t.layoutInfo.editor,this.$toolbar=t.layoutInfo.toolbar,this.$editable=t.layoutInfo.editable,this.$codable=t.layoutInfo.codable,this.$window=$(window),this.$scrollbar=$("html, body"),this.scrollbarClassName="note-fullscreen-body"}toggle(){this.$editor.toggleClass("fullscreen");const t=this.isFullscreen();this.$scrollbar.toggleClass(this.scrollbarClassName,t),this.context.invoke("toolbar.updateFullscreen",t),this.context.invoke("editor."+(t?"unobserveResize":"observeResize"))}isFullscreen(){return this.$editor.hasClass("fullscreen")}destroy(){this.$scrollbar.removeClass(this.scrollbarClassName)}}class va{constructor(t){this.context=t,this.editor=t.modules.editor,this.$document=$(document),this.$editingArea=t.layoutInfo.editingArea,this.options=t.options,this.lang=this.options.langInfo,this.events={"summernote.mousedown":(e,i)=>{this.update(i.target,i)&&this.editor.selection.triggerChangeEvent(i.target)},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":(e,i)=>{this.update(i==null?void 0:i.target,i)},"summernote.disable":()=>{this.hide()},"summernote.focusout":(e,i)=>{l.isContainedTarget(i)||this.hide()},"summernote.codeview.toggled":()=>{this.hide()}}}initialize(){this.$handle=$(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',this.options.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(this.$editingArea),this.$handle.on("mousedown",t=>{if(l.isControlSizing(t.target)){t.preventDefault(),t.stopPropagation();const e=this.$handle.find(".note-control-selection").data("target"),i=e.offset(),n=this.$document.scrollTop(),r=a=>{this.context.invoke("editor.resizeImage",{x:a.clientX-i.left,y:a.clientY-(i.top-n)},e,!a.shiftKey),this.update(e[0],a)};this.$document.on("mousemove",r).one("mouseup",a=>{this.$document.off("mousemove",r),this.context.invoke("editor.afterCommand")}),e.data("ratio")||e.data("ratio",e.height()/e.width())}}),this.$handle.on("wheel",t=>{t.preventDefault(),this.update()})}destroy(){this.$handle.remove()}update(t,e){if(this.context.isDisabled())return!1;t=t||this.editor.selection.selectedControl;const i=(e==null?void 0:e.type)=="scroll";i&&(t=this.editor.selection.selectedControl);const n=l.isImg(t),r=this.$handle.find(".note-control-selection");if(i||this.context.invoke("imagePopover.update",t,e),n){const a=$(t),c=this.$editingArea[0].getBoundingClientRect(),d=t.getBoundingClientRect();r.css({display:"block",left:d.left-c.left,top:d.top-c.top,width:d.width,height:d.height}).data("target",a);const h=new Image;h.src=a.attr("src");let u=Math.ceil(d.width)+"x"+Math.ceil(d.height);h.width>0&&h.height>0&&(u+=" ("+this.lang.image.original+": "+h.width+"x"+h.height+")");const f=r.find(".note-control-selection-info").text(u),m=f.outerWidth()>d.width-10||f.outerHeight()>d.height-10;f.toggle(!m),this.context.invoke("editor.saveTarget",t)}else this.hide();return n}hide(){this.$handle.children().hide(),this.context.invoke("editor.clearTarget")}}const Ca="http://",ya=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/]{2}|tel:|mailto:[A-Z0-9._%+-]+@|xmpp:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;class ka{constructor(t){this.context=t,this.options=t.options,this.$editable=t.layoutInfo.editable,this.events={"summernote.keyup":(e,i)=>{i.isDefaultPrevented()||this.handleKeyup(i)},"summernote.keydown":(e,i)=>{this.handleKeydown(i)}}}initialize(){this.lastWordRange=null}destroy(){this.lastWordRange=null}replace(){if(!this.lastWordRange)return;const t=this.lastWordRange.toString(),e=t.match(ya);if(e&&(e[1]||e[2])){const i=e[1]?t:Ca+t,n=this.options.showDomainOnlyForAutolink?t.replace(/^(?:https?:\/\/)?(?:tel?:?)?(?:mailto?:?)?(?:xmpp?:?)?(?:www\.)?/i,"").split("/")[0]:t,r=$("<a></a>").html(n).attr("href",i)[0];this.context.options.linkTargetBlank&&$(r).attr("target","_blank"),this.lastWordRange.insertNode(r),this.lastWordRange=null,this.context.invoke("editor.focus"),this.context.triggerEvent("change",this.$editable)}}handleKeydown(t){if(p.contains([H.code.ENTER,H.code.SPACE],t.keyCode)){const e=this.context.invoke("editor.createRange").getWordRange({trim:!0});this.lastWordRange=e}}handleKeyup(t){(H.code.SPACE===t.keyCode||H.code.ENTER===t.keyCode&&!t.shiftKey)&&this.replace()}}class wa{constructor(t){this.$note=t.layoutInfo.note,this.events={"summernote.change":()=>{this.$note.val(t.invoke("code"))}}}shouldInitialize(){return l.isTextarea(this.$note[0])}}class xa{constructor(t){this.context=t,this.options=t.options.replace||{},this.keys=[H.code.ENTER,H.code.SPACE,H.code.PERIOD,H.code.COMMA,H.code.SEMICOLON,H.code.SLASH],this.previousKeydownCode=null,this.events={"summernote.keyup":(e,i)=>{i.isDefaultPrevented()||this.handleKeyup(i)},"summernote.keydown":(e,i)=>{this.handleKeydown(i)}}}shouldInitialize(){return!!this.options.match}initialize(){this.lastWord=null}destroy(){this.lastWord=null}replace(){if(!this.lastWord)return;const t=this,e=this.lastWord.toString();this.options.match(e,function(i){if(i){let n="";if(typeof i=="string"?n=l.createText(i):i instanceof jQuery?n=i[0]:i instanceof Node&&(n=i),!n)return;t.lastWord.insertNode(n),t.lastWord=null,t.context.invoke("editor.focus")}})}handleKeydown(t){if(this.previousKeydownCode&&p.contains(this.keys,this.previousKeydownCode)){this.previousKeydownCode=t.keyCode;return}if(p.contains(this.keys,t.keyCode)){const e=this.context.invoke("editor.createRange").getWordRange();this.lastWord=e}this.previousKeydownCode=t.keyCode}handleKeyup(t){p.contains(this.keys,t.keyCode)&&this.replace()}}class $a{constructor(t){this.context=t,this.$editingArea=t.layoutInfo.editingArea,this.options=t.options,this.options.inheritPlaceholder===!0&&(this.options.placeholder=this.context.$note.attr("placeholder")||this.options.placeholder),this.events={"summernote.init summernote.change":()=>{this.update()},"summernote.codeview.toggled":()=>{this.update()}}}shouldInitialize(){return!!this.options.placeholder}initialize(){this.$placeholder=$('<div class="note-placeholder"></div>'),this.$placeholder.on("click",()=>{this.context.invoke("focus")}).html(this.options.placeholder).prependTo(this.$editingArea),this.update()}destroy(){this.$placeholder.remove()}update(){const t=!this.context.invoke("codeview.isActivated")&&this.context.invoke("editor.isEmpty");this.$placeholder.toggle(t)}}class Sa{constructor(t){this.ui=$.summernote.ui,this.context=t,this.$toolbar=t.layoutInfo.toolbar,this.options=t.options,this.lang=this.options.langInfo,this.invertedKeyMap=et.invert(this.options.keyMap[D.isMac?"mac":"pc"])}representShortcut(t){let e=this.invertedKeyMap[t];return!this.options.shortcuts||!e?"":(D.isMac&&(e=e.replace("CMD","⌘").replace("SHIFT","⇧")),e=e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")," ("+e+")")}button(t){return!this.options.tooltip&&t.tooltip&&delete t.tooltip,t.container=this.options.container,this.ui.button(t)}initialize(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.addTablePopoverButtons(),this.fontInstalledMap={}}destroy(){delete this.fontInstalledMap}isFontInstalled(t){return Object.prototype.hasOwnProperty.call(this.fontInstalledMap,t)||(this.fontInstalledMap[t]=D.isFontInstalled(t)||p.contains(this.options.fontNamesIgnoreCheck,t)),this.fontInstalledMap[t]}isFontDeservedToAdd(t){return t=t.toLowerCase(),t!==""&&this.isFontInstalled(t)&&D.genericFontFamilies.indexOf(t)===-1}loadCustomColors(t){const e="note:customcolors:"+t.data("event"),i=localStorage.getItem(e);let n;if(i)try{n=JSON.parse(i),n.length>8&&(n=n.slice(-8))}catch{localStorage.removeItem(e)}return n||[]}saveCustomColor(t,e){const i="note:customcolors:"+t.data("event"),n=this.loadCustomColors(t);n.push(e),n.length>8&&n.shift(),localStorage.setItem(i,JSON.stringify(n)),this.updateCustomColorPalette(t,n)}updateCustomColorPalette(t,e){const i=[e.concat(Array(8-e.length).fill("#FFFFFF")).slice(0,8)];t.html(this.ui.palette({colors:i,colorsName:i,eventName:t.data("event"),container:this.options.container}).render()),t.find(".note-color-btn").eq(e.length-1).addClass("omega")}colorPalette(t,e,i,n){return this.ui.buttonGroup({className:"note-color btn-group-split "+t,children:[this.button({className:"note-current-color-button",contents:$(this.ui.icon(this.options.icons.paintbrush)).addClass("note-recent-color")[0].outerHTML,tooltip:e,click:r=>{const a=$(r.currentTarget);i&&n?this.context.invoke("editor.color",{backColor:a.attr("data-backColor"),foreColor:a.attr("data-foreColor")}):i?this.context.invoke("editor.color",{backColor:a.attr("data-backColor")}):n&&this.context.invoke("editor.color",{foreColor:a.attr("data-foreColor")})},callback:r=>{const a=r.find(".note-recent-color");i&&(a.css("background-color",this.options.colorButton.backColor),r.attr("data-backColor",this.options.colorButton.backColor)),n?(a.css("color",this.options.colorButton.foreColor),r.attr("data-foreColor",this.options.colorButton.foreColor)):a.css("color","transparent")}}),this.button({className:"dropdown-toggle dropdown-toggle-split",contents:this.ui.dropdownButtonContents("",this.options),tooltip:this.lang.color.more,data:{toggle:"dropdown"}}),this.ui.dropdown({items:(i?['<div class="note-palette">','<div class="note-palette-title"><span class="text-truncate">'+this.lang.color.background+"</span>",'<button title="'+this.lang.color.transparent+'" data-event="backColor" data-value="transparent" type="button" class="note-color-reset btn btn-clear-dark btn-no-border btn-sm btn-icon ml-auto">','<i class="far fa-droplet-slash"></i>',"</button>",'<button title="'+this.lang.color.cpSelect+'" data-event="openPalette" data-value="backColorPicker-'+this.options.id+'" type="button" class="note-color-select btn btn-clear-dark btn-no-border btn-sm btn-icon">','<i class="fa fa-eye-dropper"></i>',"</button>",'<input type="color" id="backColorPicker-'+this.options.id+'" class="note-btn note-color-select-btn" value="'+this.options.colorButton.backColor+'" data-event="backColorPalette-'+this.options.id+'">',"</div>",'<hr class="my-0" />','<div class="note-holder" data-event="backColor"><!-- back colors --></div>','<hr class="my-0" />','<div class="note-holder-custom" id="backColorPalette-'+this.options.id+'" data-event="backColor"></div>',"</div>"].join(""):"")+(n?['<div class="note-palette">','<div class="note-palette-title"><span class="text-truncate">'+this.lang.color.foreground+"</span>",'<button title="'+this.lang.color.resetToDefault+'" data-event="removeFormat" data-value="foreColor" type="button" class="note-color-reset btn btn-clear-dark btn-no-border btn-sm btn-icon ml-auto">','<i class="far fa-droplet-slash"></i>',"</button>",'<button title="'+this.lang.color.cpSelect+'" data-event="openPalette" data-value="foreColorPicker-'+this.options.id+'" type="button" class="note-color-select btn btn-clear-dark btn-no-border btn-sm btn-icon">','<i class="fa fa-eye-dropper"></i>',"</button>",'<input type="color" id="foreColorPicker-'+this.options.id+'" class="note-btn note-color-select-btn" value="'+this.options.colorButton.foreColor+'" data-event="foreColorPalette-'+this.options.id+'">',"</div>",'<hr class="my-0" />','<div class="note-holder" data-event="foreColor"><!-- fore colors --></div>','<hr class="my-0" />','<div class="note-holder-custom" id="foreColorPalette-'+this.options.id+'" data-event="foreColor"></div>',"</div>"].join(""):""),callback:r=>{r.find(".note-holder").each((a,c)=>{const d=$(c);d.append(this.ui.palette({colors:this.options.colors,colorsName:this.options.colorsName,eventName:d.data("event"),container:this.options.container}).render())}),r.find(".note-holder-custom").each((a,c)=>{const d=$(c),h=this.loadCustomColors(d);this.updateCustomColorPalette(d,h)}),r.find("input[type=color]").each((a,c)=>{$(c).on("change",d=>{const h=d.currentTarget,u=r.find("#"+$(h).data("event")),f=h.value.toUpperCase();this.saveCustomColor(u,f),this.updateCustomColorPalette(u,this.loadCustomColors(u)),u.find(".note-color-btn.omega").first().trigger("click")})})},click:r=>{r.stopPropagation();const a=$("."+t).find(".note-dropdown-menu"),c=$(r.target.closest("button")),d=c.data("event"),h=c.attr("data-value");if(d==="openPalette")a.find("#"+h).trigger("click");else{if(p.contains(["backColor","foreColor"],d)){const u=d==="backColor"?"background-color":"color",f=c.closest(".note-color").find(".note-recent-color"),m=c.closest(".note-color").find(".note-current-color-button");f.css(u,h),m.attr("data-"+d,h)}this.context.invoke("editor."+d,h)}}})]}).render()}addToolbarButtons(){this.context.memo("button.style",()=>this.ui.buttonGroup([this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents(this.ui.icon(this.options.icons.paragraph),this.options),tooltip:this.lang.style.style,data:{toggle:"dropdown"}}),this.ui.dropdown({className:"dropdown-style",items:this.options.styleTags,title:this.lang.style.style,template:u=>{typeof u=="string"&&(u={tag:u,title:Object.prototype.hasOwnProperty.call(this.lang.style,u)?this.lang.style[u]:u});const f=u.tag,m=u.title,g=u.style?' style="'+u.style+'" ':"",x=u.className?' class="'+u.className+'"':"";return"<"+f+g+x+">"+m+"</"+f+">"},click:this.context.createInvokeHandler("editor.formatBlock")})]).render());for(let u=0,f=this.options.styleTags.length;u<f;u++){const m=this.options.styleTags[u];this.context.memo("button.style."+m,()=>this.button({className:"note-btn-style-"+m,contents:'<div data-value="'+m+'">'+m.toUpperCase()+"</div>",tooltip:this.lang.style[m],click:this.context.createInvokeHandler("editor.formatBlock")}).render())}this.context.memo("button.bold",()=>this.button({className:"note-btn-bold",contents:this.ui.icon(this.options.icons.bold),tooltip:this.lang.font.bold+this.representShortcut("bold"),click:this.context.createInvokeHandlerAndUpdateState("editor.bold")}).render()),this.context.memo("button.italic",()=>this.button({className:"note-btn-italic",contents:this.ui.icon(this.options.icons.italic),tooltip:this.lang.font.italic+this.representShortcut("italic"),click:this.context.createInvokeHandlerAndUpdateState("editor.italic")}).render()),this.context.memo("button.underline",()=>this.button({className:"note-btn-underline",contents:this.ui.icon(this.options.icons.underline),tooltip:this.lang.font.underline+this.representShortcut("underline"),click:this.context.createInvokeHandlerAndUpdateState("editor.underline")}).render()),this.context.memo("button.clear",()=>this.button({className:"note-btn-removeformat",contents:this.ui.icon(this.options.icons.eraser),tooltip:this.lang.font.clear+this.representShortcut("removeFormat"),click:this.context.createInvokeHandler("editor.removeFormat")}).render());const t=this.button({className:"note-btn-strikethrough",contents:this.ui.icon(this.options.icons.strikethrough),tooltip:this.lang.font.strikethrough+this.representShortcut("strikethrough"),click:this.context.createInvokeHandlerAndUpdateState("editor.strikethrough")}),e=this.button({className:"note-btn-superscript",contents:this.ui.icon(this.options.icons.superscript),tooltip:this.lang.font.superscript,click:this.context.createInvokeHandlerAndUpdateState("editor.superscript")}),i=this.button({className:"note-btn-subscript",contents:this.ui.icon(this.options.icons.subscript),tooltip:this.lang.font.subscript,click:this.context.createInvokeHandlerAndUpdateState("editor.subscript")});this.context.memo("button.strikethrough",()=>t.render()),this.context.memo("button.superscript",()=>e.render()),this.context.memo("button.subscript",()=>i.render()),this.context.memo("button.moreFontStyles",()=>this.ui.buttonGroup([this.button({className:"dropdown-toggle no-chevron",contents:this.ui.dropdownButtonContents(this.ui.icon(this.options.icons.ellipsis),this.options),data:{toggle:"dropdown"}}),this.ui.dropdown({className:"note-toolbar",css:{"min-width":"auto"},items:this.ui.toolGroup({className:"note-more-fontstyles",children:[t,e,i]}).render()})]).render()),this.context.memo("button.fontname",()=>{const u=this.context.invoke("editor.currentStyle");return this.options.addDefaultFonts&&(p.isEmpty(u["font-family"])||$.each(u["font-family"].split(","),(f,m)=>{m=m.trim().replace(/['"]+/g,""),this.isFontDeservedToAdd(m)&&this.options.fontNames.indexOf(m)===-1&&this.options.fontNames.push(m)})),this.ui.buttonGroup([this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents('<span class="note-current-fontname"></span>',this.options),tooltip:this.lang.font.name,data:{toggle:"dropdown"}}),this.ui.dropdownCheck({className:"dropdown-fontname",checkClassName:this.options.icons.menuCheck,items:this.options.fontNames.filter(this.isFontInstalled.bind(this)),title:this.lang.font.name,template:f=>'<span style="font-family: '+D.validFontName(f)+'">'+f+"</span>",click:this.context.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()}),this.context.memo("button.fontsize",()=>this.ui.buttonGroup([this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents('<span class="note-current-fontsize"></span>',this.options),tooltip:this.lang.font.size,data:{toggle:"dropdown"}}),this.ui.dropdownCheck({className:"dropdown-fontsize",checkClassName:this.options.icons.menuCheck,items:this.options.fontSizes,title:this.lang.font.size,click:this.context.createInvokeHandlerAndUpdateState("editor.fontSize")})]).render()),this.context.memo("button.fontsizeunit",()=>this.ui.buttonGroup([this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents('<span class="note-current-fontsizeunit"></span>',this.options),tooltip:this.lang.font.sizeunit,data:{toggle:"dropdown"}}),this.ui.dropdownCheck({className:"dropdown-fontsizeunit",checkClassName:this.options.icons.menuCheck,items:this.options.fontSizeUnits,title:this.lang.font.sizeunit,click:this.context.createInvokeHandlerAndUpdateState("editor.fontSizeUnit")})]).render()),this.context.memo("button.color",()=>this.colorPalette("note-color-all",this.lang.color.recent,!0,!0)),this.context.memo("button.forecolor",()=>this.colorPalette("note-color-fore",this.lang.color.foreground,!1,!0)),this.context.memo("button.backcolor",()=>this.colorPalette("note-color-back",this.lang.color.background,!0,!1)),this.context.memo("button.ul",()=>this.button({contents:this.ui.icon(this.options.icons.unorderedlist),tooltip:this.lang.lists.unordered+this.representShortcut("insertUnorderedList"),click:this.context.createInvokeHandler("editor.insertUnorderedList")}).render()),this.context.memo("button.ol",()=>this.button({contents:this.ui.icon(this.options.icons.orderedlist),tooltip:this.lang.lists.ordered+this.representShortcut("insertOrderedList"),click:this.context.createInvokeHandler("editor.insertOrderedList")}).render());const n=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut("justifyLeft"),click:this.context.createInvokeHandler("editor.justifyLeft")}),r=this.button({contents:this.ui.icon(this.options.icons.alignCenter),tooltip:this.lang.paragraph.center+this.representShortcut("justifyCenter"),click:this.context.createInvokeHandler("editor.justifyCenter")}),a=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut("justifyRight"),click:this.context.createInvokeHandler("editor.justifyRight")}),c=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut("justifyFull"),click:this.context.createInvokeHandler("editor.justifyFull")}),d=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut("outdent"),click:this.context.createInvokeHandler("editor.outdent")}),h=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut("indent"),click:this.context.createInvokeHandler("editor.indent")});this.context.memo("button.justifyLeft",y.invoke(n,"render")),this.context.memo("button.justifyCenter",y.invoke(r,"render")),this.context.memo("button.justifyRight",y.invoke(a,"render")),this.context.memo("button.justifyFull",y.invoke(c,"render")),this.context.memo("button.outdent",y.invoke(d,"render")),this.context.memo("button.indent",y.invoke(h,"render")),this.context.memo("button.paragraph",()=>this.ui.buttonGroup([this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents(this.ui.icon(this.options.icons.alignLeft),this.options),tooltip:this.lang.paragraph.paragraph,data:{toggle:"dropdown"}}),this.ui.dropdown({className:"note-toolbar",css:{"min-width":"auto"},children:[this.ui.toolGroup({className:"note-align",children:[n,r,a,c]}),this.ui.toolGroup({className:"note-list",children:[d,h]})]})]).render()),this.context.memo("button.height",()=>this.ui.buttonGroup([this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents(this.ui.icon(this.options.icons.textHeight),this.options),tooltip:this.lang.font.height,data:{toggle:"dropdown"}}),this.ui.dropdownCheck({items:this.options.lineHeights,checkClassName:this.options.icons.menuCheck,className:"dropdown-line-height",title:this.lang.font.height,click:this.context.createInvokeHandler("editor.lineHeight")})]).render()),this.context.memo("button.table",()=>this.ui.buttonGroup([this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents(this.ui.icon(this.options.icons.table),this.options),tooltip:this.lang.table.table,data:{toggle:"dropdown"}}),this.ui.dropdown({title:this.lang.table.table,className:"note-table",items:['<div class="note-dimension-picker">','<div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div>','<div class="note-dimension-picker-highlighted"></div>','<div class="note-dimension-picker-unhighlighted"></div>',"</div>",'<div class="note-dimension-display text-center fwm">1 x 1</div>'].join("")})],{callback:u=>{u.find(".note-dimension-picker-mousecatcher").css({width:this.options.insertTableMaxSize.col+"em",height:this.options.insertTableMaxSize.row+"em"}).on("mousedown",this.context.createInvokeHandler("editor.insertTable")).on("mousemove",this.tableMoveHandler.bind(this))}}).render()),this.context.memo("button.link",()=>this.button({contents:this.ui.icon(this.options.icons.link),tooltip:this.lang.link.link+this.representShortcut("linkDialog.show"),click:this.context.createInvokeHandler("linkDialog.show")}).render()),this.context.memo("button.image",()=>this.button({contents:this.ui.icon(this.options.icons.picture),tooltip:this.lang.image.image,click:this.context.createInvokeHandler("imageDialog.show")}).render()),this.context.memo("button.video",()=>this.button({contents:this.ui.icon(this.options.icons.video),tooltip:this.lang.video.video,click:this.context.createInvokeHandler("videoDialog.show")}).render()),this.context.memo("button.hr",()=>this.button({contents:this.ui.icon(this.options.icons.minus),tooltip:this.lang.hr.insert+this.representShortcut("insertHorizontalRule"),click:this.context.createInvokeHandler("editor.insertHorizontalRule")}).render()),this.context.memo("button.fullscreen",()=>this.button({className:"btn-fullscreen note-codeview-keep",contents:this.ui.icon(this.options.icons.arrowsAlt),tooltip:this.lang.options.fullscreen,click:this.context.createInvokeHandler("fullscreen.toggle")}).render()),this.context.memo("button.codeview",()=>this.button({className:"btn-codeview note-codeview-keep",contents:this.ui.icon(this.options.icons.code),tooltip:this.lang.options.codeview,click:this.context.createInvokeHandler("codeview.toggle")}).render()),this.context.memo("button.redo",()=>this.button({className:"note-redo disabled",contents:this.ui.icon(this.options.icons.redo),tooltip:this.lang.history.redo+this.representShortcut("redo"),click:this.context.createInvokeHandler("editor.redo")}).render()),this.context.memo("button.undo",()=>this.button({className:"note-undo disabled",contents:this.ui.icon(this.options.icons.undo),tooltip:this.lang.history.undo+this.representShortcut("undo"),click:this.context.createInvokeHandler("editor.undo")}).render()),this.context.memo("button.help",()=>this.button({contents:this.ui.icon(this.options.icons.question),tooltip:this.lang.options.help,click:this.context.createInvokeHandler("helpDialog.show")}).render()),this.context.memo("button.save",()=>this.button({className:"note-btn-save note-codeview-keep disabled",contents:this.ui.icon(this.options.icons.disk),tooltip:this.lang.common.save+this.representShortcut("save"),click:this.context.createInvokeHandler("editor.save")}).render())}addImagePopoverButtons(){this.context.memo("button.resizeFull",()=>this.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:this.lang.image.resizeFull,click:this.context.createInvokeHandler("editor.resize","1")}).render()),this.context.memo("button.resizeHalf",()=>this.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:this.lang.image.resizeHalf,click:this.context.createInvokeHandler("editor.resize","0.5")}).render()),this.context.memo("button.resizeQuarter",()=>this.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:this.lang.image.resizeQuarter,click:this.context.createInvokeHandler("editor.resize","0.25")}).render()),this.context.memo("button.resizeNone",()=>this.button({contents:this.ui.icon(this.options.icons.rollback),tooltip:this.lang.image.resizeNone,click:this.context.createInvokeHandler("editor.resize","0")}).render()),this.context.memo("button.floatLeft",()=>this.button({contents:this.ui.icon(this.options.icons.floatLeft),tooltip:this.lang.image.floatLeft,click:this.context.createInvokeHandler("editor.floatMe","left")}).render()),this.context.memo("button.floatRight",()=>this.button({contents:this.ui.icon(this.options.icons.floatRight),tooltip:this.lang.image.floatRight,click:this.context.createInvokeHandler("editor.floatMe","right")}).render()),this.context.memo("button.floatNone",()=>this.button({contents:this.ui.icon(this.options.icons.floatNone),tooltip:this.lang.image.floatNone,click:this.context.createInvokeHandler("editor.floatMe","none")}).render()),this.context.memo("button.removeMedia",()=>this.button({contents:this.ui.icon(this.options.icons.trash),tooltip:this.lang.image.remove,click:this.context.createInvokeHandler("editor.removeMedia")}).render())}addLinkPopoverButtons(){this.context.memo("button.linkDialogShow",()=>this.button({contents:this.ui.icon(this.options.icons.link),tooltip:this.lang.link.edit,click:this.context.createInvokeHandler("linkDialog.show")}).render()),this.context.memo("button.unlink",()=>this.button({className:"note-unlink",contents:this.ui.icon(this.options.icons.unlink),tooltip:this.lang.link.unlink,click:this.context.createInvokeHandler("editor.unlink")}).render())}addTablePopoverButtons(){this.context.memo("button.addRowUp",()=>this.button({className:"btn-md",contents:this.ui.icon(this.options.icons.rowAbove),tooltip:this.lang.table.addRowAbove,click:this.context.createInvokeHandler("editor.addRow","top")}).render()),this.context.memo("button.addRowDown",()=>this.button({className:"btn-md",contents:this.ui.icon(this.options.icons.rowBelow),tooltip:this.lang.table.addRowBelow,click:this.context.createInvokeHandler("editor.addRow","bottom")}).render()),this.context.memo("button.addColLeft",()=>this.button({className:"btn-md",contents:this.ui.icon(this.options.icons.colBefore),tooltip:this.lang.table.addColLeft,click:this.context.createInvokeHandler("editor.addCol","left")}).render()),this.context.memo("button.addColRight",()=>this.button({className:"btn-md",contents:this.ui.icon(this.options.icons.colAfter),tooltip:this.lang.table.addColRight,click:this.context.createInvokeHandler("editor.addCol","right")}).render()),this.context.memo("button.deleteRow",()=>this.button({className:"btn-md",contents:this.ui.icon(this.options.icons.rowRemove),tooltip:this.lang.table.delRow,click:this.context.createInvokeHandler("editor.deleteRow")}).render()),this.context.memo("button.deleteCol",()=>this.button({className:"btn-md",contents:this.ui.icon(this.options.icons.colRemove),tooltip:this.lang.table.delCol,click:this.context.createInvokeHandler("editor.deleteCol")}).render()),this.context.memo("button.deleteTable",()=>this.button({className:"btn-md",contents:this.ui.icon(this.options.icons.trash),tooltip:this.lang.table.delTable,click:this.context.createInvokeHandler("editor.deleteTable")}).render())}build(t,e){for(let i=0,n=e.length;i<n;i++){const r=e[i],a=Array.isArray(r)?r[0]:r,c=Array.isArray(r)?r.length===1?[r[0]]:r[1]:[r],d=this.ui.toolGroup({className:"note-"+a}).render();for(let h=0,u=c.length;h<u;h++){const f=this.context.memo("button."+c[h]);f&&d.append(typeof f=="function"?f(this.context):f)}d.appendTo(t)}}updateCurrentStyle(t){const e=t||this.$toolbar,i=this.context.invoke("editor.currentStyle");if(this.updateBtnStates(e,{".note-btn-bold":()=>i["font-bold"]==="bold",".note-btn-italic":()=>i["font-italic"]==="italic",".note-btn-underline":()=>i["font-underline"]==="underline",".note-btn-subscript":()=>i["font-subscript"]==="subscript",".note-btn-superscript":()=>i["font-superscript"]==="superscript",".note-btn-strikethrough":()=>i["font-strikethrough"]==="strikethrough",".note-btn-inlinecode":()=>i["font-code"]==="code"}),i["font-family"]){const n=i["font-family"].split(",").map(a=>a.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")),r=p.find(n,this.isFontInstalled.bind(this));e.find(".dropdown-fontname a").each((a,c)=>{const d=$(c),h=d.data("value")+""==r+"";d.toggleClass("checked",h)}),e.find(".note-current-fontname").text(r).css("font-family",r).removeClass("text-muted")}else e.find(".note-current-fontname").text("Standard").css("font-family","").addClass("text-muted");if(i["font-size"]){const n=i["font-size"];e.find(".dropdown-fontsize a").each((a,c)=>{const d=$(c),h=d.data("value")+""==n+"";d.toggleClass("checked",h)}),e.find(".note-current-fontsize").text(n);const r=i["font-size-unit"];e.find(".dropdown-fontsizeunit a").each((a,c)=>{const d=$(c),h=d.data("value")+""==r+"";d.toggleClass("checked",h)}),e.find(".note-current-fontsizeunit").text(r)}if(i["line-height"]){const n=i["line-height"];e.find(".dropdown-line-height a").each((r,a)=>{const c=$(a),d=$(a).data("value")+""==n+"";c.toggleClass("checked",d)}),e.find(".note-current-line-height").text(n)}}updateBtnStates(t,e){$.each(e,(i,n)=>{this.ui.toggleBtnActive(t.find(i),n())})}tableMoveHandler(t){const i=$(t.target.parentNode),n=i.next(),r=i.find(".note-dimension-picker-mousecatcher"),a=i.find(".note-dimension-picker-highlighted"),c=i.find(".note-dimension-picker-unhighlighted");let d;if(t.offsetX===void 0){const u=$(t.target).offset();d={x:t.pageX-u.left,y:t.pageY-u.top}}else d={x:t.offsetX,y:t.offsetY};const h={c:Math.ceil(d.x/18)||1,r:Math.ceil(d.y/18)||1};a.css({width:h.c+"em",height:h.r+"em"}),r.data("value",h.c+"x"+h.r),h.c>3&&h.c<this.options.insertTableMaxSize.col&&c.css({width:h.c+1+"em"}),h.r>3&&h.r<this.options.insertTableMaxSize.row&&c.css({height:h.r+1+"em"}),n.html(h.c+" x "+h.r)}}class Ea{constructor(t){this.context=t,this.$window=$(window),this.$document=$(document),this.ui=$.summernote.ui,this.$note=t.layoutInfo.note,this.$editor=t.layoutInfo.editor,this.$toolbar=t.layoutInfo.toolbar,this.$editable=t.layoutInfo.editable,this.$statusbar=t.layoutInfo.statusbar,this.options=t.options,this.isFollowing=!1,this.followScroll=this.followScroll.bind(this)}shouldInitialize(){return!this.options.airMode}initialize(){this.options.toolbar=this.options.toolbar||[],this.options.toolbar.length?this.context.invoke("buttons.build",this.$toolbar,this.options.toolbar):this.$toolbar.hide(),this.$btnSave=this.$toolbar.find(".note-btn-save"),this.$btnUndo=this.$toolbar.find(".note-undo"),this.$btnRedo=this.$toolbar.find(".note-redo"),this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.changeContainer(!1),this.$note.on("summernote.keyup summernote.mouseup summernote.change",()=>{this.context.invoke("buttons.updateCurrentStyle")}),this.$note.on("summernote.saved",()=>{this.$btnSave.addClass("disabled")}),this.$note.on("summernote.change summernote.change.codeview",t=>{if(this.$btnSave.removeClass("disabled"),t.namespace=="change"){let e=this.context.modules.editor.history;this.$btnUndo.toggleClass("disabled",!e.canUndo()),this.$btnRedo.toggleClass("disabled",!e.canRedo())}}),this.context.invoke("buttons.updateCurrentStyle"),this.$toolbar.on("mousedown touchstart",t=>{t.preventDefault(),t.stopPropagation()}),this.options.followingToolbar&&(this.$window.on("scroll resize",this.followScroll),this.$editor.on("focusin",this.followScroll),this.$editor.on("focusout",t=>{l.isContainedTarget(t)||this.followScroll()}))}destroy(){this.$toolbar.children().remove(),this.options.followingToolbar&&this.$window.off("scroll resize",this.followScroll)}followScroll(){if(this.$editor.hasClass("fullscreen"))return!1;const t=this.$editor.outerHeight(),e=this.$editor.width();let i=0;this.options.otherStaticBar&&(i=$(this.options.otherStaticBar).outerHeight());let n=parseInt(getComputedStyle(document.body).getPropertyValue("--content-offset")||0);const r=this.$document.scrollTop(),a=this.$editor.offset().top,c=a+t,d=a-i-n,h=c-i-n,u=this.context.modules.editor.hasFocus();u&&!this.isFollowing&&r>d&&r<h?(this.isFollowing=!0,this.$toolbar.addClass("note-toolbar-sticky").css({top:n,width:e})):this.isFollowing&&(!u||r<d||r>h)&&(this.isFollowing=!1,this.$toolbar.removeClass("note-toolbar-sticky").css({top:"",bottom:"",width:""}))}changeContainer(t){t?this.$toolbar.prependTo(this.$editor):this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.options.followingToolbar&&this.followScroll()}updateFullscreen(t){this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"),t),this.changeContainer(t)}updateCodeview(t){this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"),t),t?this.deactivate():this.activate()}activate(t){let e=this.$toolbar.find("button");t||(e=e.not(".note-codeview-keep")),this.ui.toggleBtn(e,!0)}deactivate(t){let e=this.$toolbar.find("button");t||(e=e.not(".note-codeview-keep")),this.ui.toggleBtn(e,!1)}getHeight(){return this.$toolbar.outerHeight()}}class Na{constructor(t){this.context=t,this.ui=$.summernote.ui,this.$body=$(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo,this.editor=t.modules.editor,t.memo("help.linkDialog.show",this.options.langInfo.help["linkDialog.show"])}initialize(){const t=this.options.dialogsInBody?this.$body:this.options.container,e=['<div class="form-group note-form-group">',`	<label for="note-dialog-link-txt-${this.options.id}" class="note-form-label">URL</label>`,'	<div class="input-group">',`		<input id="note-dialog-link-txt-${this.options.id}" class="note-link-url form-control note-form-control note-input" type="text" value="http://" />`,this.options.callbacks.onFileBrowse?`<div class="input-group-append"><button class="btn btn-secondary btn-browse" type="button">${this.lang.link.browse}...</button></div>`:"","	</div>","</div>",'<div class="form-group note-form-group form-group-text">',`	<label for="note-dialog-link-url-${this.options.id}" class="note-form-label">${this.lang.link.textToDisplay}</label>`,`	<input id="note-dialog-link-url-${this.options.id}" class="note-link-text form-control note-form-control note-input" type="text" />`,"</div>",'<div class="form-group note-form-group">',`	<label for="note-dialog-link-class-${this.options.id}" class="note-form-label">${this.lang.attrs.cssClass}</label>`,`	<input id="note-dialog-link-class-${this.options.id}" class="note-link-class form-control note-form-control note-input" type="text" />`,"</div>",'<div class="form-group note-form-group">',`	<label for="note-dialog-link-style-${this.options.id}" class="note-form-label">${this.lang.attrs.cssStyle}</label>`,`	<input id="note-dialog-link-style-${this.options.id}" class="note-link-style form-control note-form-control note-input" type="text" />`,"</div>",'<div class="form-group note-form-group">',`	<label for="note-dialog-link-rel-${this.options.id}" class="note-form-label">${this.lang.attrs.rel} <small class="text-muted">(alternate, author, help, license, next, nofollow, noreferrer, prefetch, prev,...)</small></label>`,`	<input id="note-dialog-link-rel-${this.options.id}" class="note-link-rel form-control note-form-control note-input" type="text" />`,"</div>",this.options.disableLinkTarget?"":$("<div></div>").append(this.ui.checkbox({id:"sn-checkbox-open-in-new-window",className:"form-switch note-new-window",text:this.lang.link.openInNewWindow}).render()).html()].join(""),i=['<button type="button" class="btn btn-secondary btn-flat" data-dismiss="modal">'+this.lang.common.cancel+"</button>",'<button type="submit" class="btn btn-primary note-link-btn" disabled>'+this.lang.common.ok+"</button>"].join("");this.$dialog=this.ui.dialog({className:"link-dialog",title:this.lang.link.link,fade:this.options.dialogsFade,body:e,footer:i}).render().appendTo(t)}destroy(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()}bindEnterKey(t,e){t.on("keypress",i=>{if(i.keyCode===H.code.ENTER)return i.preventDefault(),i.stopPropagation(),e.trigger("click"),!1})}onCheckLinkUrl(t){t.on("blur",e=>{let i=this.editor.checkLinkUrl(e.target.value);i&&(e.target.value=i)})}showLinkDialog(t){return $.Deferred(e=>{let i=this,n=this.$dialog.find(".note-link-text"),r=this.$dialog.find(".note-link-url"),a=this.$dialog.find(".note-link-class"),c=this.$dialog.find(".note-link-style"),d=this.$dialog.find(".note-link-rel"),h=this.$dialog.find(".note-link-btn"),u=this.$dialog.find("#note-sn-checkbox-open-in-new-window"),f=this.$dialog.find(".btn-browse"),m;function g(){var w=r.val();t.img||(w=!!w&&!!n.val()),i.ui.toggleBtn(h,w)}function x(){D.isSupportTouch||r.trigger("focus")}!t.url&&t.text&&(t.url=this.editor.checkLinkUrl(t.text)),n.val(t.text),r.val(t.url),a.val(t.cssClass),c.val(t.cssStyle),d.val(t.rel),(t.isNewWindow!==void 0?t.isNewWindow:this.options.linkTargetBlank)?u.prop("checked",!0).attr("checked","checked"):u.is(":checked")&&u.prop("checked",!1).removeAttr("checked"),this.ui.onDialogShown(this.$dialog,()=>{this.context.triggerEvent("dialog.shown"),n.on("input paste propertychange",()=>{t.text=U.escape(n.val()),g()}),r.on("input paste propertychange",()=>{t.text||n.val(r.val()),g()}),f.on("click.linkDialog",w=>{w.preventDefault(),m=$.Deferred(b=>{this.context.triggerEvent("file.browse",w,null,b)}).promise(),m.then(b=>{r.val(b).trigger("change").trigger("input")}).always(()=>{x()})}),x(),g(),this.bindEnterKey(r,h),this.bindEnterKey(n,h),this.onCheckLinkUrl(r),h.one("click",w=>{w.preventDefault(),e.resolve({img:t.img,a:t.a,range:t.range,url:r.val(),text:n.val(),cssClasss:a.val(),cssStyle:c.val(),rel:d.val(),isNewWindow:u.is(":checked")}),this.ui.hideDialog(this.$dialog)})}),this.ui.onDialogHidden(this.$dialog,()=>{n.off(),r.off(),h.off(),f.off(),e.state()==="pending"&&e.reject(),m&&m.state()==="pending"&&m.reject()}),this.ui.showDialog(this.$dialog)}).promise()}show(){const t=this.context.invoke("editor.getLinkInfo");this.$dialog.find(".form-group-text").toggle(!t.img),this.showLinkDialog(t).then(e=>{this.context.invoke("editor.selection.restoreBookmark"),this.context.invoke("editor.createLink",e)}).fail(()=>{this.context.invoke("editor.selection.restoreBookmark")})}}class Ta{constructor(t){this.context=t,this.editor=t.modules.editor,this.ui=$.summernote.ui,this.options=t.options,this.events={"summernote.popover.shown":(e,i)=>{i!=this.$popover&&this.hide()},"summernote.keyup summernote.mouseup summernote.change":()=>{this.update()},"summernote.disable summernote.dialog.shown":()=>{this.hide()},"summernote.blur":(e,i)=>{i.originalEvent&&i.originalEvent.relatedTarget?this.$popover[0].contains(i.originalEvent.relatedTarget)||this.hide():this.hide()},"summernote.codeview.toggled":()=>{this.hide()}}}shouldInitialize(){return!p.isEmpty(this.options.popover.link)}initialize(){this.$popover=this.ui.popover({className:"note-link-popover",callback:e=>{e.find(".popover-content,.note-popover-content").prepend('<span class="text-truncate d-inline-block ml-1" style="max-width: 300px"><a target="_blank" class="text-truncate"></a>&nbsp;</span><span class="vr"></span>')}}).render().appendTo(this.options.container);const t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.link),this.$popover.on("mousedown",e=>{e.preventDefault()})}destroy(){this.$popover.remove()}update(){if(!this.context.invoke("editor.hasFocus")){this.hide();return}const t=this.context.invoke("editor.selection.getRange");if(t.collapsed&&t.isOnAnchor()){const e=l.ancestor(t.sc,l.isAnchor),i=$(e).attr("href");this.$popover.find("a").attr("href",i).attr("title",i).text(i),this.editor.showPopover(this.$popover,e)}else this.hide()}hide(){this.editor.hidePopover(this.$popover)}}class Ha{constructor(t){this.context=t,this.editor=t.modules.editor,this.ui=$.summernote.ui,this.$body=$(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo,this.context.memo("button.imageAttributes",()=>{var e=this.ui.button({contents:this.ui.icon(this.options.icons.pencil),tooltip:this.lang.image.imageProps,click:()=>{this.show()}});return e.render()})}initialize(){const t=this.options.dialogsInBody?this.$body:this.options.container,e=['<div class="form-group note-group-image-url">',`	<label for="note-dialog-image-url-${this.options.id}" class="note-form-label">${this.lang.image.url}</label>`,'	<div class="input-group">',`		<input id="note-dialog-image-url-${this.options.id}" class="note-image-src form-control note-form-control note-input" type="text" />`,this.options.callbacks.onFileBrowse?`<div class="input-group-append"><button class="btn btn-secondary btn-browse" type="button">${this.lang.link.browse}...</button></div>`:"","	</div>","</div>",'<div class="form-group note-form-group form-group-text">',`	<label for="note-dialog-image-alt-${this.options.id}" class="note-form-label">Alt</label>`,`	<input id="note-dialog-image-alt-${this.options.id}" class="note-image-alt form-control note-form-control note-input" type="text" />`,"</div>",'<div class="form-group note-form-group form-group-text">',`	<label for="note-dialog-image-title-${this.options.id}" class="note-form-label">Title</label>`,`	<input id="note-dialog-image-title-${this.options.id}" class="note-image-title form-control note-form-control note-input" type="text" />`,"</div>",'<div class="form-group note-form-group">',`	<label for="note-dialog-image-class-${this.options.id}" class="note-form-label">${this.lang.attrs.cssClass}</label>`,`	<input id="note-dialog-image-class-${this.options.id}" class="note-image-class form-control note-form-control note-input" type="text" />`,"</div>",'<div class="form-group note-form-group">',`	<label for="note-dialog-image-style-${this.options.id}" class="note-form-label">${this.lang.attrs.cssStyle}</label>`,`	<input id="note-dialog-image-style-${this.options.id}" class="note-image-style form-control note-form-control note-input" type="text" />`,"</div>"].join(""),i=['<button type="button" class="btn btn-secondary btn-flat" data-dismiss="modal">'+this.lang.common.cancel+"</button>",'<button type="submit" class="btn btn-primary note-image-btn" disabled>'+this.lang.common.ok+"</button>"].join("");this.$dialog=this.ui.dialog({className:"image-dialog",title:this.lang.image.image,fade:this.options.dialogsFade,body:e,footer:i}).render().appendTo(t)}destroy(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()}bindEnterKey(t){this.$dialog.find(".note-input").on("keypress.imageDialog",e=>{if(e.keyCode===H.code.ENTER)return e.preventDefault(),e.stopPropagation(),t.trigger("click"),!1})}show(){let t={},e=$(this.editor.selection.selectedControl);e.length&&(t={img:e,src:e.attr("src"),alt:e.attr("alt"),title:e.attr("title"),cssClass:e.attr("class"),cssStyle:e.attr("style")}),this.showImageDialog(t).then(i=>{this.ui.hideDialog(this.$dialog),this.context.invoke("editor.selection.restoreBookmark");const n=(r,a)=>{a&&l.setAttr(r,"src",this.$dialog.find(".note-image-src").val()),l.setAttr(r,"alt",this.$dialog.find(".note-image-alt").val()),l.setAttr(r,"title",this.$dialog.find(".note-image-title").val()),l.setAttr(r,"class",this.$dialog.find(".note-image-class").val()),l.setAttr(r,"style",this.$dialog.find(".note-image-style").val())};i.img?(n(i.img,!0),this.context.layoutInfo.note.val(this.context.invoke("code")),this.context.layoutInfo.note.change()):this.context.invoke("editor.insertImage",this.$dialog.find(".note-image-src").val(),n)}).fail(()=>{this.context.invoke("editor.selection.restoreBookmark")})}showImageDialog(t){return $.Deferred(e=>{let i=this.$dialog.find(".note-image-src"),n=this.$dialog.find(".note-image-class"),r=this.$dialog.find(".note-image-style"),a=this.$dialog.find(".note-image-alt"),c=this.$dialog.find(".note-image-title"),d=this.$dialog.find(".note-image-btn"),h=this.$dialog.find(".btn-browse"),u;i.on("input.imageDialog",f=>{this.ui.toggleBtn(d,i.val())}),i.val(t.src),n.val(t.cssClass),r.val(t.cssStyle),a.val(t.alt),c.val(t.title),this.ui.toggleBtn(d,t.src),this.ui.onDialogShown(this.$dialog,()=>{this.context.triggerEvent("dialog.shown");function f(){D.isSupportTouch||i.trigger("focus")}f(),h.on("click.imageDialog",m=>{m.preventDefault(),u=$.Deferred(g=>{this.context.triggerEvent("file.browse",m,"image",g)}).promise(),u.then(g=>{i.val(g).trigger("change").trigger("input")}).always(()=>{f()})}),this.bindEnterKey(d),d.one("click",m=>{m.preventDefault(),e.resolve({img:t.img,src:t.src,alt:t.alt,title:t.title,cssClass:t.cssClass,cssStyle:t.cssStyle}),this.ui.hideDialog(this.$dialog)})}),this.ui.onDialogHidden(this.$dialog,()=>{this.$dialog.find(".note-input").off("keypress"),i.off(),d.off(),h.off(),e.state()==="pending"&&e.reject(),u&&u.state()==="pending"&&u.reject()}),this.ui.showDialog(this.$dialog)}).promise()}}class Ra{constructor(t){this.context=t,this.editor=t.modules.editor,this.ui=$.summernote.ui,this.editable=t.layoutInfo.editable[0],this.options=t.options,this.events={"summernote.popover.shown":(e,i)=>{i!=this.$popover&&this.hide()},"summernote.disable summernote.dialog.shown summernote.media.delete":e=>{this.hide()},"summernote.blur":(e,i)=>{var n;(n=i.originalEvent)!=null&&n.relatedTarget?this.$popover[0].contains(i.originalEvent.relatedTarget)||this.hide():this.hide()}}}shouldInitialize(){return!p.isEmpty(this.options.popover.image)}initialize(){this.$popover=this.ui.popover({className:"note-image-popover"}).render().appendTo(this.options.container);const t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.image),this.$popover.on("mousedown",e=>{e.preventDefault()})}destroy(){this.$popover.remove()}update(t,e){if(l.isImg(t)){const i=$(t),n=this.$popover.find(".note-unlink");if(n.length){const r=i.parent().is("a");n.toggle(r)}this.editor.showPopover(this.$popover,t)}else this.hide()}hide(){this.editor.hidePopover(this.$popover)}}class La{constructor(t){this.context=t,this.editor=t.modules.editor,this.ui=$.summernote.ui,this.options=t.options,this.events={"summernote.popover.shown":(e,i)=>{i!=this.$popover&&this.hide()},"summernote.mousedown":(e,i)=>{this.update(i==null?void 0:i.target,i)},"summernote.keyup summernote.change":(e,i)=>{this.update(i==null?void 0:i.target,i)},"summernote.disable summernote.dialog.shown":()=>{this.hide()},"summernote.blur":(e,i)=>{var n;(n=i.originalEvent)!=null&&n.relatedTarget?this.$popover[0].contains(i.originalEvent.relatedTarget)||this.hide():this.hide()},"summernote.codeview.toggled":()=>{this.hide()}}}shouldInitialize(){return!p.isEmpty(this.options.popover.table)}initialize(){this.$popover=this.ui.popover({className:"note-table-popover"}).render().appendTo(this.options.container);const t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.table),D.isFF&&document.execCommand("enableInlineTableEditing",!1,!1),this.$popover.on("mousedown",e=>{e.preventDefault()})}destroy(){this.$popover.remove()}update(t,e){if(this.context.isDisabled())return!1;if((l.isCell(t)||l.isCell(t==null?void 0:t.parentElement))&&!(l.isVoid(t)||l.isAnchor(t)||l.isAnchor(t==null?void 0:t.parentElement))){const r=l.ancestor(t,l.isTable);return r&&this.editor.showPopover(this.$popover,r),!0}return this.hide(),!1}hide(){this.editor.hidePopover(this.$popover)}}class Aa{constructor(t){this.context=t,this.ui=$.summernote.ui,this.options=t.options,this.lang=this.options.langInfo,this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.editable=this.$editable[0],this.editor=t.modules.editor}initialize(){this.context.memo("button.tableStyles",()=>this.ui.buttonGroup([this.ui.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents(this.ui.icon(this.options.icons.css),this.options),tooltip:this.lang.tableStyles.tooltip,click:e=>this.updateTableMenuState($(e.currentTarget)),attrs:{tabindex:-1},data:{toggle:"dropdown"}}),this.ui.dropdownCheck({className:"dropdown-table-style",checkClassName:this.options.icons.menuCheck,items:this.generateListItems(this.options.tableStyles.stylesExclusive,this.lang.tableStyles.stylesExclusive,this.options.tableStyles.stylesInclusive,this.lang.tableStyles.stylesInclusive),callback:e=>{e.on("click","a",i=>{this.updateTableStyles(i.currentTarget)})}})]).render())}updateTableStyles(t){const e=this.editor.createRange();if(e.collapsed&&e.isOnCell()){this.editor.beforeCommand();const i=l.closest(e.commonAncestorContainer,l.isTable);this.updateStyles($(i),t,this.options.tableStyles.stylesExclusive)}}updateTableMenuState(t){const e=this.editor.createRange();if(e.collapsed&&e.isOnCell()){const i=$(l.closest(e.commonAncestorContainer,l.isTable)),n=t.next().find("a");this.updateMenuState(i,n,this.options.tableStyles.stylesExclusive)}}updateMenuState(t,e,i){let n=!1;e.each(function(){let r=$(this).data("value");t.hasClass(r)?($(this).addClass("checked"),$.inArray(r,i)!==-1&&(n=!0)):$(this).removeClass("checked")}),n||e.filter('[data-value=""]').addClass("checked")}updateStyles(t,e,i){const n=$(e).data("value");this.editor.beforeCommand(),$.inArray(n,i)!==-1?(t.removeClass(i.join(" ")),t.addClass(n)):t.toggleClass(n),this.editor.afterCommand()}generateListItems(t,e,i,n){let r="";return p.each(t,(a,c)=>{r+=this.getListItem(a,e[c],!0)}),r+='<div class="dropdown-divider"></div>',p.each(i,(a,c)=>{r+=this.getListItem(a,n[c],!1)}),r}getListItem(t,e,i){return`
      <a href='javascript:;' class='dropdown-item ${i?"exclusive-item":"inclusive-item"}' data-value="${t}">
        <i class="fa fa-check"></i>
        ${e}
      </a>
    `}destroy(){}}class za{constructor(t){this.context=t,this.ui=$.summernote.ui,this.$body=$(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}initialize(){const t=this.options.dialogsInBody?this.$body:this.options.container,e=['<div class="form-group note-form-group row-fluid">',`<label for="note-dialog-video-url-${this.options.id}" class="note-form-label">${this.lang.video.url} <small class="text-muted">${this.lang.video.providers}</small></label>`,`<input id="note-dialog-video-url-${this.options.id}" class="note-video-url form-control note-form-control note-input" type="text"/>`,"</div>"].join(""),n=`<input type="button" href="#" class="btn btn-primary note-video-btn" value="${this.lang.video.insert}" disabled>`;this.$dialog=this.ui.dialog({title:this.lang.video.insert,fade:this.options.dialogsFade,body:e,footer:n}).render().appendTo(t)}destroy(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()}bindEnterKey(t,e){t.on("keypress",i=>{i.keyCode===H.code.ENTER&&(i.preventDefault(),e.trigger("click"))})}createVideoNode(t){const e=/(?:youtu\.be\/|youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=|shorts\/|live\/))([^&\n?]+)(?:.*[?&]t=([^&\n]+))?.*/,i=/^(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/,n=t.match(e),r=/(?:\.|\/\/)drive\.google\.com\/file\/d\/(.[a-zA-Z0-9_-]*)\/view/,a=t.match(r),c=/(?:www\.|\/\/)instagram\.com\/(reel|p)\/(.[a-zA-Z0-9_-]*)/,d=t.match(c),h=/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/,u=t.match(h),f=/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/,m=t.match(f),g=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,x=t.match(g),z=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/,w=t.match(z),b=/\/\/(.*)\/videos\/watch\/([^?]*)(?:\?(?:start=(\w*))?(?:&stop=(\w*))?(?:&loop=([10]))?(?:&autoplay=([10]))?(?:&muted=([10]))?)?/,v=t.match(b),N=/\/\/v\.qq\.com.*?vid=(.+)/,T=t.match(N),J=/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/,F=t.match(J),rt=/^.+.(mp4|m4v)$/,tt=t.match(rt),Z=/^.+.(ogg|ogv)$/,mt=t.match(Z),Xa=/^.+.(webm)$/,tl=t.match(Xa),el=/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/,ye=t.match(el);let Q;if(n&&n[1].length===11){const we=n[1];var Nt=0;if(typeof n[2]<"u"){const xe=n[2].match(i);if(xe)for(var Us=[3600,60,1],Tt=0,sl=Us.length;Tt<sl;Tt++)Nt+=typeof xe[Tt+1]<"u"?Us[Tt]*parseInt(xe[Tt+1],10):0;else Nt=parseInt(n[2],10)}Q=$("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+we+(Nt>0?"?start="+Nt:"")).attr("width","640").attr("height","360")}else if(a&&a[0].length)Q=$("<iframe>").attr("frameborder",0).attr("src","https://drive.google.com/file/d/"+a[1]+"/preview").attr("width","640").attr("height","480");else if(d&&d[0].length)Q=$("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+d[2]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(u&&u[0].length)Q=$("<iframe>").attr("frameborder",0).attr("src",u[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(m&&m[3].length)Q=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+m[3]).attr("width","640").attr("height","360");else if(x&&x[2].length)Q=$("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+x[2]).attr("width","640").attr("height","360");else if(w&&w[1].length)Q=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+w[1]);else if(v&&v[0].length){var ke=0;v[2]!=="undefined"&&(ke=v[2]);var Vs=0;v[3]!=="undefined"&&(Vs=v[3]);var _s=0;v[4]!=="undefined"&&(_s=v[4]);var qs=0;v[5]!=="undefined"&&(qs=v[5]);var Ws=0;v[6]!=="undefined"&&(Ws=v[6]),Q=$('<iframe allowfullscreen sandbox="allow-same-origin allow-scripts allow-popups">').attr("frameborder",0).attr("src","//"+v[1]+"/videos/embed/"+v[2]+"?loop="+_s+"&autoplay="+qs+"&muted="+Ws+(ke>0?"&start="+ke:"")+(Vs>0?"&end="+Nt:"")).attr("width","560").attr("height","315")}else if(T&&T[1].length||F&&F[2].length){const we=T&&T[1].length?T[1]:F[2];Q=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","310").attr("width","500").attr("src","https://v.qq.com/txp/iframe/player.html?vid="+we+"&amp;auto=0")}else if(tt||mt||tl)Q=$("<video controls>").attr("src",t).attr("width","640").attr("height","360");else if(ye&&ye[0].length)Q=$("<iframe>").attr("frameborder",0).attr("src","https://www.facebook.com/plugins/video.php?href="+encodeURIComponent(ye[0])+"&show_text=0&width=560").attr("width","560").attr("height","301").attr("scrolling","no").attr("allowtransparency","true");else return!1;return Q.addClass("note-video-clip"),Q[0]}show(){const t=this.context.invoke("editor.getSelectedText");this.showVideoDialog(t).then(e=>{this.ui.hideDialog(this.$dialog),this.context.invoke("editor.selection.restoreBookmark");const i=this.createVideoNode(e);i&&this.context.invoke("editor.insertNode",i)}).fail(()=>{this.context.invoke("editor.selection.restoreBookmark")})}showVideoDialog(){return $.Deferred(t=>{const e=this.$dialog.find(".note-video-url"),i=this.$dialog.find(".note-video-btn");this.ui.onDialogShown(this.$dialog,()=>{this.context.triggerEvent("dialog.shown"),e.on("input paste propertychange",()=>{this.ui.toggleBtn(i,e.val())}),D.isSupportTouch||e.trigger("focus"),i.on("click",n=>{n.preventDefault(),t.resolve(e.val())}),this.bindEnterKey(e,i)}),this.ui.onDialogHidden(this.$dialog,()=>{e.off(),i.off(),t.state()==="pending"&&t.reject()}),this.ui.showDialog(this.$dialog)})}}class Pa{constructor(t){this.context=t,this.ui=$.summernote.ui,this.$body=$(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}initialize(){const t=this.options.dialogsInBody?this.$body:this.options.container,e=['<p class="text-center small m-0">','<a href="http://summernote.org/" target="_blank" rel="noopener noreferrer">Summernote '+$.summernote.version+"</a> · ",'<a href="https://github.com/smartstore/summernote" target="_blank" rel="noopener noreferrer">Fork</a> ',"</p>"].join("");this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:e,callback:i=>{i.find(".modal-body,.note-modal-body").css({"max-height":350,"overflow-y":"scroll"})}}).render().appendTo(t)}destroy(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()}createShortcutList(){const t=this.options.keyMap[D.isMac?"mac":"pc"],e=$('<div><div class="help-list" style="display: grid; grid-template-columns: max-content 1fr; gap: 6px 16px"></div></div>'),i=e.find(".help-list");return Object.keys(t).forEach(n=>{const r=t[n];i.append($('<div><kbd class="fwm">'+n+"</kdb></div>")).append($("<div></div>").html(this.context.memo("help."+r)||r))}),e.html()}showHelpDialog(){return $.Deferred(t=>{this.ui.onDialogShown(this.$dialog,()=>{this.context.triggerEvent("dialog.shown"),t.resolve()}),this.ui.showDialog(this.$dialog)}).promise()}show(){this.showHelpDialog().then(()=>{this.context.invoke("editor.selection.restoreBookmark")})}}function Ma(s){const t=$(document);return{top:s.top+t.scrollTop(),left:s.left+t.scrollLeft(),width:s.right-s.left,height:s.bottom-s.top}}const Ba={rect2bnd:Ma,rgbaToHexString:s=>s},Bs=5;class Ia{constructor(t){this.context=t,this.editor=t.modules.editor,this.ui=$.summernote.ui,this.$editable=t.layoutInfo.editable,this.options=t.options,this.hint=this.options.hint||[],this.direction=this.options.hintDirection||"bottom",this.hints=Array.isArray(this.hint)?this.hint:[this.hint],this.events={"summernote.keyup":(e,i)=>{i.isDefaultPrevented()||this.handleKeyup(i)},"summernote.keydown":(e,i)=>{this.handleKeydown(i)},"summernote.disable summernote.dialog.shown summernote.blur":()=>{this.hide()}}}shouldInitialize(){return this.hints.length>0}initialize(){this.lastWordRange=null,this.matchingWord=null,this.$popover=this.ui.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo(this.options.container),this.$popover.hide(),this.$content=this.$popover.find(".popover-content,.note-popover-content"),this.$content.on("click",".note-hint-item",t=>{this.$content.find(".active").removeClass("active"),$(t.currentTarget).addClass("active"),this.replace()}),this.$popover.on("mousedown",t=>{t.preventDefault()})}destroy(){this.$popover.remove()}selectItem(t){this.$content.find(".active").removeClass("active"),t.addClass("active"),this.$content[0].scrollTop=t[0].offsetTop-this.$content.innerHeight()/2}moveDown(){const t=this.$content.find(".note-hint-item.active"),e=t.next();if(e.length)this.selectItem(e);else{let i=t.parent().next();i.length||(i=this.$content.find(".note-hint-group").first()),this.selectItem(i.find(".note-hint-item").first())}}moveUp(){const t=this.$content.find(".note-hint-item.active"),e=t.prev();if(e.length)this.selectItem(e);else{let i=t.parent().prev();i.length||(i=this.$content.find(".note-hint-group").last()),this.selectItem(i.find(".note-hint-item").last())}}replace(){const t=this.$content.find(".note-hint-item.active");if(t.length){var e=this.nodeFromItem(t);if(this.matchingWord!==null&&this.matchingWord.length===0)this.lastWordRange.so=this.lastWordRange.eo;else if(this.matchingWord!==null&&this.matchingWord.length>0&&!this.lastWordRange.collapsed){let n=this.lastWordRange.eo-this.lastWordRange.so-this.matchingWord.length;n>0&&(this.lastWordRange.so+=n)}if(this.lastWordRange.insertNode(e),this.options.hintSelect==="next"){var i=document.createTextNode("");$(e).after(i),this.editor.selection.setRange(S.createFromNodeBefore(i))}else this.editor.selection.setRange(S.createFromNodeAfter(e));this.lastWordRange=null,this.hide(),this.context.invoke("editor.focus"),this.context.triggerEvent("change",this.$editable)}}nodeFromItem(t){const e=this.hints[t.data("index")],i=t.data("item");let n=e.content?e.content(i):i;return typeof n=="string"&&(n=l.createText(n)),n}createItemTemplates(t,e){const i=this.hints[t];return e.map((n,r)=>{const a=$('<div class="note-hint-item"></div>');return a.append(i.template?i.template(n):n+""),a.data({index:t,item:n}),t===0&&r===0&&a.addClass("active"),a})}handleKeydown(t){this.$popover.is(":visible")&&(t.keyCode===H.code.ENTER?(t.preventDefault(),this.replace()):t.keyCode===H.code.UP?(t.preventDefault(),this.moveUp()):t.keyCode===H.code.DOWN&&(t.preventDefault(),this.moveDown()))}searchKeyword(t,e,i){const n=this.hints[t];if(n&&n.match.test(e)&&n.search){const r=n.match.exec(e);this.matchingWord=r[0],n.search(r[1],i)}else i()}createGroup(t,e){const i=$('<div class="note-hint-group note-hint-group-'+t+'"></div>');return this.searchKeyword(t,e,n=>{n=n||[],n.length&&(i.html(this.createItemTemplates(t,n)),this.show())}),i}handleKeyup(t){if(!p.contains([H.code.ENTER,H.code.UP,H.code.DOWN],t.keyCode)){let e=this.context.invoke("editor.selection.getRange"),i,n;if(this.options.hintMode==="words"){if(i=e.getWordsRange(e),n=i.toString(),this.hints.forEach(r=>{if(r.match.test(n))return i=e.getWordsMatchRange(r.match),!1}),!i){this.hide();return}n=i.toString()}else i=e.getWordRange(),n=i.toString();if(this.hints.length&&n){this.$content.empty();const r=Ba.rect2bnd(p.last(i.getClientRects())),a=$(this.options.container).offset();r&&(r.top-=a.top,r.left-=a.left,this.$popover.hide(),this.lastWordRange=i,this.hints.forEach((c,d)=>{c.match.test(n)&&this.createGroup(d,n).appendTo(this.$content)}),this.$content.find(".note-hint-item").first().addClass("active"),this.direction==="top"?this.$popover.css({left:r.left,top:r.top-this.$popover.outerHeight()-Bs}):this.$popover.css({left:r.left,top:r.top+r.height+Bs}))}else this.hide()}}show(){this.$popover.show()}hide(){this.$popover.hide()}}const fe=s=>l.isInline(s);class Da{constructor(t){this.context=t,this.ui=$.summernote.ui,this.$body=$(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo,this.buttons=t.modules.buttons,this.editor=t.modules.editor,this.selection=this.editor.selection}initialize(){this.addFormats(),this.initializeButtons(),$(".note-toolbar",this.$editor).on("click",".btn-group-cssclass .dropdown-item",t=>{t.preventDefault(),t.stopPropagation(),this.refreshDropdown($(t.currentTarget).parent())}),$(".note-toolbar",this.$editor).on("mousedown",".btn-group-cssclass > .btn",t=>{this.refreshDropdown($(t.currentTarget).next())})}addFormats(){typeof this.options.cssclass>"u"&&(this.options.cssclass={});const t=/^alert(-.+)?$/,e=/^btn(-.+)?$/,i=/^bg-.+$/,n=/^text-(muted|primary|success|danger|warning|info|dark|white)$/,r=/^fs-(xs|sm)$/,a=/^display-[1-4]$/,c=/^w-(25|50|75|100)$/,d=/^rounded(-.+)?$/,h={imageShapes:{"img-fluid":{inline:!0},border:{inline:!0},rounded:{toggle:/^(rounded(-.+)?)|img-thumbnail$/,inline:!0},"rounded-circle":{toggle:/^(rounded(-.+)?)|img-thumbnail$/,inline:!0},"img-thumbnail":{toggle:/^rounded(-.+)?$/,inline:!0},"shadow-sm":{toggle:/^(shadow(-.+)?)$/,inline:!0},shadow:{toggle:/^(shadow(-.+)?)$/,inline:!0},"shadow-lg":{toggle:/^(shadow(-.+)?)$/,inline:!0}},formats:{"fs-xs":{inline:!0,toggle:r},"fs-sm":{inline:!0,toggle:r},lead:{},"display-4":{displayClass:"fs-h4",toggle:a},"display-3":{displayClass:"fs-h3",toggle:a},"display-2":{displayClass:"fs-h2",toggle:a},"display-1":{displayClass:"fs-h1",toggle:a},"alert alert-primary":{toggle:t},"alert alert-secondary":{toggle:t},"alert alert-success":{toggle:t},"alert alert-danger":{toggle:t},"alert alert-warning":{toggle:t},"alert alert-info":{toggle:t},"alert alert-light":{toggle:t},"alert alert-dark":{toggle:t},"bg-primary":{displayClass:"px-2 py-1 text-white",inline:!0,toggle:i},"bg-secondary":{displayClass:"px-2 py-1",inline:!0,toggle:i},"bg-success":{displayClass:"px-2 py-1 text-white",inline:!0,toggle:i},"bg-danger":{displayClass:"px-2 py-1 text-white",inline:!0,toggle:i},"bg-warning":{displayClass:"px-2 py-1 text-white",inline:!0,toggle:i},"bg-info":{displayClass:"px-2 py-1 text-white",inline:!0,toggle:i},"bg-light":{displayClass:"px-2 py-1",inline:!0,toggle:i},"bg-dark":{displayClass:"px-2 py-1 text-white",inline:!0,toggle:i},"bg-white":{displayClass:"px-2 py-1 border",inline:!0,toggle:i},rtl:{displayClass:"text-uppercase",inline:!0,toggle:/^ltr$/},ltr:{displayClass:"text-uppercase",inline:!0,toggle:/^rtl$/},"text-muted":{inline:!0,toggle:n},"text-primary":{inline:!0,toggle:n},"text-success":{inline:!0,toggle:n},"text-danger":{inline:!0,toggle:n},"text-warning":{inline:!0,toggle:n},"text-info":{inline:!0,toggle:n},"text-dark":{inline:!0,toggle:n},"text-white":{displayClass:"bg-gray",inline:!0,toggle:n},"font-weight-medium":{inline:!0},"w-25":{displayClass:"px-2 py-1 bg-light border",toggle:c},"w-50":{displayClass:"px-2 py-1 bg-light border",toggle:c},"w-75":{displayClass:"px-2 py-1 bg-light border",toggle:c},"w-100":{displayClass:"px-2 py-1 bg-light border",toggle:c},"btn btn-primary":{inline:!0,toggle:e,predicate:"a"},"btn btn-secondary":{inline:!0,toggle:e,predicate:"a"},"btn btn-success":{inline:!0,toggle:e,predicate:"a"},"btn btn-danger":{inline:!0,toggle:e,predicate:"a"},"btn btn-warning":{inline:!0,toggle:e,predicate:"a"},"btn btn-info":{inline:!0,toggle:e,predicate:"a"},"btn btn-light":{inline:!0,toggle:e,predicate:"a"},"btn btn-dark":{inline:!0,toggle:e,predicate:"a"},"rounded-0":{displayClass:"px-2 py-1 bg-light border",toggle:d},"rounded-1":{displayClass:"px-2 py-1 bg-light border rounded-1",toggle:d},"rounded-2":{displayClass:"px-2 py-1 bg-light border rounded-2",toggle:d},"rounded-3":{displayClass:"px-2 py-1 bg-light border rounded-3",toggle:d},"rounded-4":{displayClass:"px-2 py-2 bg-light border rounded-4",toggle:d},"rounded-5":{displayClass:"px-2 py-2 bg-light border rounded-5",toggle:d},"rounded-pill":{displayClass:"px-2 py-1 bg-light border rounded-pill",toggle:d},"list-unstyled":{}}};this.options.cssclass=$.extend(!0,h,this.options.cssclass)}initializeButtons(){this.context.memo("button.cssclass",()=>this.ui.buttonGroup({className:"btn-group-cssclass",children:[this.ui.button({className:"dropdown-toggle",contents:this.ui.icon("fab fa-css3"),tooltip:this.lang.attrs.cssClass,data:{toggle:"dropdown"}}),this.ui.dropdown({className:"dropdown-cssclass scrollable-menu scrollbar-thin",items:_.keys(this.options.cssclass.formats),template:t=>{const e=this.options.cssclass.formats[t]||{};let i=t;e.displayClass&&(i+=" "+e.displayClass),e.inline||(i+=" d-block");const n=e.style?' style="{0}"'.format(e.style):"";return`<span class="${i}" title="${t}"${n}>${t}</span>`},click:(t,e,i)=>{t.preventDefault();var n=$(t.target).closest("[data-value]");i=i||n.data("value");var r=this.options.cssclass.formats[i]||{};this.applyClassToSelection(i,r)}})]}).render()),this.context.memo("button.imageShapes",()=>{const t=Object.keys(this.options.cssclass.imageShapes);return this.ui.buttonGroup({className:"btn-group-imageshape",children:[this.ui.button({className:"dropdown-toggle",contents:this.ui.icon("fab fa-css3"),tooltip:this.lang.imageShapes.tooltip,click:i=>{this.refreshDropdown($(i.currentTarget).next(),$(this.selection.selectedControl),!0)},data:{toggle:"dropdown"}}),this.ui.dropdownCheck({className:"dropdown-shape",checkClassName:this.options.icons.menuCheck,items:t,template:i=>{const n=t.indexOf(i);return this.lang.imageShapes.tooltipShapeOptions[n]},click:i=>{i.preventDefault();const r=$(i.target).closest("[data-value]").data("value"),a=this.options.cssclass.imageShapes[r]||{};this.applyClassToSelection(r,a)}})]}).render()})}applyClassToSelection(t,e){let i=this.selection.getRange();if(!this.selection.isValidRange(i))return;const n=this.selection.selectedControl;let r=i.sc;const a=l.isElement(r);a||(r=r.parentNode);const c=i.collapsed,d=h=>{const u=$(h);if(u.is("."+t.replace(" ",".")))u.removeClass(t),u.attr("class")||u.removeAttr("class"),fe(h)&&!h.attributes.length&&u.replaceWith(u.html());else{if(e.toggle){const f=(u.attr("class")||"").split(" ");_.each(f,m=>{m&&m!==t&&e.toggle.test(m)&&u.removeClass(m)})}u.toggleClass(t)}return h};if(this.editor.beforeCommand(),n)e.inline&&d(n);else if(!e.inline)fe(r)&&(r=l.closest(r,h=>!fe(h))),r&&!l.isEditableRoot(r)&&d(r);else if(e.inline&&(c||a))d(r);else{const h=this.editor.style.styleNodes(i).map(d);this.selection.setRange(S.createFromNodes(h),null,!0)}this.editor.afterCommand()}refreshDropdown(t,e,i){e=e||$(this.selection.nativeSelection.focusNode,".note-editable"),t.find("> .dropdown-item").each(function(){let n=$(this),r=e,a=n.data("value"),c="."+a.replace(" ","."),d=!1;for(;r.length;){if(r.is(c)){d=!0;break}if(i||l.isEditableRoot(r))break;r=r.parent()}n.toggleClass("checked",d)})}destroy(){}}const Is=60,Oa=["da","de","en","es","et","fi","fr","hu","it","ja","ko","lt","ms","nb","nl","pl","pt","ru","th","uk","zh"],Fa=new Map(["🧑‍🦰","🧑‍🦱","🧑‍🦳","🧑‍🦲","🧑‍⚕️","🧑‍🏭","🧑‍💼","🧑‍🔬","🧑‍💻","🧑‍🎤","🧑‍🎨","🧑‍✈️","🧑‍🎓","🧑‍🏫","🧑‍⚖️","🧑‍🌾","🧑‍🍳","🧑‍🔧","🧑‍🚀","🧑‍🚒","🧑‍🦯","🧑‍🦼","🧑‍🦽"].map(s=>[s,!0])),Ds=(s,t)=>{var e;if(t&&((e=s==null?void 0:s.skins)!=null&&e.length))for(let i of s.skins){if(i.tone===t)return i.emojiBase=s.emoji,i;if(Array.isArray(i.tone)&&i.tone.some(n=>n===t))return i.emojiBase=s.emoji,i}return s},me=(s,t)=>(s=Array.isArray(s)?s:[s],t>>>0&&t<=5&&(s=s.map(e=>Ds(e,t))),s),ft=class ft{constructor(t,e,i,n){at(this,Wt);at(this,ut,[]);at(this,pt,new Map);at(this,dt,new Map);at(this,Et,[]);if(!t||!n)throw new Error("Call EmojiDb.create() first");st(this,Wt,Zs).call(this,t,e,i,n)}static isReady(){return A(this,nt)!==null}static async create(t,e){const i=()=>(e==null||e.apply(this,[A(this,nt)]),A(this,nt));if(A(this,nt))return i();if(!t.options.emojiCdnUrl)throw new Error("Emoji CDN URL is not set in options. Please set it in the summernote options.");for(;A(this,vt);)if(await new Promise(c=>setTimeout(c,50)),A(this,nt))return i();const n=t.options.lang.split("-")[0].toLowerCase(),r=Oa.includes(n)?n:"en",a=t.options.emojiCdnUrl.endsWith("/")?t.options.emojiCdnUrl.slice(0,-1):t.options.emojiCdnUrl;Ct(this,vt,!0);try{let c={cache:"default"},d,h,u,f,m;[d,h,u,f,m]=await Promise.all([st(this,G,yt).call(this,`${a}/${r}/data.json`,c),st(this,G,yt).call(this,`${a}/${r}/messages.json`,c),st(this,G,yt).call(this,`${a}/${r}/shortcodes/cldr.json`,c),st(this,G,yt).call(this,`${a}/en/shortcodes/github.json`,c),st(this,G,yt).call(this,`${a}/meta/groups.json`,c)]);const g=st(this,G,Gs).call(this,u,f);return Ct(this,nt,new this(d,h,g,m)),i()}finally{Ct(this,vt,!1)}}getSkinTones(){const t=e=>{switch(e){case"light":return"#FFDBB4";case"medium-light":return"#EDB98A";case"medium":return"#D08B5B";case"medium-dark":return"#AE5D29";case"dark":return"#713E1D";default:return"#FFDC5D"}};return A(this,Et).map((e,i)=>({id:i+1,key:e.key,label:e.message,color:t(e.key)}))}getGroup(t){return A(this,dt).get(Number(t))}getGroups(){return A(this,dt).values()}getEmojis(t,e){var n;if(t==-1)return st(n=ft,G,Se).call(n).map(c=>{const d=c.split(":"),h=d.length>1&&d[1]||0;return this.getEmoji(d[0],Number(h))}).filter(Boolean);const i=A(this,dt).get(Number(t));return i?e&&i.hasSkinTones?me(i.emojis,e):i.emojis:[]}isCombinedEmoji(t){return Fa.has(t)}findEmojis(t,e){const i=t.toLowerCase(),n=A(this,ut).filter(r=>{var a,c;return r.label.toLowerCase().includes(i)||((a=r.tags)==null?void 0:a.some(d=>d.includes(i)))||((c=r.shortcodes)==null?void 0:c.some(d=>d.includes(i)))});return me(n,e)}findEmojisByShortcode(t,e){const i=A(this,ut).filter(n=>{var r;return(r=n.shortcodes)==null?void 0:r.some(a=>a.includes(t))});return me(i,e)}getEmoji(t,e){const i=A(this,pt).get(t)||A(this,pt).get(t.toLowerCase());return Ds(i,e)}addRecentEmoji(t,e){var r;let i=st(r=ft,G,Se).call(r),n=e?`${t}:${e}`:t;i=i.filter(a=>a!==n),i.unshift(n),i.length>Is&&(i=i.slice(0,Is)),localStorage.setItem("note:emojis:recent",JSON.stringify(i))}hasRecentEmojis(){return localStorage.getItem("note:emojis:recent")!==null}};nt=new WeakMap,vt=new WeakMap,ut=new WeakMap,pt=new WeakMap,dt=new WeakMap,Et=new WeakMap,G=new WeakSet,yt=async function(t){const e=await fetch(t);if(!e.ok)throw new Error(`Failed to load ${t}`);return e.json()},Gs=function(t={},e={}){const i={...t};for(const[n,r]of Object.entries(e))if(n in i){const a=i[n];if(a===r)continue;i[n]=Array.isArray(a)?[...a,r]:[a,r]}else i[n]=r;return i},Wt=new WeakSet,Zs=function(t,e,i,n){Ct(this,ut,t.filter(a=>a.version<13&&E.isNumber(a.group)&&!this.isCombinedEmoji(a.emoji)));const r=a=>{switch(a){case"smileys-emotion":return"😀";case"people-body":return"🧑";case"component":return"🍔";case"animals-nature":return"🐻";case"food-drink":return"🍔";case"travel-places":return"🚀";case"activities":return"⚽";case"objects":return"💡";case"symbols":return"❤️";case"flags":return"🏳️‍🌈";default:return"❓"}};Object.entries(n.groups).forEach(([a,c])=>{var d;c!="component"&&A(this,dt).set(Number(a),{id:a,key:c,name:((d=e.groups[Number(a)])==null?void 0:d.message)||c,icon:r(c),emojis:[]})}),A(this,ut).forEach(a=>{var h,u;const c=a.group==2?8:a.group,d=A(this,dt).get(c);if(d){if(d.emojis.push(a),A(this,pt).set(a.emoji,a),(h=a.skins)!=null&&h.length&&(d.hasSkinTones=!0),a.hexcode){const f=i[a.hexcode];f&&(a.shortcodes=Array.isArray(f)?f:[f])}(u=a.shortcodes)==null||u.forEach(f=>{A(this,pt).set(`:${f}:`,a)})}}),Ct(this,Et,e.skinTones)},Se=function(){try{return JSON.parse(localStorage.getItem("note:emojis:recent"))||[]}catch{return[]}},at(ft,G),at(ft,nt,null),at(ft,vt,!1);let Vt=ft;class ja{constructor(t){this.context=t,this.ui=$.summernote.ui,this.$note=t.layoutInfo.note,this.options=t.options,this.lang=this.options.langInfo,this.editor=t.modules.editor,this.selection=this.editor.selection,this.$btn=null,this.marker=null,this.$popover=null}initialize(){this.context.memo("button.emoji",()=>this.ui.button({className:"note-btn-emoji",contents:this.ui.icon(this.options.icons.smiley),tooltip:this.lang.emoji.emoji,data:{initialized:!1},callback:t=>{this.$btn=t,t.on("click",async e=>(e.preventDefault(),this.$popover?t.hasClass("active")?this.closePopover(e):this.showPopover():(this.$popover=this.createPopover(),this.showPopover(),await this.initializePopover(this.$popover)),!1))}}).render())}showPopover(){if(this.selection.selectedControl)return;this.$btn.addClass("active");const t=this.editor.getLastRange();this.marker=document.createElement("span"),this.marker.className="note-marker note-emoji-marker",this.marker.textContent="​",t.getNativeRange().insertNode(this.marker),this.editor.showPopover(this.$popover,this.marker,"bottom","viewport")}closePopover(t){var e;this.$popover&&(E.isNullOrUndefined(t)||!$(t.target).closest(".note-emoji-popover").length)&&(this.$btn.removeClass("active"),this.editor.hidePopover(this.$popover),(e=this.marker)==null||e.remove(),this.marker=null)}createPopover(){const t=this.ui.popover({className:"note-emoji-popover"}).render().appendTo(this.options.container).on("mousedown",e=>e.preventDefault());return t.find("> .popover-content").removeClass("note-toolbar").addClass("popover-content-emoji").html('<div class="text-center py-3"><div class="spinner-border text-primary" role="status"></div></div>'),$(document).on("mousedown",e=>this.closePopover(e)),t}async initializePopover(t){const e=await Vt.create(this.context);await this.buildPicker(t,e)}async buildPicker(t,e){const i=t.find("> .popover-content");try{const n=$("<div>").addClass("nav nav-tabs nav-tabs-line nav-emoji mb-2");if(this.$nav=n,e.hasRecentEmojis()){const g=$("<a>").addClass("nav-link p-2").attr({href:"#",title:this.lang.emoji.recent,"data-group":-1}).text("🕒");n.append(g)}e.getGroups().forEach(g=>{const x=$("<a>").addClass("nav-link p-2").attr({href:"#",title:`${g.name} (${g.emojis.length})`,"data-group":g.id}).text(g.icon);n.append(x)});const r=$("<form>").addClass("note-emoji-searchbox d-flex align-items-center gap-3"),a=$("<input>").addClass("form-control form-control-sm note-emoji-searchterm bg-secondary").attr("placeholder",this.lang.emoji.search).attr("type","text"),c=this.$toneChooser=$("<div>").addClass("note-emoji-skin-list d-flex align-items-center gap-2 pr-1 d-none"),d=$("<span>").addClass("note-emoji-skin").attr({title:"Default skin tone","data-tone":0});c.append(d);for(let g of e.getSkinTones()){const x=$("<span>").addClass("note-emoji-skin").css("--c",g.color).attr({title:g.label,"data-tone":g.id});c.append(x)}const h=localStorage.getItem("note:emojis:tone")||0;c.find(`.note-emoji-skin[data-tone=${h}]`).addClass("active"),r.append(a).append(c);const u=$("<div>").addClass("note-emoji-list scrollbar-thin d-flex flex-wrap");i.empty().append(n).append(r).append(u),this.$note.on("summernote.popover.shown",(g,x)=>{x==this.$popover&&setTimeout(()=>a.trigger("focus"),0)}).on("summernote.popover.hidden",(g,x)=>{x==this.$popover&&this.editor.selection.restoreBookmark()}),i.on("click",g=>{g.stopPropagation()}),n.on("click",".nav-link",g=>{g.preventDefault();const x=$(g.currentTarget);if(x.hasClass("active"))return;n.find(".nav-link").removeClass("active"),x.addClass("active");const z=x.data("group");z==-10?this.searchEmojis(e,this.lastSearchTerm,u):this.activateGroup(e,z,u)}),a.on("keydown keyup mousedown mouseup click",g=>{g.stopPropagation(),g.type=="mousedown"?$(document.body).one("click.emoji",x=>{x.stopPropagation(),$(document.body).off("click.emoji")}):g.type=="mouseup"&&$(document.body).off("click.emoji")}),c.on("click",".note-emoji-skin",g=>{if($(g.currentTarget).hasClass("active"))return;c.find("> .note-emoji-skin").removeClass("active");const x=$(g.currentTarget).addClass("active").data("tone");localStorage.setItem("note:emojis:tone",x);const z=this.currentGroupId;z==-10?this.searchEmojis(e,this.lastSearchTerm,u,!1):this.activateGroup(e,z,u,!1)}),u.on("click",".note-emoji",g=>{this.insertEmoji(e,$(g.currentTarget))});const f=y.debounce(g=>{this.searchEmojis(e,g,u)},180,!1);a.on("input",g=>{const x=g.target.value.toLowerCase().trim();f(x)});const m=n.find("> .nav-link").first().addClass("active");this.activateGroup(e,m.data("group"),u)}catch(n){i.html(`<div class="text-danger p-2">Failed to load emojis: ${n}</div>`)}}get currentGroupId(){return this.$nav.find("> .nav-link.active").data("group")}get currentSkinTone(){var t;return((t=this.$toneChooser)==null?void 0:t.find("> .note-emoji-skin.active").data("tone"))||0}activateGroup(t,e,i,n=!0){var r;i.empty(),this.$nav.find(`> .nav-link[data-group=${e}]`).addClass("active"),this.$toneChooser.toggleClass("d-none",!((r=t.getGroup(e))!=null&&r.hasSkinTones)),t.getEmojis(e,this.currentSkinTone).forEach(a=>this.renderEmoji(a,i)),this.lastActiveGroup=e,n&&i.scrollTop(0)}searchEmojis(t,e,i,n=!0){if(i.empty(),this.lastSearchTerm||(this.$nav.find("> .nav-link.active").removeClass("active"),this.$nav.prepend(`<a class="nav-link nav-link-search p-2 active" href="#" title="${this.lang.common.search}" data-group="-10">🔍️</a>`)),this.lastSearchTerm=e,e.length===0){this.$nav.find(".nav-link-search").remove(),this.activateGroup(t,this.lastActiveGroup,i);return}else this.$toneChooser.removeClass("d-none"),this.$nav.find("> .nav-link.active").removeClass("active"),this.$nav.find(".nav-link-search").addClass("active"),e.length===1?i.html('<div class="text-center w-100">'+this.lang.emoji.typeTwo+"</div>"):t.findEmojis(e,this.currentSkinTone).forEach(r=>{this.renderEmoji(r,i)});n&&i.scrollTop(0)}renderEmoji(t,e){const i=$("<button>").addClass("note-emoji btn btn-clear-dark btn-icon btn-sm").toggleClass("combined",t.combined).attr("title",t.label).attr("type","button").attr("data-tone",t.tone||0).text(t.emoji);t.emojiBase&&i.attr("data-emoji-base",t.emojiBase),e.append(i)}insertEmoji(t,e){this.editor.selection.restoreBookmark(),this.editor.insertText(e.text(),!1),t.addRecentEmoji(e.data("emoji-base")||e.text(),e.data("tone"))}destroy(){var t;(t=this.$popover)==null||t.remove(),this.$popover=null}}class Ua{constructor(t){this.context=t,this.ui=$.summernote.ui,this.$note=t.layoutInfo.note,this.$editor=t.layoutInfo.editor,this.$toolbar=t.layoutInfo.toolbar,this.options=t.options,this.lang=this.options.langInfo,this.buttons=t.modules.buttons,this.editor=t.modules.editor,this.selection=this.editor.selection,this.popper=null,this.marker=null,this.queryRange=null}initialize(){this.$note.on("summernote.keyup",async(e,i)=>{(/^[a-z0-9:]$/i.test(i.key)||i.key==="Backspace")&&await this.checkForTrigger()}),this.$note.on("summernote.keydown",(e,i)=>{var n;(n=this.$picker)!=null&&n.is(":visible")&&[38,40,13,27].includes(i.keyCode)&&(i.preventDefault(),this.handleKeyNav(i))});const t=e=>{this.$picker&&($(e.target).closest(".note-emoji-suggestions").length||this.destroyPicker())};$(document).on("click",t),this.$note.on("summernote.blur",(e,i)=>t(i))}async loadEmojiDb(){this.db||(this.db=await Vt.create(this.context))}handleKeyNav(t){if(!this.$picker)return;const e=this.$picker.find("> .dropdown-item"),i=e.filter(".active");let n=e.index(i);switch(t.keyCode){case 38:n=Math.max(0,n-1);break;case 40:n=Math.min(e.length-1,n+1);break;case 13:i.length&&this.insertEmoji(i.data("emoji"));return;case 27:return this.destroyPicker()}e.removeClass("active").eq(n).addClass("active")}async checkForTrigger(){const t=this.selection.nativeSelection.getRangeAt(0);if(!t||!t.collapsed)return;const e=t.startContainer,i=t.startOffset;if(!l.isText(e))return this.destroyPicker();const n=e.textContent.substring(0,i),r=n.match(/([^\s:]*)(:([^\s:]*))$/);if(r){const a=r[1],c=r[2],d=r[3];if(!n.match(/:\/\/\S*$/)&&!a.match(/[a-z0-9]$/i)){const h=n.length-c.length;return this.queryRange=S.create(e,h,e,i),await this.showPicker(d)}}return this.destroyPicker()}async showPicker(t){const e=n=>n.shortcodes.find(r=>r.includes(t)),i=this.createPicker().empty();if(t.length>=2){await this.loadEmojiDb();const n=this.db.findEmojisByShortcode(t);if(n.length>0)n.slice(0,8).forEach(r=>{const a=e(r);$(`
            <a href="#" class="dropdown-item dropdown-item-suggestion" data-emoji="${r.emoji}">
              <span class="fa-fw">${r.emoji}</span>
              <span class="text-truncate" style="max-width: 250px" title="${a}">${a}</span>
            </a>
          `).appendTo(i)});else return this.destroyPicker()}else $(`<a href="#" class="dropdown-item disabled" disabled>😉 ${this.lang.emoji.typeTwo}</a>`).appendTo(i);return i.children().first().addClass("active"),this.popper?this.popper.scheduleUpdate():(this.queryRange&&!this.marker&&(this.marker=document.createElement("span"),this.marker.className="note-marker note-emoji-marker",this.marker.textContent="​",this.queryRange.getNativeRange().insertNode(this.marker)),this.popper=new Popper(this.marker,i[0],{placement:"bottom-start",removeOnDestroy:!0,modifiers:{preventOverflow:{boundariesElement:"viewport"}}})),i.show(),!0}insertEmoji(t){var e;if(!this.queryRange)return!1;this.editor.beforeCommand(),this.queryRange.pasteText(t),this.selection.setRange(this.queryRange),this.destroyPicker(),(e=this.db)==null||e.addRecentEmoji(t),this.editor.afterCommand()}createPicker(){return this.$picker||(this.$picker=$(`
        <div class="note-emoji-suggestions dropdown-menu" style="z-index: 9999"></div>
      `).appendTo("body").hide().on("mousedown click",".dropdown-item-suggestion",t=>{if(t.preventDefault(),t.type==="mousedown")t.stopPropagation();else{const e=$(t.currentTarget).data("emoji");this.insertEmoji(e)}})),this.$picker}destroyPicker(){return this.queryRange=null,this.popper&&(this.popper.destroy(),this.popper=null),this.$picker&&(this.$picker=null),this.marker&&(this.marker.remove(),this.marker=null),!1}}$.summernote=$.extend($.summernote,{version:"0.9.1",plugins:{},dom:l,range:S,lists:p,options:{langInfo:$.summernote.lang["en-US"],editing:!0,modules:{editor:ua,clipboard:pa,dropzone:fa,codeview:ma,statusbar:ga,fullscreen:ba,handle:va,hintPopover:Ia,inlineEmoji:Ua,autoLink:ka,autoSync:wa,autoReplace:xa,placeholder:$a,cssclass:Da,emoji:ja,tableStyles:Aa,buttons:Sa,toolbar:Ea,linkDialog:Na,linkPopover:Ta,imageDialog:Ha,imagePopover:Ra,tablePopover:La,videoDialog:za,helpDialog:Pa},buttons:{},lang:"en-US",followingToolbar:!0,toolbarPosition:"top",otherStaticBar:"",codeviewKeepButton:!1,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popatmouse:!0,popover:{image:[["resize",["resizeFull","resizeHalf","resizeQuarter","resizeNone"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]],["view",["fullscreen","codeview"]]]},linkAddNoReferrer:!1,addLinkNoOpener:!1,airMode:!1,overrideContextMenu:!1,width:null,height:null,linkTargetBlank:!0,focus:!1,tabDisable:!1,tabSize:4,styleWithCSS:!1,shortcuts:!0,textareaAutoSync:!0,tooltip:"auto",container:null,maxTextLength:0,blockquoteBreakingLevel:2,spellCheck:!0,disableGrammar:!1,placeholder:null,inheritPlaceholder:!1,recordEveryKeystroke:!1,historyLimit:200,prettifyHtml:!0,showDomainOnlyForAutolink:!1,hintMode:"word",hintSelect:"after",hintDirection:"bottom",styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],addDefaultFonts:!0,fontSizes:["8","9","10","11","12","14","18","24","36"],fontSizeUnits:["px","pt"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],colorsName:[["Black","Tundora","Dove Gray","Star Dust","Pale Slate","Gallery","Alabaster","White"],["Red","Orange Peel","Yellow","Green","Cyan","Blue","Electric Violet","Magenta"],["Azalea","Karry","Egg White","Zanah","Botticelli","Tropical Blue","Mischka","Twilight"],["Tonys Pink","Peach Orange","Cream Brulee","Sprout","Casper","Perano","Cold Purple","Careys Pink"],["Mandy","Rajah","Dandelion","Olivine","Gulf Stream","Viking","Blue Marguerite","Puce"],["Guardsman Red","Fire Bush","Golden Dream","Chelsea Cucumber","Smalt Blue","Boston Blue","Butterfly Bush","Cadillac"],["Sangria","Mai Tai","Buddha Gold","Forest Green","Eden","Venice Blue","Meteorite","Claret"],["Rosewood","Cinnamon","Olive","Parsley","Tiber","Midnight Blue","Valentino","Loulou"]],colorButton:{foreColor:"#000000",backColor:"#FFFF00"},lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",tableStyles:{stylesExclusive:["","table-bordered"],stylesInclusive:["table-striped","table-sm","table-hover"]},insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,acceptImageFileTypes:"image/*",allowClipboardImagePasting:!0,callbacks:{onBeforeCommand:null,onBlur:null,onBlurCodeview:null,onChange:null,onChangeCodeview:null,onDialogShown:null,onEnter:null,onFocus:null,onFileBrowse:null,onImageLinkInsert:null,onImageUpload:null,onImageUploadError:null,onPrettifyHtml:null,onPurifyHtml:null,onInit:null,onKeydown:null,onKeyup:null,onMousedown:null,onMouseup:null,onPaste:null,onScroll:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},purifyCustomCode:!1,codeviewFilter:!0,codeviewFilterRegex:/<\/*(?:applet|b(?:ase|gsound|link)|embed|frame(?:set)?|ilayer|l(?:ayer|ink)|meta|object|s(?:cript|tyle)|t(?:itle|extarea)|xml)[^>]*?>/gi,codeviewIframeFilter:!0,codeviewIframeWhitelistSrc:[],codeviewIframeWhitelistSrcBase:["www.youtube.com","www.youtube-nocookie.com","www.facebook.com","vine.co","instagram.com","player.vimeo.com","www.dailymotion.com","player.youku.com","jumpingbean.tv","v.qq.com"],purifyHtml:{enabled:!0,forbidTags:["script","style","link","meta","applet","embed","object","frame","frameset","ilayer","layer","title"],forbidAttrs:["style",/^on[a-z]+$/i,/^data-[a-z0-9-]+$/i],forbidEmptyAttrs:["class","id","name","title"]},keyMap:{pc:{ESC:"escape",ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show","CTRL+S":"save"},mac:{ESC:"escape",ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show","CMD+S":"save"}},icons:Tr,emojiCdnUrl:"https://cdn.jsdelivr.net/npm/emojibase-data@15.0.0"}});class Va{constructor(t,e,i,n){this.markup=t,this.children=e,this.options=i,this.callback=n}render(t){const e=$(this.markup);if(this.options&&this.options.contents&&e.html(this.options.contents),this.options&&this.options.className&&e.addClass(this.options.className),this.options&&this.options.css&&e.css(this.options.css),this.options&&this.options.attrs&&e.attr(this.options.attrs),this.options&&this.options.data&&$.each(this.options.data,(i,n)=>{e.attr("data-"+i,n)}),this.options&&this.options.click&&e.on("click",this.options.click),this.children){const i=e.find(".note-children-container");this.children.forEach(n=>{n.render(i.length?i:e)})}return this.callback&&this.callback(e,this.options),this.options&&this.options.callback&&this.options.callback(e),t&&t.append(e),e}}const I={create:(s,t)=>function(){const e=typeof arguments[1]=="object"?arguments[1]:arguments[0];let i=Array.isArray(arguments[0])?arguments[0]:[];return e&&e.children&&(i=e.children),new Va(s,i,e,t)}},ge=I.create('<div class="note-editor note-frame card"></div>'),be=I.create('<div class="note-toolbar note-toolbar-main card-header" role="toolbar"></div>'),_t=I.create('<div class="note-editing-area"></div>'),qt=I.create('<textarea class="note-codable" aria-multiline="true"></textarea>'),ve=I.create('<div class="note-editable card-block" contentEditable="true" role="textbox" aria-multiline="true"></div>'),Ce=I.create(['<output class="note-status-output" role="status" aria-live="polite"></output>','<div class="note-statusbar" role="status">','<div class="note-statusbar-content">','<div class="note-selection-path fwm"></div>','<div class="note-zoomer d-flex hstack flex-nowrap gap-2">','<button type="button" class="note-zoom-action btn btn-clear-dark btn-no-border btn-sm btn-icon rounded-circle" data-action="decr" title="Zoom out">&minus;</button>','<span class="note-zoom-value text-nowrap" data-value="1">100 %</span>','<button type="button" class="note-zoom-action btn btn-clear-dark btn-no-border btn-sm btn-icon rounded-circle" data-action="incr" title="Zoom in">&plus;</button>',"</div>","</div>",'<div class="note-resizebar" aria-label="Resize">','<div class="note-icon-bar"></div>','<div class="note-icon-bar"></div>','<div class="note-icon-bar"></div>',"</div>","</div>"].join("")),Os=I.create('<div class="note-editor note-airframe"></div>'),Fs=I.create(['<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"></div>','<output class="note-status-output" role="status" aria-live="polite"></output>'].join("")),_a=I.create('<div class="note-btn-group btn-group"></div>'),qa=I.create('<div class="note-toolgroup"></div>'),Wa=I.create('<div class="note-dropdown-menu dropdown-menu" role="list"></div>',function(s,t){const e=Array.isArray(t.items)?t.items.map(function(i){const n=typeof i=="string"?i:i.value||"",r=t.template?t.template(i):i,a=typeof i=="object"?i.option:void 0,c='data-value="'+n+'"',d=a!==void 0?' data-option="'+a+'"':"";return'<a class="dropdown-item" href="#" '+(c+d)+' role="listitem" aria-label="'+n+'">'+r+"</a>"}).join(""):t.items;s.html(e).attr({"aria-label":t.title}),t&&t.codeviewKeepButton&&s.addClass("note-codeview-keep")}),Ka=function(s){return s},Ga=I.create('<div class="note-dropdown-menu dropdown-menu note-check" role="list"></div>',function(s,t){const e=Array.isArray(t.items)?t.items.map(function(i){const n=typeof i=="string"?i:i.value||"",r=t.template?t.template(i):i;return'<a class="dropdown-item" href="#" data-value="'+n+'" role="listitem" aria-label="'+i+'">'+js(t.checkClassName)+" "+r+"</a>"}).join(""):t.items;s.html(e).attr({"aria-label":t.title}),t&&t.codeviewKeepButton&&s.addClass("note-codeview-keep")}),Za=I.create('<div class="modal note-modal" aria-hidden="false" tabindex="-1" role="dialog"></div>',function(s,t){t.fade&&s.addClass("fade"),s.attr({"aria-label":t.title}),s.html(['<div class="modal-dialog">','<div class="modal-content">',t.title?'<div class="modal-header"><h4 class="modal-title">'+t.title+'</h4><button type="button" class="close" data-dismiss="modal" aria-label="Close" aria-hidden="true"></button></div>':"",'<div class="modal-body">'+t.body+"</div>",t.footer?'<div class="modal-footer">'+t.footer+"</div>":"","</div>","</div>"].join(""))}),Qa=I.create(['<div class="note-popover popover bs-popover-auto show" x-arrow="arrow">','<div class="arrow"></div>','<div class="popover-content note-toolbar note-children-container"></div>',"</div>"].join(""),function(s,t){t.hideArrow&&s.find(".arrow").hide()}),Ja=I.create('<div class="form-check"></div>',function(s,t){s.html(['<input type="checkbox" class="form-check-input"'+(t.id?' id="note-'+t.id+'"':""),t.checked?" checked":"",' aria-label="'+(t.text?t.text:"")+'"',' aria-checked="'+(t.checked?"true":"false")+'"/>','<label class="form-check-label"'+(t.id?' for="note-'+t.id+'"':"")+">"," "+(t.text?t.text:"")+"</label>"].join(""))}),js=function(s,t){return s.match(/^</)?s:(t=t||"i","<"+t+' class="'+s+'"></'+t+">")},Ya=function(s){return{editor:ge,toolbar:be,editingArea:_t,codable:qt,editable:ve,statusbar:Ce,airEditor:Os,airEditable:Fs,buttonGroup:_a,toolGroup:qa,dropdown:Wa,dropdownButtonContents:Ka,dropdownCheck:Ga,dialog:Za,popover:Qa,icon:js,checkbox:Ja,options:s,palette:function(t,e){return I.create('<div class="note-color-palette"></div>',function(i,n){const r=[];for(let c=0,d=n.colors.length;c<d;c++){const h=n.eventName,u=n.colors[c],f=n.colorsName[c],m=[];for(let g=0,x=u.length;g<x;g++){const z=u[g],w=f[g];m.push(['<button type="button" class="note-color-btn"','style="background-color:',z,'" ','data-event="',h,'" ','data-value="',z,'" ','title="',w,'" ','aria-label="',w,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}r.push('<div class="note-color-row">'+m.join("")+"</div>")}if(i.html(r.join("")),n.tooltip){var a={container:n.container||s.container,trigger:"hover",placement:"bottom"};i.tooltip({selector:".note-color-btn",...a})}})(t,e)},button:function(t,e){return I.create('<button type="button" class="note-btn btn btn-light btn-sm"></button>',function(i,n){n&&n.tooltip&&i.attr({title:n.tooltip,"aria-label":n.tooltip}).tooltip({container:n.container||s.container,trigger:"hover",placement:"bottom",popperConfig:{modifiers:{computeStyle:{gpuAcceleration:!1},arrow:{element:".arrow"}}}}).on("click",r=>{$(r.currentTarget).tooltip("hide")}),n&&n.codeviewButton&&i.addClass("note-codeview-keep")})(t,e)},toggleBtn:function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},toggleBtnActive:function(t,e){t.toggleClass("active",e)},onDialogShown:function(t,e){t.one("shown.bs.modal",e)},onDialogHidden:function(t,e){t.one("hidden.bs.modal",e)},showDialog:function(t){t.modal("show")},hideDialog:function(t){t.modal("hide")},createLayout:function(t){const e=(s.airMode?Os([_t([qt(),Fs()])]):s.toolbarPosition==="bottom"?ge([_t([qt(),ve()]),be(),Ce()]):ge([be(),_t([qt(),ve()]),Ce()])).render();return e.insertAfter(t),{note:t,editor:e,toolbar:e.find(".note-toolbar"),editingArea:e.find(".note-editing-area"),editable:e.find(".note-editable"),codable:e.find(".note-codable"),statusbar:e.find(".note-statusbar")}},removeLayout:function(t,e){t.html(e.editable.html()),e.editor.remove(),t.show()}}};$.summernote=$.extend($.summernote,{ui_template:Ya,interface:"sm"})})();
//# sourceMappingURL=summernote-sm.js.map
